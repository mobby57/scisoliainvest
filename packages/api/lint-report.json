[
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\app.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 35,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 35,
        "endColumn": 17
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'next' is defined but never used.",
        "line": 41,
        "column": 25,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 41,
        "endColumn": 29,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "next" },
            "fix": { "range": [1073, 1079], "text": "" },
            "desc": "Remove unused variable 'next'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// Third-party packages\nimport cors from \"cors\";\nimport express from \"express\";\n\n// Local modules\nimport { authenticateJWT } from \"./middleware/authMiddleware.js\";\nimport adminRoutes from \"./routes/admin_new.js\";\nimport authRoutes from \"./routes/auth.js\";\nimport projectsRoutes from \"./routes/projects.js\";\nimport User from \"./models/User.js\";\n\nconst app = express();\n\napp.use(cors());\napp.use(express.json());\n\n// Register routes\napp.use(\"/api/admin\", adminRoutes);\napp.use(\"/api/auth\", authRoutes);\napp.use(\"/api/projects\", projectsRoutes);\n\n// User profile route for testing\napp.get(\"/api/user/profile\", authenticateJWT, async (req, res) => {\n  try {\n    const user = await User.findById(req.user.userId).select(\"-password\");\n    if (!user) {\n      return res.status(404).json({ message: \"User not found\" });\n    }\n    res.json({\n      id: user._id,\n      email: user.email,\n      role: user.role,\n      profile: user.profile,\n    });\n  } catch (_error) {\n    res.status(500).json({ message: \"Server error\" });\n  }\n});\n\n// Error handling middleware\napp.use((err, req, res, next) => {\n  console.error(err.stack);\n  res.status(500).json({ message: \"Something went wrong!\" });\n});\n\n// 404 handler for undefined routes\napp.use((req, res) => {\n  res.status(404).json({ message: \"Route not found\" });\n});\n\nexport default app;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\database\\connection.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\database\\mongoConnection.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\docs\\matcher-state-lifecycle.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\eslint.config.mjs",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\connection_manager.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\connection_manager.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\index.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\index.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\interaction.factory.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\mission.factory.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\project.factory.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\project.factory.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\sciResource.factory.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 2,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 2,
        "endColumn": 54
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 53
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 24,
        "column": 12,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 24,
        "endColumn": 15,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [678, 681], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [678, 681], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-argument",
        "severity": 2,
        "message": "Unsafe argument of type `any` assigned to a parameter of type `ISCIResource`.",
        "line": 101,
        "column": 20,
        "nodeType": "AwaitExpression",
        "messageId": "unsafeArgument",
        "endLine": 101,
        "endColumn": 61
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-return",
        "severity": 2,
        "message": "Unsafe return of a value of type `any`.",
        "line": 114,
        "column": 3,
        "nodeType": "ReturnStatement",
        "messageId": "unsafeReturn",
        "endLine": 117,
        "endColumn": 6
      }
    ],
    "suppressedMessages": [],
    "errorCount": 4,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { faker } from \"@faker-js/faker\";\nimport SCIResourceModel from \"../models/SCIResource\";\nimport type { ISCIResource } from \"../types/models\";\n\ninterface SCIResourceOverrides {\n  title?: string;\n  description?: string;\n  type?: string;\n  category?: string;\n  content?: Record<string, unknown>;\n  documents?: Array<Record<string, unknown>>;\n  author?: Record<string, unknown>;\n  published?: boolean;\n  featured?: boolean;\n}\n\n/**\n * Create a new SCI resource with realistic test data\n * @param overrides - Override default values\n * @returns Created SCI resource document\n */\nexport const createSCIResourceFactory = async (\n  overrides: SCIResourceOverrides = {},\n): Promise<any> => {\n  const defaultData = {\n    title: faker.company.catchPhrase(),\n    description: faker.lorem.paragraphs(3),\n    type: faker.helpers.arrayElement([\n      \"guide\",\n      \"template\",\n      \"calculator\",\n      \"checklist\",\n      \"legal\",\n    ]),\n    category: faker.helpers.arrayElement([\n      \"tax\",\n      \"legal\",\n      \"financial\",\n      \"management\",\n      \"compliance\",\n    ]),\n    content: {\n      sections: [\n        {\n          title: \"Introduction\",\n          content: faker.lorem.paragraphs(2),\n        },\n        {\n          title: \"Key Points\",\n          content: faker.lorem.paragraphs(3),\n        },\n      ],\n      metadata: {\n        difficulty: faker.helpers.arrayElement([\n          \"beginner\",\n          \"intermediate\",\n          \"advanced\",\n        ]),\n        estimatedTime: faker.number.int({ min: 5, max: 60 }),\n        tags: faker.helpers.arrayElements(\n          [\"SCI\", \"tax\", \"investment\", \"legal\"],\n          3,\n        ),\n      },\n    },\n    documents: [\n      {\n        name: faker.lorem.words(3) + \".pdf\",\n        url: faker.internet.url(),\n        type: \"pdf\",\n        size: faker.number.int({ min: 100000, max: 5000000 }),\n      },\n    ],\n    author: {\n      name: faker.person.fullName(),\n      email: faker.internet.email(),\n      role: faker.helpers.arrayElement([\"expert\", \"lawyer\", \"accountant\"]),\n    },\n    published:\n      overrides.published ?? faker.datatype.boolean({ probability: 0.8 }),\n    featured:\n      overrides.featured ?? faker.datatype.boolean({ probability: 0.2 }),\n    ...overrides,\n  };\n\n  return await SCIResourceModel.create(defaultData);\n};\n\n/**\n * Create multiple SCI resources at once\n * @param count - Number of resources to create\n * @param overrides - Override default values\n * @returns Array of created SCI resources\n */\nexport const createSCIResourcesFactory = async (\n  count: number = 5,\n  overrides: SCIResourceOverrides = {},\n): Promise<ISCIResource[]> => {\n  const resources: ISCIResource[] = [];\n  for (let i = 0; i < count; i++) {\n    resources.push(await createSCIResourceFactory(overrides));\n  }\n  return resources;\n};\n\n/**\n * Create a featured SCI resource\n * @param overrides - Override default values\n * @returns Created featured resource\n */\nexport const createFeaturedResourceFactory = async (\n  overrides: SCIResourceOverrides = {},\n): Promise<ISCIResource> => {\n  return await createSCIResourceFactory({\n    featured: true,\n    ...overrides,\n  });\n};\n\nexport {\n  createSCIResourceFactory as createSCIResource,\n  createSCIResourcesFactory as createSCIResources,\n  createFeaturedResourceFactory as createFeaturedResource,\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\task.factory.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\tenant.factory.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\tenant.factory.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'ITenant' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 1,
        "column": 15,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 1,
        "endColumn": 22
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 5,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 5,
        "endColumn": 34
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 19,
        "column": 12,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 19,
        "endColumn": 15,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [533, 536], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [533, 536], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 71,
        "column": 12,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 71,
        "endColumn": 15,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [2023, 2026], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [2023, 2026], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 72,
        "column": 18,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 72,
        "endColumn": 21,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [2052, 2055], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [2052, 2055], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 2,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import type { ITenant } from \"../types/models\";\nimport Tenant from \"../models/Tenant\";\nimport User from \"../models/User\";\nimport { faker } from \"@faker-js/faker\";\nimport { Types } from \"mongoose\";\n\ninterface ITenantFactoryOverrides {\n  owner?: string | Types.ObjectId;\n  [key: string]: unknown;\n}\n\n/**\n * Create a new tenant with realistic test data\n * @param overrides - Override default values\n * @returns Created tenant document\n */\nexport const createTenantFactory = async (\n  overrides: ITenantFactoryOverrides = {},\n): Promise<any> => {\n  let ownerId: Types.ObjectId;\n\n  if (overrides.owner) {\n    ownerId =\n      typeof overrides.owner === \"string\"\n        ? new Types.ObjectId(overrides.owner)\n        : (overrides.owner);\n  } else {\n    const user = await User.create({\n      email: faker.internet.email(),\n      password: \"Test123456!\",\n      role: \"admin\",\n      profile: {\n        firstName: faker.person.firstName(),\n        lastName: faker.person.lastName(),\n        phone: faker.phone.number({ style: \"international\" }),\n      },\n    });\n    ownerId = user._id as Types.ObjectId;\n  }\n\n  const tenantData = {\n    name: faker.company.name(),\n    slug: faker.helpers.slugify(faker.company.name()).toLowerCase(),\n    owner: ownerId,\n    users: [] as Types.ObjectId[],\n    projects: [] as Types.ObjectId[],\n    settings: {\n      branding: {\n        logoUrl: faker.image.urlPlaceholder(),\n        primaryColor: faker.internet.color(),\n        secondaryColor: faker.internet.color(),\n      },\n      features: [\"investments\", \"kyc\", \"analytics\", \"notifications\"],\n    },\n    address: {\n      street: faker.location.streetAddress(),\n      city: faker.location.city(),\n      state: faker.location.state(),\n      zipCode: faker.location.zipCode(),\n      country: faker.location.country(),\n    },\n  };\n\n  const finalData = { ...tenantData, ...overrides };\n  return await Tenant.create(finalData);\n};\n\nexport const createTenantsFactory = async (\n  count: number = 3,\n  overrides: ITenantFactoryOverrides = {},\n): Promise<any[]> => {\n  const tenants: any[] = [];\n  for (let i = 0; i < count; i++) {\n    tenants.push(await createTenantFactory(overrides));\n  }\n  return tenants;\n};\n\nexport {\n  createTenantFactory as createTenant,\n  createTenantsFactory as createTenants,\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\user.factory.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 34
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// backend/factories/user.factory.ts\nimport { IUser } from \"../types/models\";\nimport { faker } from \"@faker-js/faker\";\nimport { Types } from \"mongoose\";\n\nexport const createUserFactory = (overrides: Partial<IUser> = {}): IUser => {\n  const userData = {\n    _id: new Types.ObjectId(),\n    email: faker.internet.email(),\n    password: \"Test123!\",\n    role: \"investor\" as const,\n    isEmailVerified: true,\n    profile: {\n      firstName: faker.person.firstName(),\n      lastName: faker.person.lastName(),\n      phone: faker.phone.number(),\n      avatar: faker.image.avatar(),\n      kycStatus: \"verified\" as const,\n      ...overrides.profile,\n    },\n    preferences: {\n      notifications: {\n        email: true,\n        sms: true,\n        push: true,\n      },\n      language: \"en\",\n      currency: \"EUR\",\n      ...overrides.preferences,\n    },\n    ...overrides,\n  };\n  \n  return userData as IUser;\n};\n\nexport const createTestUser = (overrides: Partial<IUser> = {}): IUser => {\n  return createUserFactory({ role: \"investor\", ...overrides });\n};\n\nexport const createTestAdmin = (overrides: Partial<IUser> = {}): IUser => {\n  return createUserFactory({ role: \"admin\", ...overrides });\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\user_factory.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\factories\\utils.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\middleware\\adminMiddleware.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\middleware\\auditLogger.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\middleware\\authMiddleware.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\middleware\\index.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\middleware\\requestLogger.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\middleware\\responseHandler.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\middleware\\validation.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\AuditLog.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Document.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Donation.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Lease.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Notification.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Payment.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Project.d.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 68,
        "column": 22,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 68,
        "endColumn": 25,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [1411, 1414], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [1411, 1414], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 68,
        "column": 36,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 68,
        "endColumn": 39,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [1425, 1428], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [1425, 1428], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { Document, Model, Types } from \"mongoose\";\n\nexport interface ILocation {\n  address: string;\n  city: string;\n  postalCode: string;\n  coordinates?: {\n    lat: number;\n    lng: number;\n  };\n}\n\nexport interface IFinancials {\n  totalInvestment: number;\n  targetAmount: number;\n  currentAmount: number;\n  expectedReturn: number;\n  duration: number;\n  entryTicket: number;\n}\n\nexport interface IMilestone {\n  name: string;\n  date: Date;\n  completed: boolean;\n}\n\nexport interface ITimeline {\n  startDate: Date;\n  endDate: Date;\n  milestones: IMilestone[];\n}\n\nexport interface IDocument {\n  name: string;\n  url: string;\n  type: string;\n}\n\nexport interface IInvestor {\n  user: Types.ObjectId;\n  amount: number;\n  shares: number;\n  investedAt: Date;\n}\n\nexport interface IProject extends Document {\n  name: string;\n  description: string;\n  type: \"residential\" | \"commercial\" | \"mixed\";\n  location: ILocation;\n  financials: IFinancials;\n  timeline: ITimeline;\n  documents: IDocument[];\n  status: \"draft\" | \"active\" | \"funded\" | \"completed\" | \"cancelled\";\n  tenant: Types.ObjectId;\n  createdBy: Types.ObjectId;\n  investors: IInvestor[];\n  progress: number;\n  remainingAmount: number;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\n// Add static methods interface for the Project model\nexport interface IProjectModel extends Model<IProject> {\n  create(projectData: Partial<IProject>): Promise<IProject>;\n  deleteMany(filter: any): Promise<any>;\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Project.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\RefreshToken.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Rent.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\SCIResource.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\SCIShare.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Task.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Tenant.d.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 36,
        "column": 18,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 36,
        "endColumn": 21,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [697, 700], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [697, 700], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 37,
        "column": 15,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 37,
        "endColumn": 18,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [737, 740], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [737, 740], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 38,
        "column": 29,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 38,
        "endColumn": 32,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [770, 773], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [770, 773], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 39,
        "column": 20,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 39,
        "endColumn": 23,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [794, 797], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [794, 797], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 39,
        "column": 28,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 39,
        "endColumn": 31,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [802, 805], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [802, 805], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 5,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { Document } from \"mongoose\";\n\nexport interface ITenant extends Document {\n  _id: string;\n  name: string;\n  slug: string;\n  owner: string | import(\"../types/models\").IUser;\n  users: string[];\n  projects: string[];\n  settings: {\n    branding: {\n      logoUrl?: string;\n      primaryColor?: string;\n      secondaryColor?: string;\n    };\n    features: string[];\n  };\n  description?: string;\n  logo?: string;\n  website?: string;\n  email?: string;\n  phone?: string;\n  address?: {\n    street?: string;\n    city?: string;\n    state?: string;\n    zipCode?: string;\n    country?: string;\n  };\n  isActive?: boolean;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\ndeclare const Tenant: {\n  create: (data: any) => Promise<ITenant>;\n  find: () => any;\n  findById: (id: string) => any;\n  findOne: (query: any) => any;\n};\n\nexport default Tenant;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\Tenant.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\User.d.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\User.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\models\\index.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'mongoose' is assigned a value but never used.",
        "line": 1,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 1,
        "endColumn": 15,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "mongoose" },
            "fix": { "range": [0, 37], "text": "" },
            "desc": "Remove unused variable 'mongoose'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "const mongoose = require(\"mongoose\");\n\n// Import all models\nconst User = require(\"./User\");\nconst Project = require(\"./Project\");\nconst Donation = require(\"./Donation\");\nconst SCIResource = require(\"./SCIResource\");\nconst Task = require(\"./Task\");\nconst Tenant = require(\"./Tenant\");\nconst RefreshToken = require(\"./RefreshToken\");\n\n// Export all models\nmodule.exports = {\n  User,\n  Project,\n  Donation,\n  SCIResource,\n  Task,\n  Tenant,\n  RefreshToken,\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\admin.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\admin_new.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'bcrypt' is defined but never used.",
        "line": 2,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 2,
        "endColumn": 14,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "bcrypt" },
            "fix": { "range": [38, 50], "text": "" },
            "desc": "Remove unused variable 'bcrypt'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 17,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 17,
        "endColumn": 17
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 37,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 37,
        "endColumn": 17
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 56,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 56,
        "endColumn": 17
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 4,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import express from \"express\";\nimport bcrypt from \"bcryptjs\";\nimport User from \"../models/User.js\";\nimport Project from \"../models/Project.js\";\nimport {\n  authenticateJWT,\n  authorizeAdmin,\n} from \"../middleware/authMiddleware.enhanced.js\";\n\nconst router = express.Router();\n\n// Main admin routes\nrouter.get(\"/users\", authenticateJWT, authorizeAdmin, async (req, res) => {\n  try {\n    const users = await User.find().select(\"email profile.kycStatus\");\n    res.json(users);\n  } catch (_error) {\n    res.status(500).json({ error: \"Internal server error\" });\n  }\n});\n\n// Admin stats endpoint\nrouter.get(\"/stats\", authenticateJWT, authorizeAdmin, async (req, res) => {\n  try {\n    const userCount = await User.countDocuments();\n    const projectCount = await Project.countDocuments();\n    const kycPendingCount = await User.countDocuments({\n      \"profile.kycStatus\": \"pending\",\n    });\n\n    res.json({\n      users: { total: userCount },\n      projects: { total: projectCount },\n      kyc: { pending: kycPendingCount },\n      data: [], // Added for test compatibility\n    });\n  } catch (_error) {\n    res.status(500).json({ error: \"Internal server error\" });\n  }\n});\n\n// Admin logs endpoint\nrouter.get(\"/logs\", authenticateJWT, authorizeAdmin, async (req, res) => {\n  try {\n    // Mock logs for testing\n    const logs = [\n      {\n        timestamp: new Date(),\n        level: \"info\",\n        message: \"Admin accessed users list\",\n      },\n      { timestamp: new Date(), level: \"info\", message: \"Admin accessed stats\" },\n    ];\n\n    res.json({ logs });\n  } catch (_error) {\n    res.status(500).json({ error: \"Internal server error\" });\n  }\n});\n\nexport default router;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\auth.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\auth_updated.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 175,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 175,
        "endColumn": 17
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "const express = require(\"express\");\nconst bcrypt = require(\"bcryptjs\");\nconst jwt = require(\"jsonwebtoken\");\nconst User = require(\"../models/User\");\nconst { body, validationResult } = require(\"express-validator\");\nconst {\n  handleSuccess,\n  handleError,\n  handleValidationError,\n  handleUnauthorized,\n} = require(\"../middleware/responseHandler\");\n\nconst router = express.Router();\n\n// Validation middleware\nconst validateRegistration = [\n  body(\"email\")\n    .isEmail()\n    .normalizeEmail()\n    .withMessage(\"Please provide a valid email address\"),\n  body(\"password\")\n    .isLength({ min: 8 })\n    .withMessage(\"Password must be at least 8 characters long\"),\n  body(\"profile.firstName\").notEmpty().withMessage(\"First name is required\"),\n  body(\"profile.lastName\").notEmpty().withMessage(\"Last name is required\"),\n  body(\"role\")\n    .optional()\n    .isIn([\"investor\", \"sci\", \"admin\"])\n    .withMessage(\"Invalid role\"),\n];\n\nconst validateLogin = [\n  body(\"email\")\n    .isEmail()\n    .normalizeEmail()\n    .withMessage(\"Please provide a valid email address\"),\n  body(\"password\").notEmpty().withMessage(\"Password is required\"),\n];\n\n// Register\nrouter.post(\"/register\", validateRegistration, async (req, res) => {\n  try {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return handleValidationError(res, errors.array());\n    }\n\n    const { email, password, profile, role } = req.body;\n\n    // Check if user already exists\n    const existingUser = await User.findOne({ email });\n    if (existingUser) {\n      return handleError(res, \"User already exists with this email\", [], 400);\n    }\n\n    // Create user\n    const user = new User({\n      email,\n      password,\n      profile: {\n        firstName: profile.firstName,\n        lastName: profile.lastName,\n        phone: profile.phone || \"\",\n        avatar: profile.avatar || \"\",\n      },\n      role: role || \"investor\",\n    });\n\n    await user.save();\n\n    // Generate JWT\n    const token = jwt.sign(\n      { userId: user._id, email: user.email, role: user.role },\n      process.env.JWT_SECRET || \"your-secret-key\",\n      { expiresIn: \"24h\" },\n    );\n\n    handleSuccess(\n      res,\n      \"User registered successfully\",\n      {\n        token,\n        user: {\n          _id: user._id,\n          id: user._id,\n          email: user.email,\n          profile: {\n            firstName: user.profile.firstName,\n            lastName: user.profile.lastName,\n          },\n          role: user.role,\n        },\n      },\n      201,\n    );\n  } catch (_error) {\n    console.error(\"Registration error:\", error);\n    if (error.code === 11000) {\n      return handleError(res, \"Email already exists\", [], 400);\n    }\n    if (error.name === \"ValidationError\") {\n      return handleError(res, \"Validation failed\", [error.message], 400);\n    }\n    handleError(res, \"Server error during registration\", [], 500);\n  }\n});\n\n// Login\nrouter.post(\"/login\", validateLogin, async (req, res) => {\n  try {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return handleValidationError(res, errors.array());\n    }\n\n    const { email, password } = req.body;\n\n    // Find user\n    const user = await User.findOne({ email });\n    if (!user) {\n      return handleUnauthorized(res, \"Invalid credentials\");\n    }\n\n    // Check password\n    const isMatch = await bcrypt.compare(password, user.password);\n    if (!isMatch) {\n      return handleUnauthorized(res, \"Invalid credentials\");\n    }\n\n    // Generate JWT\n    const token = jwt.sign(\n      { userId: user._id, email: user.email, role: user.role },\n      process.env.JWT_SECRET || \"your-secret-key\",\n      { expiresIn: \"24h\" },\n    );\n\n    handleSuccess(res, \"Login successful\", {\n      token,\n      user: {\n        id: user._id,\n        email: user.email,\n        profile: {\n          firstName: user.profile.firstName,\n          lastName: user.profile.lastName,\n        },\n        role: user.role,\n      },\n    });\n  } catch (_error) {\n    console.error(\"Login error:\", error);\n    handleError(res, \"Server error during login\", [], 500);\n  }\n});\n\n// Get current user\nrouter.get(\"/me\", async (req, res) => {\n  try {\n    const token = req.header(\"Authorization\")?.replace(\"Bearer \", \"\");\n\n    if (!token) {\n      return handleUnauthorized(res, \"No token provided\");\n    }\n\n    const decoded = jwt.verify(\n      token,\n      process.env.JWT_SECRET || \"your-secret-key\",\n    );\n    const user = await User.findById(decoded.userId).select(\"-password\");\n\n    if (!user) {\n      return handleError(res, \"User not found\", [], 404);\n    }\n\n    handleSuccess(res, \"User retrieved successfully\", user);\n  } catch (_error) {\n    handleUnauthorized(res, \"Invalid token\");\n  }\n});\n\nmodule.exports = router;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\health.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\kyc.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'jwt' is defined but never used.",
        "line": 2,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 2,
        "endColumn": 11,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "jwt" },
            "fix": { "range": [38, 47], "text": "" },
            "desc": "Remove unused variable 'jwt'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import express from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/User.js\";\nimport {\n  authenticateJWT,\n  authorizeAdmin,\n} from \"../middleware/authMiddleware.js\";\nimport { handleSuccess, handleError } from \"../middleware/responseHandler.js\";\n\nconst router = express.Router();\n\n// Submit KYC verification\nrouter.post(\"/submit\", authenticateJWT, async (req, res) => {\n  try {\n    const { kycData } = req.body;\n\n    if (!kycData || !kycData.documents) {\n      return handleError(res, \"KYC data and documents are required\", [], 400);\n    }\n\n    const user = await User.findById(req.user.userId);\n    if (!user) {\n      return handleError(res, \"User not found\", [], 404);\n    }\n\n    // Ensure profile object exists\n    if (!user.profile) {\n      user.profile = {};\n    }\n\n    user.profile.kycStatus = \"pending\";\n    user.profile.kycDocuments = kycData.documents || [];\n    user.profile.kycSubmittedAt = new Date();\n\n    await user.save();\n\n    handleSuccess(\n      res,\n      \"KYC submitted successfully\",\n      {\n        kycId: user._id,\n        status: \"pending\",\n        submittedAt: user.profile.kycSubmittedAt,\n      },\n      201,\n    );\n  } catch (_error) {\n    console.error(\"KYC submission error:\", error);\n    handleError(res, \"Server error during KYC submission\", [], 500);\n  }\n});\n\n// Get KYC status for authenticated user\nrouter.get(\"/status\", authenticateJWT, async (req, res) => {\n  try {\n    const user = await User.findById(req.user.userId);\n    if (!user) {\n      return handleError(res, \"User not found\", [], 404);\n    }\n\n    handleSuccess(res, \"KYC status retrieved successfully\", {\n      status: user.profile?.kycStatus || \"not_submitted\",\n      documents: user.profile?.kycDocuments || [],\n    });\n  } catch (_error) {\n    console.error(\"KYC status error:\", error);\n    handleError(res, \"Server error while fetching KYC status\", [], 500);\n  }\n});\n\n// Get KYC status by user ID (for admin or specific lookups)\nrouter.get(\n  \"/status/:userId\",\n  authenticateJWT,\n  authorizeAdmin,\n  async (req, res) => {\n    try {\n      const user = await User.findById(req.params.userId);\n      if (!user) {\n        return handleError(res, \"User not found\", [], 404);\n      }\n\n      handleSuccess(res, \"KYC status retrieved successfully\", {\n        status: user.profile?.kycStatus || \"not_submitted\",\n        documents: user.profile?.kycDocuments || [],\n      });\n    } catch (_error) {\n      console.error(\"KYC status error:\", error);\n      handleError(res, \"Server error while fetching KYC status\", [], 500);\n    }\n  },\n);\n\n// Update KYC status (admin only)\nrouter.put(\n  \"/status/:userId\",\n  authenticateJWT,\n  authorizeAdmin,\n  async (req, res) => {\n    try {\n      const { status, comments } = req.body;\n      const user = await User.findById(req.params.userId);\n\n      if (!user) {\n        return handleError(res, \"User not found\", [], 404);\n      }\n\n      // Ensure profile object exists\n      if (!user.profile) {\n        user.profile = {};\n      }\n\n      user.profile.kycStatus = status;\n      user.profile.kycComments = comments;\n      await user.save();\n\n      handleSuccess(res, \"KYC status updated successfully\", { status });\n    } catch (_error) {\n      console.error(\"KYC update error:\", error);\n      handleError(res, \"Server error during KYC update\", [], 500);\n    }\n  },\n);\n\nexport default router;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\leaseRoutes.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 86,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 86,
        "endColumn": 17
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 133,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 133,
        "endColumn": 17
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 150,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 150,
        "endColumn": 17
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import express from \"express\";\nimport Lease from \"../models/Lease.js\";\nimport {\n  authenticateJWT,\n  authorizeAdmin,\n} from \"../middleware/authMiddleware.enhanced.js\";\nimport { body, validationResult } from \"express-validator\";\n\nconst router = express.Router();\n\n// Validation rules\nconst leaseValidation = [\n  body(\"property\").isMongoId().withMessage(\"Valid property ID is required\"),\n  body(\"tenant\").isMongoId().withMessage(\"Valid tenant ID is required\"),\n  body(\"landlord\").isMongoId().withMessage(\"Valid landlord ID is required\"),\n  body(\"leaseType\")\n    .isIn([\"residential\", \"commercial\", \"mixed\"])\n    .withMessage(\"Valid lease type is required\"),\n  body(\"startDate\").isISO8601().withMessage(\"Valid start date is required\"),\n  body(\"endDate\").isISO8601().withMessage(\"Valid end date is required\"),\n  body(\"monthlyRent\")\n    .isNumeric()\n    .isFloat({ min: 0 })\n    .withMessage(\"Monthly rent must be a positive number\"),\n  body(\"securityDeposit\")\n    .isNumeric()\n    .isFloat({ min: 0 })\n    .withMessage(\"Security deposit must be a positive number\"),\n  body(\"paymentDay\")\n    .isInt({ min: 1, max: 31 })\n    .withMessage(\"Payment day must be between 1 and 31\"),\n  body(\"status\").optional().isIn([\"active\", \"terminated\", \"expired\", \"draft\"]),\n  body(\"terms\").optional().isString().withMessage(\"Terms must be a string\"),\n];\n\n// GET all leases with filtering\nrouter.get(\"/\", authenticateJWT, async (req, res) => {\n  try {\n    const { status, property, tenant, page = 1, limit = 10 } = req.query;\n    const filter = {};\n\n    if (status) filter.status = status;\n    if (property) filter.property = property;\n    if (tenant) filter.tenant = tenant;\n\n    const leases = await Lease.find(filter)\n      .populate(\"property\", \"name location\")\n      .populate(\"tenant\", \"profile.firstName profile.lastName email\")\n      .populate(\"landlord\", \"profile.firstName profile.lastName email\")\n      .sort({ startDate: -1 })\n      .limit(limit * 1)\n      .skip((page - 1) * limit);\n\n    const total = await Lease.countDocuments(filter);\n\n    res.json({\n      success: true,\n      data: leases,\n      pagination: {\n        currentPage: page,\n        totalPages: Math.ceil(total / limit),\n        totalItems: total,\n        itemsPerPage: limit,\n      },\n    });\n  } catch (_error) {\n    res.status(500).json({ success: false, message: error.message });\n  }\n});\n\n// GET single lease\nrouter.get(\"/:id\", authenticateJWT, async (req, res) => {\n  try {\n    const lease = await Lease.findById(req.params.id)\n      .populate(\"property\", \"name location\")\n      .populate(\"tenant\", \"profile.firstName profile.lastName email\")\n      .populate(\"landlord\", \"profile.firstName profile.lastName email\");\n\n    if (!lease) {\n      return res\n        .status(404)\n        .json({ success: false, message: \"Lease not found\" });\n    }\n\n    res.json({ success: true, data: lease });\n  } catch (_error) {\n    res.status(404).json({ success: false, message: \"Lease not found\" });\n  }\n});\n\n// POST create new lease\nrouter.post(\"/\", authenticateJWT, leaseValidation, async (req, res) => {\n  try {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return res.status(400).json({ success: false, errors: errors.array() });\n    }\n\n    const lease = new Lease({\n      ...req.body,\n      createdBy: req.user.userId,\n    });\n\n    await lease.save();\n    await lease.populate(\"property tenant landlord\");\n\n    res.status(201).json({ success: true, data: lease });\n  } catch (_error) {\n    res.status(400).json({ success: false, message: error.message });\n  }\n});\n\n// PUT update lease\nrouter.put(\"/:id\", authenticateJWT, leaseValidation, async (req, res) => {\n  try {\n    const errors = validationResult(req);\n    if (!errors.isEmpty()) {\n      return res.status(400).json({ success: false, errors: errors.array() });\n    }\n\n    const lease = await Lease.findByIdAndUpdate(req.params.id, req.body, {\n      new: true,\n      runValidators: true,\n    }).populate(\"property tenant landlord\");\n\n    if (!lease) {\n      return res\n        .status(404)\n        .json({ success: false, message: \"Lease not found\" });\n    }\n\n    res.json({ success: true, data: lease });\n  } catch (_error) {\n    res.status(404).json({ success: false, message: \"Lease not found\" });\n  }\n});\n\n// DELETE lease\nrouter.delete(\"/:id\", authenticateJWT, authorizeAdmin, async (req, res) => {\n  try {\n    const lease = await Lease.findByIdAndDelete(req.params.id);\n\n    if (!lease) {\n      return res\n        .status(404)\n        .json({ success: false, message: \"Lease not found\" });\n    }\n\n    res.json({ success: true, message: \"Lease deleted successfully\" });\n  } catch (_error) {\n    res.status(404).json({ success: false, message: \"Lease not found\" });\n  }\n});\n\n// GET overdue leases report\nrouter.get(\"/reports/overdue\", authenticateJWT, async (req, res) => {\n  try {\n    const leases = await Lease.find({\n      status: \"active\",\n      endDate: { $lt: new Date() },\n    })\n      .populate(\"property\", \"name location\")\n      .populate(\"tenant\", \"profile.firstName profile.lastName email\")\n      .populate(\"landlord\", \"profile.firstName profile.lastName email\")\n      .sort({ endDate: 1 });\n\n    res.json({ success: true, data: leases });\n  } catch (_error) {\n    res.status(500).json({ success: false, message: error.message });\n  }\n});\n\nexport default router;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\paymentRoutes.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\projectRoutes.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'error' is defined but never used.",
        "line": 33,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 33,
        "endColumn": 17
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import express from \"express\";\nimport {\n  authenticateJWT,\n  authorizeAdmin,\n} from \"../middleware/authMiddleware.enhanced.js\";\n\nconst router = express.Router();\n\n// Mock data for project information\nconst projectData = {\n  id: 1,\n  title: \"Rsidence les Jardins de Metz\",\n  description:\n    \"Une rsidence moderne au cur de Metz, alliant confort et investissement scuris.\",\n  location: \"Quartier Saint-Jean, Metz\",\n  surface: \"3500 m\",\n  units: 42,\n  delivery: \"t 2025\",\n  advantages: [\n    \"Rendement attractif dans une ville en plein dveloppement\",\n    \"Emplacement stratgique au cur de Metz\",\n    \"quipe exprimente et fiable\",\n  ],\n};\n\n// GET project information\nrouter.get(\"/\", authenticateJWT, authorizeAdmin, (req, res) => {\n  try {\n    res.status(200).json({\n      success: true,\n      data: projectData,\n    });\n  } catch (_error) {\n    res.status(500).json({\n      success: false,\n      message: \"Erreur lors de la rcupration des informations du projet\",\n    });\n  }\n});\n\n// Debug logging to verify middleware functions are loaded\nconsole.log(\"authenticateJWT type:\", typeof authenticateJWT);\nconsole.log(\"authorizeAdmin type:\", typeof authorizeAdmin);\n\nexport default router;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\projects.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\rentRoutes.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\sciExpertiseRoutes.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\routes\\test.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\scripts\\health-check.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'__dirname' is assigned a value but never used.",
        "line": 8,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 8,
        "endColumn": 16,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "__dirname" },
            "fix": { "range": [202, 245], "text": "" },
            "desc": "Remove unused variable '__dirname'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "#!/usr/bin/env node\nimport mongoose from \"path/to/your/script\";\nimport { fileURLToPath } from \"url\";\nimport path from \"path\";\n\n// Handle ES6 __dirname\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nasync function healthCheck() {\n  try {\n    console.log(\" Running health check...\");\n\n    // Check MongoDB connection\n    const mongoUri =\n      process.env.MONGODB_URI || \"mongodb://localhost:27017/sci-solia\";\n    await mongoose.connect(mongoUri);\n    console.log(\" MongoDB connection: OK\");\n\n    // Check audit log model\n    const AuditLog = (await import(\"../models/AuditLog.js\")).default;\n    const RefreshToken = (await import(\"../models/RefreshToken.js\")).default;\n\n    // Create indexes for performance\n    await AuditLog.collection.createIndex({ userId: 1, timestamp: -1 });\n    await AuditLog.collection.createIndex({ action: 1, timestamp: -1 });\n    await RefreshToken.collection.createIndex(\n      { expiresAt: 1 },\n      { expireAt: 0 },\n    );\n\n    console.log(\" Indexes created successfully\");\n\n    // Clean up expired refresh tokens\n    const result = await RefreshToken.deleteMany({\n      expiresAt: { $lt: new Date() },\n    });\n    console.log(` Cleaned up ${result.deletedCount} expired refresh tokens`);\n\n    console.log(\" Health check completed successfully\");\n    process.exit(0);\n  } catch (_error) {\n    console.error(\" Health check failed:\", error);\n    process.exit(1);\n  }\n}\n\n// Run if called directly\nif (process.argv[1] === fileURLToPath(import.meta.url)) {\n  setupMonitoring();\n}\n\nexport default setupMonitoring;\nhealthCheck;\nasync function setupMonitoring() {\n  try {\n    console.log(\"Setting up monitoring...\");\n    // Add any monitoring setup code here\n    console.log(\"Monitoring setup complete\");\n  } catch (_error) {\n    console.error(\"Error setting up monitoring:\", error);\n  }\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\scripts\\seed-dev.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'bcrypt' is assigned a value but never used.",
        "line": 4,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 4,
        "endColumn": 13,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "bcrypt" },
            "fix": { "range": [124, 159], "text": "" },
            "desc": "Remove unused variable 'bcrypt'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "const mongoose = require(\"mongoose\");\nconst User = require(\"../models/User\");\nconst Project = require(\"../models/Project\");\nconst bcrypt = require(\"bcryptjs\");\n\nconst seedDatabase = async () => {\n  try {\n    await mongoose.connect(\n      process.env.MONGO_URI || \"mongodb://localhost:27017/solia_sci\",\n      {\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n      },\n    );\n\n    console.log(\"Connected to MongoDB\");\n\n    // Create test users\n    const testUsers = [\n      {\n        email: \"test@example.com\",\n        password: \"password123\",\n        name: \"Test User\",\n        role: \"investor\",\n      },\n      {\n        email: \"admin@example.com\",\n        password: \"admin123\",\n        name: \"Admin User\",\n        role: \"admin\",\n      },\n    ];\n\n    for (const userData of testUsers) {\n      const existingUser = await User.findOne({ email: userData.email });\n      if (!existingUser) {\n        const user = new User(userData);\n        await user.save();\n        console.log(`Created user: ${user.email}`);\n      } else {\n        console.log(`User already exists: ${userData.email}`);\n      }\n    }\n\n    // Create test projects\n    const testProjects = [\n      {\n        title: \"Test Project 1\",\n        description: \"A test project for Postman testing\",\n        investmentGoal: 10000,\n        currentInvestment: 2500,\n        status: \"active\",\n        category: \"renewable_energy\",\n      },\n      {\n        title: \"Test Project 2\",\n        description: \"Another test project for Postman testing\",\n        investmentGoal: 50000,\n        currentInvestment: 10000,\n        status: \"active\",\n        category: \"sustainable_agriculture\",\n      },\n    ];\n\n    for (const projectData of testProjects) {\n      const existingProject = await Project.findOne({\n        title: projectData.title,\n      });\n      if (!existingProject) {\n        const project = new Project(projectData);\n        await project.save();\n        console.log(`Created project: ${project.title}`);\n      } else {\n        console.log(`Project already exists: ${projectData.title}`);\n      }\n    }\n\n    console.log(\"Database seeded successfully!\");\n    console.log(\"\\nTest credentials:\");\n    console.log(\"Email: test@example.com, Password: password123\");\n    console.log(\"Email: admin@example.com, Password: admin123\");\n    console.log(\"\\nTest endpoints:\");\n    console.log(\"POST /api/auth/register\");\n    console.log(\"POST /api/auth/login\");\n    console.log(\"GET /api/projects\");\n    console.log(\"GET /api/projects/:id\");\n    console.log(\"POST /api/kyc/submit\");\n    console.log(\"GET /api/kyc/status\");\n  } catch (_error) {\n    console.error(\"Error seeding database:\", error);\n  } finally {\n    await mongoose.disconnect();\n  }\n};\n\n// Run the seeder\nif (require.main === module) {\n  seedDatabase();\n}\n\nmodule.exports = seedDatabase;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\scripts\\setup-monitoring.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'fs' is defined but never used.",
        "line": 5,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 5,
        "endColumn": 10,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "fs" },
            "fix": { "range": [122, 130], "text": "" },
            "desc": "Remove unused variable 'fs'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'__dirname' is assigned a value but never used.",
        "line": 10,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 10,
        "endColumn": 16,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "__dirname" },
            "fix": { "range": [269, 312], "text": "" },
            "desc": "Remove unused variable '__dirname'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "#!/usr/bin/env node\nimport mongoose from \"mongoose\";\nimport { fileURLToPath } from \"url\";\nimport path from \"path\";\nimport fs from \"fs\";\nimport { logAudit } from \"../middleware/auditLogger.js\";\n\n// Handle ES6 __dirname\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nasync function setupMonitoring() {\n  try {\n    console.log(\" Setting up monitoring and audit system...\");\n\n    // Connect to MongoDB\n    const mongoUri =\n      process.env.MONGODB_URI || \"mongodb://localhost:27017/sci-solia\";\n    await mongoose.connect(mongoUri);\n    console.log(\" Connected to MongoDB\");\n\n    // Import models dynamically\n    const AuditLog = (await import(\"../models/AuditLog.js\")).default;\n    const RefreshToken = (await import(\"../models/RefreshToken.js\")).default;\n\n    // Create indexes for performance\n    console.log(\" Creating indexes...\");\n\n    await AuditLog.collection.createIndex({ userId: 1, timestamp: -1 });\n    await AuditLog.collection.createIndex({ action: 1, timestamp: -1 });\n    await AuditLog.collection.createIndex({ resourceType: 1, resourceId: 1 });\n    await RefreshToken.collection.createIndex(\n      { expiresAt: 1 },\n      { expireAfterSeconds: 0 },\n    );\n\n    console.log(\" Indexes created successfully\");\n\n    // Clean up expired refresh tokens\n    const result = await RefreshToken.deleteMany({\n      expiresAt: { $lt: new Date() },\n    });\n    console.log(` Cleaned up ${result.deletedCount} expired refresh tokens`);\n\n    // Create initial audit log entry\n    await logAudit(null, \"SYSTEM_STARTUP\", \"SYSTEM\", null, {\n      metadata: { message: \"Monitoring system initialized\" },\n    });\n\n    console.log(\" Monitoring setup completed successfully!\");\n    process.exit(0);\n  } catch (_error) {\n    console.error(\" Monitoring setup failed:\", error);\n    process.exit(1);\n  }\n}\n\n// Run if called directly\nif (process.argv[1] === fileURLToPath(import.meta.url)) {\n  setupMonitoring();\n}\n\nexport default setupMonitoring;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\scripts\\verify-api-corrections.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\scripts\\verify-routes-and-tests-fixed.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'express' is defined but never used.",
        "line": 10,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 10,
        "endColumn": 15,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "express" },
            "fix": { "range": [222, 235], "text": "" },
            "desc": "Remove unused variable 'express'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "#!/usr/bin/env node\n\n/**\n * Comprehensive Route and Test Validation Script\n *\n * This script verifies that all routes referenced in tests actually exist\n * and that the test environment is properly configured.\n */\n\nimport express from \"express\";\nimport request from \"supertest\";\nimport mongoose from \"mongoose\";\nimport app from \"../app.js\";\n\n/**\n * Simple verification script that tests all critical routes\n */\n\nasync function verifyRoutes() {\n  console.log(\" Starting comprehensive route and test validation...\");\n\n  const server = app.listen(0); // Use port 0 for dynamic port assignment\n\n  try {\n    // Ensure MongoDB connection is ready\n    if (\n      mongoose.connection.readyState !== mongoose.ConnectionStates.connected\n    ) {\n      await mongoose.connect(\n        process.env.MONGO_URI_TEST || \"mongodb://localhost:27017/testdb\",\n      );\n    }\n\n    console.log(\" Database connection established\");\n\n    // Test basic route accessibility\n    const routesToTest = [\n      {\n        method: \"POST\",\n        path: \"/api/auth/login\",\n        expectedStatus: 200,\n        payload: { email: \"test@test.com\", password: \"test123\" },\n      },\n      { method: \"GET\", path: \"/api/user/profile\", expectedStatus: 200 },\n      { method: \"GET\", path: \"/api/admin/users\", expectedStatus: 200 },\n      { method: \"GET\", path: \"/api/admin/stats\", expectedStatus: 200 },\n      { method: \"GET\", path: \"/api/admin/logs\", expectedStatus: 200 },\n    ];\n\n    let passed = 0;\n    let failed = 0;\n\n    for (const route of routesToTest) {\n      try {\n        let response;\n\n        if (route.method === \"POST\") {\n          response = await request(app).post(route.path).send(route.payload);\n        } else {\n          response = await request(app).get(route.path);\n        }\n\n        const status = response.status;\n        const expected = route.expectedStatus;\n\n        if (status === expected) {\n          console.log(` ${route.method} ${route.path} - Status ${status}`);\n          passed++;\n        } else {\n          console.log(\n            ` ${route.method} ${route.path} - Status ${status} (expected ${expected})`,\n          );\n          failed++;\n        }\n      } catch (_error) {\n        console.log(\n          ` ${route.method} ${route.path} - Error: ${error.message}`,\n        );\n        failed++;\n      }\n    }\n\n    console.log(`\\n Results: ${passed} passed, ${failed} failed`);\n\n    if (failed === 0) {\n      console.log(\" All routes are correctly configured and accessible!\");\n    }\n  } catch (_error) {\n    console.error(\" Verification failed:\", error);\n  } finally {\n    await mongoose.connection.close();\n    server.close();\n  }\n}\n\n// Run verification\nverifyRoutes().catch(console.error);\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\scripts\\verify-routes-and-tests.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'express' is defined but never used.",
        "line": 10,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 10,
        "endColumn": 15,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "express" },
            "fix": { "range": [210, 223], "text": "" },
            "desc": "Remove unused variable 'express'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'adminUser' is assigned a value but never used.",
        "line": 37,
        "column": 19,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 37,
        "endColumn": 28,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "adminUser" },
            "fix": { "range": [923, 939], "text": "" },
            "desc": "Remove unused variable 'adminUser'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'regularUser' is assigned a value but never used.",
        "line": 39,
        "column": 19,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 39,
        "endColumn": 30,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "regularUser" },
            "fix": { "range": [1017, 1035], "text": "" },
            "desc": "Remove unused variable 'regularUser'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 3,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "#!/usr/bin/env node\n\n/**\n * Route and Test Verification Script\n *\n * This script verifies that all routes referenced in tests actually exist\n * and that the test environment is properly configured.\n */\n\nimport express from \"express\";\nimport request from \"supertest\";\nimport mongoose from \"mongoose\";\nimport app from \"../app.js\";\nimport { TestHelpers } from \"../tests/setup/test_helpers.js\";\n\nconst PORT = process.env.PORT || 3001;\n\nasync function verifyRoutes() {\n  console.log(\" Verifying routes and test alignment...\\n\");\n\n  const server = app.listen(PORT);\n\n  try {\n    // Test database connection\n    if (\n      mongoose.connection.readyState !== mongoose.ConnectionStates.connected\n    ) {\n      await mongoose.connect(\n        process.env.MONGO_URI_TEST || \"mongodb://localhost:27017/testdb\",\n      );\n    }\n\n    // Clean up test data\n    await TestHelpers.cleanupTestUsers();\n\n    // Create test users\n    const { user: adminUser, token: adminToken } =\n      await TestHelpers.createAdminUser();\n    const { user: regularUser, token: userToken } =\n      await TestHelpers.createRegularUser();\n\n    const routesToTest = [\n      {\n        method: \"POST\",\n        path: \"/api/auth/login\",\n        expectedStatus: 200,\n        payload: { email: \"admin@test.com\", password: \"AdminPass123!\" },\n      },\n      {\n        method: \"POST\",\n        path: \"/api/auth/register\",\n        expectedStatus: 201,\n        payload: {\n          email: \"newuser@test.com\",\n          password: \"NewPass123!\",\n          firstName: \"New\",\n          lastName: \"User\",\n        },\n      },\n      {\n        method: \"GET\",\n        path: \"/api/auth/me\",\n        expectedStatus: 200,\n        auth: adminToken,\n      },\n      {\n        method: \"GET\",\n        path: \"/api/user/profile\",\n        expectedStatus: 200,\n        auth: adminToken,\n      },\n      {\n        method: \"GET\",\n        path: \"/api/admin/users\",\n        expectedStatus: 200,\n        auth: adminToken,\n      },\n      {\n        method: \"GET\",\n        path: \"/api/admin/stats\",\n        expectedStatus: 200,\n        auth: adminToken,\n      },\n      {\n        method: \"GET\",\n        path: \"/api/admin/logs\",\n        expectedStatus: 200,\n        auth: adminToken,\n      },\n      {\n        method: \"GET\",\n        path: \"/api/admin/users\",\n        expectedStatus: 403,\n        auth: userToken,\n      }, // Regular user should be denied\n    ];\n\n    let passed = 0;\n    let failed = 0;\n\n    for (const route of routesToTest) {\n      try {\n        let response;\n\n        if (route.method === \"GET\") {\n          response = await request(app)\n            .get(route.path)\n            .set(route.auth ? { Authorization: `Bearer ${route.auth}` } : {});\n        } else if (route.method === \"POST\") {\n          response = await request(app).post(route.path).send(route.payload);\n        }\n\n        const status = response.status;\n        const expected = route.expectedStatus;\n\n        if (status === expected) {\n          console.log(\n            ` ${route.method} ${route.path} - Status ${status} (expected ${expected})`,\n          );\n          passed++;\n        } else {\n          console.log(\n            ` ${route.method} ${route.path} - Status ${status} (expected ${expected})`,\n          );\n          failed++;\n        }\n      } catch (_error) {\n        console.log(\n          ` ${route.method} ${route.path} - Error: ${error.message}`,\n        );\n        failed++;\n      }\n    }\n\n    console.log(`\\n Results: ${passed} passed, ${failed} failed`);\n\n    if (failed === 0) {\n      console.log(\" All routes are correctly configured and accessible!\");\n    } else {\n      console.log(\n        \"  Some routes need attention. Check the failed tests above.\",\n      );\n    }\n  } catch (_error) {\n    console.error(\" Verification failed:\", error);\n  } finally {\n    await mongoose.connection.close();\n    server.close();\n  }\n}\n\n// Run verification\nverifyRoutes().catch(console.error);\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\server.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\services\\sciCalculatorService.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'propertyValue' is assigned a value but never used.",
        "line": 19,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 19,
        "endColumn": 20,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "propertyValue" },
            "fix": { "range": [723, 744], "text": "" },
            "desc": "Remove unused variable 'propertyValue'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'ownershipYears' is assigned a value but never used.",
        "line": 20,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 20,
        "endColumn": 21,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "ownershipYears" },
            "fix": { "range": [744, 766], "text": "" },
            "desc": "Remove unused variable 'ownershipYears'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'shares' is assigned a value but never used.",
        "line": 21,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 21,
        "endColumn": 13,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "shares" },
            "fix": { "range": [766, 780], "text": "" },
            "desc": "Remove unused variable 'shares'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'purchaseDate' is assigned a value but never used.",
        "line": 100,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 100,
        "endColumn": 19,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "purchaseDate" },
            "fix": { "range": [3020, 3040], "text": "" },
            "desc": "Remove unused variable 'purchaseDate'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'saleDate' is assigned a value but never used.",
        "line": 101,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 101,
        "endColumn": 15,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "saleDate" },
            "fix": { "range": [3040, 3056], "text": "" },
            "desc": "Remove unused variable 'saleDate'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'shares' is assigned a value but never used.",
        "line": 191,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 191,
        "endColumn": 13,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "shares" },
            "fix": { "range": [5719, 5733], "text": "" },
            "desc": "Remove unused variable 'shares'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'yearsBetweenDonations' is assigned a value but never used.",
        "line": 195,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 195,
        "endColumn": 28,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "yearsBetweenDonations" },
            "fix": { "range": [5799, 5828], "text": "" },
            "desc": "Remove unused variable 'yearsBetweenDonations'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 7,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "class SCICalculatorService {\n  /**\n   * Calculate SCI tax implications based on regime and parameters\n   * @param {Object} params - Calculation parameters\n   * @param {string} params.regime - 'IR' or 'IS'\n   * @param {number} params.rentalIncome - Annual rental income\n   * @param {number} params.expenses - Annual expenses\n   * @param {number} params.propertyValue - Property market value\n   * @param {number} params.ownershipYears - Years of ownership\n   * @param {number} params.shares - Number of shares\n   * @param {Array} params.associates - Array of associate details\n   * @returns {Object} Tax calculation results\n   */\n  static calculateSCITax(params) {\n    const {\n      regime,\n      rentalIncome,\n      expenses,\n      propertyValue,\n      ownershipYears,\n      shares,\n      associates,\n    } = params;\n\n    const netIncome = rentalIncome - expenses;\n    let taxResults = {};\n\n    if (regime === \"IR\") {\n      // Impt sur le revenu - BIC\n      const taxableIncome = Math.max(0, netIncome);\n      const microBIC = rentalIncome * 0.5; // 50% abattement micro BIC\n\n      taxResults = {\n        regime: \"IR\",\n        taxableIncome,\n        microBIC,\n        associates: associates.map((assoc) => ({\n          name: assoc.name,\n          share: assoc.share,\n          taxableAmount: (taxableIncome * assoc.share) / 100,\n          marginalRate: assoc.marginalRate,\n          taxAmount:\n            ((taxableIncome * assoc.share) / 100) * (assoc.marginalRate / 100),\n        })),\n        totalTax: associates.reduce(\n          (sum, assoc) =>\n            sum +\n            ((taxableIncome * assoc.share) / 100) * (assoc.marginalRate / 100),\n          0,\n        ),\n      };\n    } else if (regime === \"IS\") {\n      // Impt sur les socits\n      const isRates = [\n        { threshold: 42500, rate: 0.15 },\n        { threshold: Infinity, rate: 0.25 },\n      ];\n\n      let corporateTax = 0;\n      let remainingIncome = Math.max(0, netIncome);\n\n      for (const bracket of isRates) {\n        if (remainingIncome > 0) {\n          const taxableInBracket = Math.min(remainingIncome, bracket.threshold);\n          corporateTax += taxableInBracket * bracket.rate;\n          remainingIncome -= taxableInBracket;\n        }\n      }\n\n      taxResults = {\n        regime: \"IS\",\n        taxableIncome: netIncome,\n        corporateTax,\n        netAfterTax: netIncome - corporateTax,\n        dividendTax: associates.map((assoc) => {\n          const dividend = ((netIncome - corporateTax) * assoc.share) / 100;\n          const flatTax = dividend * 0.3; // Prlvement forfaitaire unique\n          return {\n            name: assoc.name,\n            dividend,\n            flatTax,\n            netDividend: dividend - flatTax,\n          };\n        }),\n      };\n    }\n\n    return taxResults;\n  }\n\n  /**\n   * Calculate capital gains tax for SCI\n   * @param {Object} params - Sale parameters\n   * @returns {Object} Capital gains calculation\n   */\n  static calculateCapitalGains(params) {\n    const {\n      purchasePrice,\n      salePrice,\n      purchaseDate,\n      saleDate,\n      improvementCosts,\n      acquisitionCosts,\n      ownershipYears,\n    } = params;\n\n    const grossGain = salePrice - purchasePrice;\n    const totalCosts = improvementCosts + acquisitionCosts;\n    const netGain = Math.max(0, grossGain - totalCosts);\n\n    // Abattement pour dure de dtention\n    let reductionRate = 0;\n    if (ownershipYears >= 6) {\n      reductionRate = Math.min((ownershipYears - 5) * 0.06, 0.36); // 6% per year after 5 years\n    }\n    if (ownershipYears >= 22) {\n      reductionRate = 0.36 + Math.min((ownershipYears - 21) * 0.04, 0.24); // Additional 4% per year\n    }\n\n    const reducedGain = netGain * (1 - reductionRate);\n    const socialTax = reducedGain * 0.172; // 17.2% social contributions\n    const incomeTax = reducedGain * 0.19; // 19% income tax\n\n    return {\n      grossGain,\n      netGain,\n      reductionRate: reductionRate * 100,\n      reducedGain,\n      socialTax,\n      incomeTax,\n      totalTax: socialTax + incomeTax,\n      netAfterTax: salePrice - totalCosts - socialTax - incomeTax,\n    };\n  }\n\n  /**\n   * Calculate financing capacity and leverage\n   * @param {Object} params - Financing parameters\n   * @returns {Object} Financing analysis\n   */\n  static calculateFinancing(params) {\n    const {\n      propertyPrice,\n      personalContribution,\n      rentalYield,\n      loanRate,\n      loanDuration,\n      vacancyRate,\n      managementFees,\n    } = params;\n\n    const loanAmount = propertyPrice - personalContribution;\n    const monthlyRate = loanRate / 12 / 100;\n    const numPayments = loanDuration * 12;\n\n    // Monthly payment calculation\n    const monthlyPayment =\n      (loanAmount * (monthlyRate * Math.pow(1 + monthlyRate, numPayments))) /\n      (Math.pow(1 + monthlyRate, numPayments) - 1);\n\n    const annualRentalIncome = propertyPrice * (rentalYield / 100);\n    const effectiveRentalIncome = annualRentalIncome * (1 - vacancyRate / 100);\n    const netRentalIncome = effectiveRentalIncome * (1 - managementFees / 100);\n\n    const annualPayment = monthlyPayment * 12;\n    const cashFlow = netRentalIncome - annualPayment;\n    const dscr = netRentalIncome / annualPayment;\n\n    return {\n      propertyPrice,\n      loanAmount,\n      personalContribution,\n      monthlyPayment,\n      annualPayment,\n      netRentalIncome,\n      cashFlow,\n      dscr,\n      leverageRatio: (loanAmount / propertyPrice) * 100,\n      roi: ((cashFlow / personalContribution) * 100).toFixed(2),\n    };\n  }\n\n  /**\n   * Calculate succession planning scenarios\n   * @param {Object} params - Succession parameters\n   * @returns {Object} Succession analysis\n   */\n  static calculateSuccession(params) {\n    const {\n      propertyValue,\n      shares,\n      donorAge,\n      doneeRelationship,\n      existingAllowance,\n      yearsBetweenDonations,\n    } = params;\n\n    // Abattement selon le lien de parent\n    const allowances = {\n      \"parent-child\": 100000,\n      \"grandparent-grandchild\": 31865,\n      siblings: 15932,\n      other: 1597,\n    };\n\n    const allowance = allowances[doneeRelationship] || allowances.other;\n    const remainingAllowance = Math.max(0, allowance - existingAllowance);\n\n    // Taux de taxation progressifs\n    const taxBrackets = [\n      { threshold: 0, rate: 0.05 },\n      { threshold: 8072, rate: 0.1 },\n      { threshold: 12109, rate: 0.15 },\n      { threshold: 15932, rate: 0.2 },\n      { threshold: 552324, rate: 0.3 },\n      { threshold: 902838, rate: 0.4 },\n      { threshold: 1805677, rate: 0.45 },\n    ];\n\n    const taxableValue = Math.max(0, propertyValue - remainingAllowance);\n    let taxAmount = 0;\n    let remainingValue = taxableValue;\n\n    for (const bracket of taxBrackets) {\n      if (remainingValue > 0) {\n        const taxableInBracket =\n          Math.min(\n            remainingValue,\n            taxBrackets[taxBrackets.indexOf(bracket) + 1]?.threshold ||\n              Infinity,\n          ) - bracket.threshold;\n        taxAmount += Math.max(0, taxableInBracket) * bracket.rate;\n        remainingValue -= taxableInBracket;\n      }\n    }\n\n    // Rduction selon l'ge du donateur\n    let ageReduction = 0;\n    if (donorAge >= 70 && donorAge < 80) ageReduction = 0.3;\n    else if (donorAge >= 80) ageReduction = 0.5;\n\n    const finalTax = taxAmount * (1 - ageReduction);\n\n    return {\n      propertyValue,\n      allowance: remainingAllowance,\n      taxableValue,\n      grossTax: taxAmount,\n      ageReduction: ageReduction * 100,\n      finalTax,\n      netValue: propertyValue - finalTax,\n      taxRate: (finalTax / propertyValue) * 100,\n    };\n  }\n\n  /**\n   * Calculate optimal SCI structure\n   * @param {Object} params - Structure parameters\n   * @returns {Object} Structure recommendations\n   */\n  static optimizeStructure(params) {\n    const {\n      propertyValue,\n      associates,\n      investmentHorizon,\n      rentalYield,\n      exitStrategy,\n    } = params;\n\n    const scenarios = {\n      ir: {\n        regime: \"IR\",\n        advantages: [\n          \"Transparence fiscale\",\n          \"Imposition au taux marginal des associs\",\n          \"Pas de double imposition\",\n          \"Dficits imputables sur revenus globaux\",\n        ],\n        disadvantages: [\n          \"Imposition immdiate des bnfices\",\n          \"Pas de report d'imposition\",\n          \"Limitation des charges dductibles\",\n        ],\n        estimatedTax: this.calculateSCITax({\n          regime: \"IR\",\n          rentalIncome: (propertyValue * rentalYield) / 100,\n          expenses: propertyValue * 0.2, // 20% charges\n          associates,\n        }).totalTax,\n      },\n      is: {\n        regime: \"IS\",\n        advantages: [\n          \"Taux d'imposition fixes\",\n          \"Report d'imposition possible\",\n          \"Dductibilit des intrts d'emprunt\",\n          \"Possibilit de rinvestir\",\n        ],\n        disadvantages: [\n          \"Double imposition (IS + flat tax)\",\n          \"Rgime fiscal plus complexe\",\n          \"Obligations comptables accrues\",\n        ],\n        estimatedTax: this.calculateSCITax({\n          regime: \"IS\",\n          rentalIncome: (propertyValue * rentalYield) / 100,\n          expenses: propertyValue * 0.2,\n          associates,\n        }).corporateTax,\n      },\n    };\n\n    return {\n      scenarios,\n      recommendation:\n        scenarios.ir.estimatedTax < scenarios.is.estimatedTax ? \"IR\" : \"IS\",\n      factors: {\n        investmentHorizon,\n        exitStrategy,\n        associateProfiles: associates.map((a) => a.marginalRate),\n      },\n    };\n  }\n}\n\nmodule.exports = SCICalculatorService;\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\src\\middleware\\authMiddleware-fixed.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'error' is defined but never used.",
        "line": 29,
        "column": 12,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 29,
        "endColumn": 17
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { NextFunction, Request, Response } from 'express';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET || 'testsecret';\r\n\r\ninterface JwtPayload {\r\n  _id: string;\r\n  email: string;\r\n  role?: string;\r\n}\r\n\r\nexport interface AuthRequest extends Request {\r\n  user?: JwtPayload;\r\n}\r\n\r\nexport const authenticateJWT = (req: AuthRequest, res: Response, next: NextFunction) => {\r\n  const authHeader = req.headers.authorization;\r\n\r\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n    return res.status(401).json({ message: 'No token provided' });\r\n  }\r\n\r\n  const token = authHeader.split(' ')[1];\r\n\r\n  try {\r\n    const decoded = jwt.verify(token, JWT_SECRET) as unknown as JwtPayload;\r\n    req.user = decoded;\r\n    next();\r\n  } catch (_error) {\r\n    return res.status(401).json({ message: 'Invalid token' });\r\n  }\r\n};\r\n\r\nexport const authorizeAdmin = (req: AuthRequest, res: Response, next: NextFunction) => {\r\n  if (req.user && req.user.role === 'admin') {\r\n    next();\r\n  } else {\r\n    return res.status(403).json({ message: 'Access denied. Admin role required.' });\r\n  }\r\n};\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\src\\middleware\\authMiddleware.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'err' is defined but never used.",
        "line": 28,
        "column": 12,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 28,
        "endColumn": 15
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { NextFunction, Request, Response } from 'express';\r\nimport jwt from 'jsonwebtoken';\r\n\r\nconst JWT_SECRET = process.env.JWT_SECRET || 'testsecret';\r\n\r\ninterface JwtPayload {\r\n  _id: string;\r\n  email: string;\r\n}\r\n\r\nexport interface AuthRequest extends Request {\r\n  user?: JwtPayload;\r\n}\r\n\r\nexport const authenticateJWT = (req: AuthRequest, res: Response, next: NextFunction) => {\r\n  const authHeader = req.headers.authorization;\r\n\r\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\r\n    return res.status(401).json({ message: 'No token provided' });\r\n  }\r\n\r\n  const token = authHeader.split(' ')[1];\r\n\r\n  try {\r\n    const decoded = jwt.verify(token, JWT_SECRET) as JwtPayload;\r\n    req.user = decoded;\r\n    next();\r\n  } catch (err) {\r\n    return res.status(401).json({ message: 'Invalid token' });\r\n  }\r\n};\r\n\r\nexport const authorizeAdmin = (req: AuthRequest, res: Response, next: NextFunction) => {\r\n  if (req.user && req.user.role === 'admin') {\r\n    next();\r\n  } else {\r\n    return res.status(403).json({ message: 'Access denied. Admin role required.' });\r\n  }\r\n};\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\src\\routes\\projects-minimal.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\src\\utils\\type-safety.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\test_config.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\test_factory.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\test_factory.mjs",
    "messages": [
      {
        "ruleId": "no-undef",
        "severity": 2,
        "message": "'console' is not defined.",
        "line": 12,
        "column": 1,
        "nodeType": "Identifier",
        "messageId": "undef",
        "endLine": 12,
        "endColumn": 8
      },
      {
        "ruleId": "no-undef",
        "severity": 2,
        "message": "'console' is not defined.",
        "line": 20,
        "column": 1,
        "nodeType": "Identifier",
        "messageId": "undef",
        "endLine": 20,
        "endColumn": 8
      },
      {
        "ruleId": "no-undef",
        "severity": 2,
        "message": "'console' is not defined.",
        "line": 35,
        "column": 1,
        "nodeType": "Identifier",
        "messageId": "undef",
        "endLine": 35,
        "endColumn": 8
      },
      {
        "ruleId": "no-undef",
        "severity": 2,
        "message": "'console' is not defined.",
        "line": 43,
        "column": 1,
        "nodeType": "Identifier",
        "messageId": "undef",
        "endLine": 43,
        "endColumn": 8
      },
      {
        "ruleId": "no-undef",
        "severity": 2,
        "message": "'console' is not defined.",
        "line": 50,
        "column": 1,
        "nodeType": "Identifier",
        "messageId": "undef",
        "endLine": 50,
        "endColumn": 8
      }
    ],
    "suppressedMessages": [],
    "errorCount": 5,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { Types } from \"mongoose\";\nimport {\n  createProjectData,\n  createMinimalProject,\n  createFundedProject,\n} from \"./factories/project.factory-new.js\";\n\n// Simple validation test\nconst tenantId = new Types.ObjectId();\nconst userId = new Types.ObjectId();\n\nconsole.log(\"Testing Project Factory...\");\n\n// Test createProjectData\nconst projectData = createProjectData({\n  tenant: tenantId,\n  createdBy: userId,\n});\n\nconsole.log(\" createProjectData works:\", {\n  name: projectData.name,\n  description: projectData.description.substring(0, 50) + \"...\",\n  type: projectData.type,\n  financials: {\n    totalInvestment: projectData.financials.totalInvestment,\n    targetAmount: projectData.financials.targetAmount,\n    currentAmount: projectData.financials.currentAmount,\n  },\n  tenant: projectData.tenant.toString(),\n  createdBy: projectData.createdBy.toString(),\n});\n\n// Test createMinimalProject\nconst minimalProject = createMinimalProject(tenantId, userId);\nconsole.log(\" createMinimalProject works:\", {\n  name: minimalProject.name,\n  type: minimalProject.type,\n  status: minimalProject.status,\n});\n\n// Test createFundedProject\nconst fundedProject = createFundedProject(tenantId, userId);\nconsole.log(\" createFundedProject works:\", {\n  name: fundedProject.name,\n  status: fundedProject.status,\n  currentAmount: fundedProject.financials.currentAmount,\n  targetAmount: fundedProject.financials.targetAmount,\n});\n\nconsole.log(\" All factory functions work correctly!\");\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\admin_critical.test.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 31
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 5,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 5,
        "endColumn": 32
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 6,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 6,
        "endColumn": 38
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 7,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 7,
        "endColumn": 44
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Expected 'multiple' syntax before 'single' syntax.",
        "line": 8,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "unexpectedSyntaxOrder",
        "endLine": 8,
        "endColumn": 80
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 34,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 34,
        "endColumn": 39
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 34,
        "column": 34,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 34,
        "endColumn": 39
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 54,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 54,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 54,
        "column": 32,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 54,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .logs on an `any` value.",
        "line": 149,
        "column": 37,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 149,
        "endColumn": 41
      }
    ],
    "suppressedMessages": [],
    "errorCount": 10,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { afterAll, beforeAll, beforeEach, describe, expect, it } from \"vitest\";\nimport request from \"supertest\";\nimport bcrypt from \"bcryptjs\";\nimport mongoose from \"mongoose\";\nimport app from \"../server.js\";\nimport User from \"../models/User.js\";\nimport Project from \"../models/Project.js\";\nimport { clearTestDB, seedAdminUser, setupTestDB } from \"./setup/env-setup.js\";\n\ndescribe(\"Admin Critical Endpoints\", () => {\n  let adminToken: string;\n  let userToken: string;\n\n  beforeAll(async () => {\n    await setupTestDB();\n    await seedAdminUser();\n  });\n\n  afterAll(async () => {\n    await mongoose.connection.close();\n  });\n\n  beforeEach(async () => {\n    await clearTestDB();\n\n    // Seed admin user again after clearing DB\n    await seedAdminUser();\n\n    const adminLogin = await request(app)\n      .post(\"/api/auth/login\")\n      .send({ email: \"admin@test.com\", password: \"AdminPass123!\" });\n\n    console.log(\"Admin login response:\", adminLogin.status, adminLogin.body);\n    adminToken = adminLogin.body.token;\n\n    const userPassword = await bcrypt.hash(\"UserPass123!\", 10);\n    const user = new User({\n      email: \"user@test.com\",\n      password: userPassword,\n      role: \"investor\",\n      username: \"user\",\n      profile: {\n        firstName: \"Regular\",\n        lastName: \"User\",\n      },\n    });\n    await user.save();\n\n    const userLogin = await request(app)\n      .post(\"/api/auth/login\")\n      .send({ email: \"user@test.com\", password: \"UserPass123!\" });\n\n    console.log(\"User login response:\", userLogin.status, userLogin.body);\n    userToken = userLogin.body.token;\n  });\n\n  describe(\"GET /api/admin/stats\", () => {\n    it(\"should return comprehensive admin stats\", async () => {\n      const project = new Project({\n        name: \"Test Project 1\",\n        status: \"active\",\n        description: \"Test project 1\",\n        type: \"residential\",\n        createdBy: \"507f1f77bcf86cd799439011\",\n        tenant: \"507f1f77bcf86cd799439012\",\n        timeline: {\n          startDate: new Date(\"2024-01-01\"),\n          endDate: new Date(\"2024-12-31\"),\n        },\n        financials: {\n          totalInvestment: 100000,\n          targetAmount: 500000,\n          expectedReturn: 15,\n          duration: 12,\n          entryTicket: 1000,\n        },\n      });\n      await project.save();\n\n      const res = await request(app)\n        .get(\"/api/admin/stats\")\n        .set(\"Authorization\", `Bearer ${adminToken}`);\n\n      console.log(\"Admin stats response:\", res.status, res.body);\n      expect(res.status).toBe(200);\n      expect(res.body).toHaveProperty(\"users\");\n      expect(res.body).toHaveProperty(\"projects\");\n      expect(res.body).toHaveProperty(\"kyc\");\n    });\n\n    it(\"should reject non-admin users\", async () => {\n      const res = await request(app)\n        .get(\"/api/admin/stats\")\n        .set(\"Authorization\", `Bearer ${userToken}`);\n\n      console.log(\"Non-admin access response:\", res.status, res.body);\n      expect(res.status).toBe(403);\n    });\n\n    it(\"should reject unauthenticated requests\", async () => {\n      const res = await request(app).get(\"/api/admin/stats\");\n\n      console.log(\"Unauthenticated access response:\", res.status, res.body);\n      expect(res.status).toBe(401);\n    });\n  });\n\n  describe(\"GET /api/admin/users\", () => {\n    it(\"should return user list for admin\", async () => {\n      const user2 = new User({\n        email: \"user2@test.com\",\n        password: await bcrypt.hash(\"UserPass123!\", 10),\n        role: \"investor\",\n        username: \"user2\",\n        profile: {\n          firstName: \"Test\",\n          lastName: \"User2\",\n        },\n      });\n      await user2.save();\n\n      const res = await request(app)\n        .get(\"/api/admin/users\")\n        .set(\"Authorization\", `Bearer ${adminToken}`);\n\n      console.log(\"Admin users response:\", res.status, res.body);\n      expect(res.status).toBe(200);\n      expect(res.body).toHaveProperty(\"length\");\n    });\n\n    it(\"should reject non-admin users\", async () => {\n      const res = await request(app)\n        .get(\"/api/admin/users\")\n        .set(\"Authorization\", `Bearer ${userToken}`);\n\n      console.log(\"Non-admin users response:\", res.status, res.body);\n      expect(res.status).toBe(403);\n    });\n  });\n\n  describe(\"GET /api/admin/logs\", () => {\n    it(\"should return system logs for admin\", async () => {\n      const res = await request(app)\n        .get(\"/api/admin/logs\")\n        .set(\"Authorization\", `Bearer ${adminToken}`);\n\n      console.log(\"Admin logs response:\", res.status, res.body);\n      expect(res.status).toBe(200);\n      expect(Array.isArray(res.body.logs)).toBe(true);\n    });\n\n    it(\"should reject non-admin users\", async () => {\n      const res = await request(app)\n        .get(\"/api/admin/logs\")\n        .set(\"Authorization\", `Bearer ${userToken}`);\n\n      console.log(\"Non-admin logs response:\", res.status, res.body);\n      expect(res.status).toBe(403);\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\admin_integration.test.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'afterAll' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 1,
        "column": 10,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 1,
        "endColumn": 18
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 32
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 38
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'User' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 4,
        "column": 8,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 4,
        "endColumn": 12
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 5,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 5,
        "endColumn": 44
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'Project' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 5,
        "column": 8,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 5,
        "endColumn": 15
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Expected 'multiple' syntax before 'single' syntax.",
        "line": 6,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "unexpectedSyntaxOrder",
        "endLine": 6,
        "endColumn": 80
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'createTestProject' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 7,
        "column": 10,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 7,
        "endColumn": 27
      },
      {
        "ruleId": "@typescript-eslint/await-thenable",
        "severity": 2,
        "message": "Unexpected `await` of a non-Promise (non-\"Thenable\") value.",
        "line": 17,
        "column": 17,
        "nodeType": "AwaitExpression",
        "messageId": "await",
        "endLine": 17,
        "endColumn": 40,
        "suggestions": [
          {
            "messageId": "removeAwait",
            "fix": { "range": [578, 583], "text": "" },
            "desc": "Remove unnecessary `await`."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/await-thenable",
        "severity": 2,
        "message": "Unexpected `await` of a non-Promise (non-\"Thenable\") value.",
        "line": 18,
        "column": 19,
        "nodeType": "AwaitExpression",
        "messageId": "await",
        "endLine": 18,
        "endColumn": 41,
        "suggestions": [
          {
            "messageId": "removeAwait",
            "fix": { "range": [621, 626], "text": "" },
            "desc": "Remove unnecessary `await`."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 23,
        "column": 15,
        "nodeType": "Property",
        "messageId": "anyAssignment",
        "endLine": 23,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .email on an `any` value.",
        "line": 23,
        "column": 32,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 23,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 25,
        "column": 26,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 25,
        "endColumn": 30
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 25,
        "column": 51,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 25,
        "endColumn": 55
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 29,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 29,
        "endColumn": 44
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 29,
        "column": 34,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 29,
        "endColumn": 38
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 33,
        "column": 15,
        "nodeType": "Property",
        "messageId": "anyAssignment",
        "endLine": 33,
        "endColumn": 39
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .email on an `any` value.",
        "line": 33,
        "column": 34,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 33,
        "endColumn": 39
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 35,
        "column": 25,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 35,
        "endColumn": 29
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 35,
        "column": 49,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 35,
        "endColumn": 53
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 39,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 39,
        "endColumn": 42
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 39,
        "column": 32,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 39,
        "endColumn": 36
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 50,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 50,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 51,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 51,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 52,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 52,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 78,
        "column": 42,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 78,
        "endColumn": 46
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 90,
        "column": 42,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 90,
        "endColumn": 46
      }
    ],
    "suppressedMessages": [],
    "errorCount": 27,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { afterAll, beforeAll, describe, expect, it } from \"vitest\";\nimport request from \"supertest\";\nimport app from \"../server.js\";\nimport User from \"../models/User.js\";\nimport Project from \"../models/Project.js\";\nimport { createTestAdmin, createTestUser } from \"../factories/user.factory.js\";\nimport { createTestProject } from \"../factories/project.factory.js\";\n\ndescribe(\"Admin API Integration Tests\", () => {\n  let adminToken: string;\n  let userToken: string;\n  let adminUser: any;\n  let regularUser: any;\n\n  beforeAll(async () => {\n    // Create test users\n    adminUser = await createTestAdmin();\n    regularUser = await createTestUser();\n\n    // Get tokens\n    const adminLogin = await request(app)\n      .post(\"/api/auth/login\")\n      .send({ email: adminUser.email, password: \"Test123456\" });\n\n    if (!adminLogin.body.data || !adminLogin.body.data.token) {\n      console.error(\"Admin login failed:\", adminLogin.body);\n      throw new Error(`Admin login failed: ${JSON.stringify(adminLogin.body)}`);\n    }\n    adminToken = adminLogin.body.data.token;\n\n    const userLogin = await request(app)\n      .post(\"/api/auth/login\")\n      .send({ email: regularUser.email, password: \"Test123456\" });\n\n    if (!userLogin.body.data || !userLogin.body.data.token) {\n      console.error(\"User login failed:\", userLogin.body);\n      throw new Error(`User login failed: ${JSON.stringify(userLogin.body)}`);\n    }\n    userToken = userLogin.body.data.token;\n  });\n\n  describe(\"GET /api/admin/stats\", () => {\n    it(\"should return admin stats for authorized admin\", async () => {\n      const response = await request(app)\n        .get(\"/api/admin/stats\")\n        .set(\"Authorization\", `Bearer ${adminToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body).toHaveProperty(\"data\");\n      expect(response.body.data).toHaveProperty(\"totalUsers\");\n      expect(response.body.data).toHaveProperty(\"totalProjects\");\n      expect(response.body.data).toHaveProperty(\"totalDonations\");\n    });\n\n    it(\"should return 403 for non-admin users\", async () => {\n      const response = await request(app)\n        .get(\"/api/admin/stats\")\n        .set(\"Authorization\", `Bearer ${userToken}`);\n\n      expect(response.status).toBe(403);\n    });\n\n    it(\"should return 401 for unauthenticated requests\", async () => {\n      const response = await request(app).get(\"/api/admin/stats\");\n\n      expect(response.status).toBe(401);\n    });\n  });\n\n  describe(\"GET /api/admin/logs\", () => {\n    it(\"should return system logs for admin\", async () => {\n      const response = await request(app)\n        .get(\"/api/admin/logs\")\n        .set(\"Authorization\", `Bearer ${adminToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body).toHaveProperty(\"data\");\n      expect(Array.isArray(response.body.data)).toBe(true);\n    });\n  });\n\n  describe(\"GET /api/admin/users\", () => {\n    it(\"should return all users for admin\", async () => {\n      const response = await request(app)\n        .get(\"/api/admin/users\")\n        .set(\"Authorization\", `Bearer ${adminToken}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body).toHaveProperty(\"data\");\n      expect(Array.isArray(response.body.data)).toBe(true);\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\admin_test.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 32
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 38
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 5,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 5,
        "endColumn": 44
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 40,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 40,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 40,
        "column": 32,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 40,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 45,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 45,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 45,
        "column": 30,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 45,
        "endColumn": 35
      }
    ],
    "suppressedMessages": [],
    "errorCount": 7,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { afterEach, beforeEach, describe, expect, it } from \"vitest\";\nimport request from \"supertest\";\nimport app from \"../server.js\";\nimport User from \"../models/User.js\";\nimport Project from \"../models/Project.js\";\n\ndescribe(\"Admin Routes\", () => {\n  let adminToken: string;\n  let userToken: string;\n\n  beforeEach(async () => {\n    // Create test admin\n    const admin = new User({\n      email: \"admin@test.com\",\n      password: \"admin123\",\n      role: \"admin\",\n      profile: {\n        firstName: \"Admin\",\n        lastName: \"User\",\n      },\n    });\n    await admin.save();\n\n    // Create test user\n    const user = new User({\n      email: \"user@test.com\",\n      password: \"user123\",\n      role: \"investor\",\n      profile: {\n        firstName: \"Test\",\n        lastName: \"User\",\n      },\n    });\n    await user.save();\n\n    // Get tokens\n    const adminRes = await request(app)\n      .post(\"/api/auth/login\")\n      .send({ email: \"admin@test.com\", password: \"admin123\" });\n    adminToken = adminRes.body.token;\n\n    const userRes = await request(app)\n      .post(\"/api/auth/login\")\n      .send({ email: \"user@test.com\", password: \"user123\" });\n    userToken = userRes.body.token;\n  });\n\n  afterEach(async () => {\n    await User.deleteMany({});\n    await Project.deleteMany({});\n  });\n\n  describe(\"GET /api/admin/stats\", () => {\n    it(\"should return admin stats for admin users\", async () => {\n      const res = await request(app)\n        .get(\"/api/admin/stats\")\n        .set(\"Authorization\", `Bearer ${adminToken}`);\n\n      expect(res.status).toBe(200);\n      expect(res.body).toHaveProperty(\"totalUsers\");\n      expect(res.body).toHaveProperty(\"totalProjects\");\n      expect(res.body).toHaveProperty(\"totalDonations\");\n    });\n\n    it(\"should return 403 for non-admin users\", async () => {\n      const res = await request(app)\n        .get(\"/api/admin/stats\")\n        .set(\"Authorization\", `Bearer ${userToken}`);\n\n      expect(res.status).toBe(403);\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\auth.test.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .user on an `any` value.",
        "line": 22,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 22,
        "endColumn": 27
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .user on an `any` value.",
        "line": 23,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 23,
        "endColumn": 27
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .user on an `any` value.",
        "line": 87,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 87,
        "endColumn": 27
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'userId' is assigned a value but never used. Allowed unused vars must match /^_/u.",
        "line": 112,
        "column": 9,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 112,
        "endColumn": 15
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an error typed value.",
        "line": 122,
        "column": 7,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 122,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-call",
        "severity": 2,
        "message": "Unsafe call of a(n) `error` type typed value.",
        "line": 122,
        "column": 16,
        "nodeType": "MemberExpression",
        "messageId": "unsafeCall",
        "endLine": 122,
        "endColumn": 33
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 128,
        "column": 7,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 128,
        "endColumn": 34
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 128,
        "column": 29,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 128,
        "endColumn": 34
      }
    ],
    "suppressedMessages": [],
    "errorCount": 9,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { beforeEach, describe, expect, it } from 'vitest';\r\nimport bcrypt from 'bcryptjs';\r\nimport { request } from './setup';\r\nimport User from '../models/User';\r\n\r\ndescribe('Authentication Endpoints', () => {\r\n  beforeEach(async () => {\r\n    await User.deleteMany({});\r\n  });\r\n\r\n  describe('POST /api/auth/register', () => {\r\n    it('should register a new user with valid data', async () => {\r\n      const res = await request.post('/api/auth/register').send({\r\n        email: 'test@example.com',\r\n        password: 'password123',\r\n        firstName: 'John',\r\n        lastName: 'Doe'\r\n      });\r\n\r\n      expect(res.status).toBe(201);\r\n      expect(res.body).toHaveProperty('token');\r\n      expect(res.body.user).toHaveProperty('email', 'test@example.com');\r\n      expect(res.body.user).not.toHaveProperty('password');\r\n    });\r\n\r\n    it('should not register user with existing email', async () => {\r\n      await User.create({\r\n        email: 'existing@example.com',\r\n        password: 'hashedpassword',\r\n        firstName: 'Existing',\r\n        lastName: 'User'\r\n      });\r\n\r\n      const res = await request.post('/api/auth/register').send({\r\n        email: 'existing@example.com',\r\n        password: 'password123',\r\n        firstName: 'John',\r\n        lastName: 'Doe'\r\n      });\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n    });\r\n\r\n    it('should not register user with invalid email', async () => {\r\n      const res = await request.post('/api/auth/register').send({\r\n        email: 'invalid-email',\r\n        password: 'password123',\r\n        firstName: 'John',\r\n        lastName: 'Doe'\r\n      });\r\n\r\n      expect(res.status).toBe(400);\r\n    });\r\n\r\n    it('should not register user with short password', async () => {\r\n      const res = await request.post('/api/auth/register').send({\r\n        email: 'shortpass@example.com',\r\n        password: '123',\r\n        firstName: 'John',\r\n        lastName: 'Doe'\r\n      });\r\n\r\n      expect(res.status).toBe(400);\r\n    });\r\n  });\r\n\r\n  describe('POST /api/auth/login', () => {\r\n    beforeEach(async () => {\r\n      const hashedPassword = await bcrypt.hash('password123', 10);\r\n      await User.create({\r\n        email: 'login@example.com',\r\n        password: hashedPassword,\r\n        firstName: 'Login',\r\n        lastName: 'User'\r\n      });\r\n    });\r\n\r\n    it('should login with valid credentials', async () => {\r\n      const res = await request.post('/api/auth/login').send({\r\n        email: 'login@example.com',\r\n        password: 'password123'\r\n      });\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveProperty('token');\r\n      expect(res.body.user).toHaveProperty('email', 'login@example.com');\r\n    });\r\n\r\n    it('should not login with invalid password', async () => {\r\n      const res = await request.post('/api/auth/login').send({\r\n        email: 'login@example.com',\r\n        password: 'wrongpassword'\r\n      });\r\n\r\n      expect(res.status).toBe(401);\r\n      expect(res.body).toHaveProperty('error');\r\n    });\r\n\r\n    it('should not login with non-existent email', async () => {\r\n      const res = await request.post('/api/auth/login').send({\r\n        email: 'nonexistent@example.com',\r\n        password: 'password123'\r\n      });\r\n\r\n      expect(res.status).toBe(401);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/auth/me', () => {\r\n    let token: string;\r\n    let userId: string;\r\n\r\n    beforeEach(async () => {\r\n      const hashedPassword = await bcrypt.hash('password123', 10);\r\n      const user = await User.create({\r\n        email: 'me@example.com',\r\n        password: hashedPassword,\r\n        firstName: 'Me',\r\n        lastName: 'User'\r\n      });\r\n      userId = user._id.toString();\r\n\r\n      const loginRes = await request.post('/api/auth/login').send({\r\n        email: 'me@example.com',\r\n        password: 'password123'\r\n      });\r\n      token = loginRes.body.token;\r\n    });\r\n\r\n    it('should get current user with valid token', async () => {\r\n      const res = await request\r\n        .get('/api/auth/me')\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveProperty('email', 'me@example.com');\r\n      expect(res.body).not.toHaveProperty('password');\r\n    });\r\n\r\n    it('should not get current user without token', async () => {\r\n      const res = await request.get('/api/auth/me');\r\n\r\n      expect(res.status).toBe(401);\r\n    });\r\n\r\n    it('should not get current user with invalid token', async () => {\r\n      const res = await request\r\n        .get('/api/auth/me')\r\n        .set('Authorization', 'Bearer invalidtoken');\r\n\r\n      expect(res.status).toBe(401);\r\n    });\r\n  });\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\auth_test.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'mongoose' is defined but never used.",
        "line": 3,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 3,
        "endColumn": 16,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "mongoose" },
            "fix": { "range": [120, 134], "text": "" },
            "desc": "Remove unused variable 'mongoose'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'testUser' is assigned a value but never used.",
        "line": 11,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 11,
        "endColumn": 15
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, it, expect, beforeAll, afterAll, beforeEach } from \"vitest\";\nimport request from \"supertest\";\nimport mongoose from \"mongoose\";\nimport jwt from \"jsonwebtoken\";\nimport bcrypt from \"bcryptjs\";\nimport app from \"../server.js\";\nimport User from \"../models/User.js\";\n\ndescribe(\"Authentication Endpoints\", () => {\n  let authToken;\n  let testUser;\n\n  beforeAll(async () => {\n    // Connection is handled by vitest setup file\n    // Skip explicit connection setup\n  });\n\n  afterAll(async () => {\n    // Disconnection is handled by vitest setup file\n    // Skip explicit disconnection\n  });\n\n  beforeEach(async () => {\n    // Clean up database before each test\n    await User.deleteMany({});\n    authToken = null;\n    testUser = null;\n  });\n\n  describe(\"POST /api/auth/register\", () => {\n    it(\"should register a new user successfully\", async () => {\n      const userData = {\n        email: \"test@example.com\",\n        password: \"Test123456!\",\n        firstName: \"John\",\n        lastName: \"Doe\",\n        role: \"investor\",\n      };\n\n      const response = await request(app)\n        .post(\"/api/auth/register\")\n        .send(userData)\n        .expect(201);\n\n      expect(response.body).toHaveProperty(\"token\");\n      expect(response.body.user).toHaveProperty(\"email\", userData.email);\n      expect(response.body.user).toHaveProperty(\"role\", userData.role);\n      expect(response.body.user).not.toHaveProperty(\"password\");\n    });\n\n    it(\"should not register user with invalid email\", async () => {\n      const userData = {\n        email: \"invalid-email\",\n        password: \"Test123456!\",\n        firstName: \"John\",\n        lastName: \"Doe\",\n      };\n\n      const response = await request(app)\n        .post(\"/api/auth/register\")\n        .send(userData)\n        .expect(400);\n\n      expect(response.body).toHaveProperty(\"errors\");\n    });\n\n    it(\"should not register user with duplicate email\", async () => {\n      const userData = {\n        email: \"duplicate@example.com\",\n        password: \"Test123456!\",\n        firstName: \"John\",\n        lastName: \"Doe\",\n      };\n\n      // Create first user\n      await request(app).post(\"/api/auth/register\").send(userData).expect(201);\n\n      // Try to create duplicate\n      const response = await request(app)\n        .post(\"/api/auth/register\")\n        .send(userData)\n        .expect(400);\n\n      expect(response.body).toHaveProperty(\"message\");\n      expect(response.body.message).toContain(\"already exists\");\n    });\n\n    it(\"should not register user with weak password\", async () => {\n      const userData = {\n        email: \"weakpass@example.com\",\n        password: \"123\",\n        firstName: \"John\",\n        lastName: \"Doe\",\n      };\n\n      const response = await request(app)\n        .post(\"/api/auth/register\")\n        .send(userData)\n        .expect(400);\n\n      expect(response.body).toHaveProperty(\"errors\");\n    });\n  });\n\n  describe(\"POST /api/auth/login\", () => {\n    beforeEach(async () => {\n      // Create a test user for login tests\n      const hashedPassword = await bcrypt.hash(\"Test123456!\", 10);\n      testUser = await User.create({\n        email: \"login@example.com\",\n        password: hashedPassword,\n        firstName: \"Test\",\n        lastName: \"User\",\n        role: \"investor\",\n      });\n    });\n\n    it(\"should login with valid credentials\", async () => {\n      const response = await request(app)\n        .post(\"/api/auth/login\")\n        .send({\n          email: \"login@example.com\",\n          password: \"Test123456!\",\n        })\n        .expect(200);\n\n      expect(response.body).toHaveProperty(\"token\");\n      expect(response.body.user).toHaveProperty(\"email\", \"login@example.com\");\n      expect(response.body.user).toHaveProperty(\"role\", \"investor\");\n      expect(response.body.user).not.toHaveProperty(\"password\");\n\n      authToken = response.body.token;\n    });\n\n    it(\"should not login with invalid credentials\", async () => {\n      const response = await request(app)\n        .post(\"/api/auth/login\")\n        .send({\n          email: \"login@example.com\",\n          password: \"wrongpassword\",\n        })\n        .expect(401);\n\n      expect(response.body).toHaveProperty(\"message\", \"Invalid credentials\");\n    });\n\n    it(\"should not login with non-existent user\", async () => {\n      const response = await request(app)\n        .post(\"/api/auth/login\")\n        .send({\n          email: \"nonexistent@example.com\",\n          password: \"Test123456!\",\n        })\n        .expect(401);\n\n      expect(response.body).toHaveProperty(\"message\", \"Invalid credentials\");\n    });\n\n    it(\"should not login with missing fields\", async () => {\n      const response = await request(app)\n        .post(\"/api/auth/login\")\n        .send({\n          email: \"login@example.com\",\n          // Missing password\n        })\n        .expect(400);\n\n      expect(response.body).toHaveProperty(\"errors\");\n    });\n  });\n\n  describe(\"GET /api/auth/me\", () => {\n    beforeEach(async () => {\n      // Create and login a test user\n      const hashedPassword = await bcrypt.hash(\"Test123456!\", 10);\n      testUser = await User.create({\n        email: \"me@example.com\",\n        password: hashedPassword,\n        firstName: \"Me\",\n        lastName: \"Test\",\n        role: \"investor\",\n      });\n\n      const response = await request(app).post(\"/api/auth/login\").send({\n        email: \"me@example.com\",\n        password: \"Test123456!\",\n      });\n\n      authToken = response.body.token;\n    });\n\n    it(\"should get current user profile with valid token\", async () => {\n      const response = await request(app)\n        .get(\"/api/auth/me\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .expect(200);\n\n      expect(response.body).toHaveProperty(\"email\", \"me@example.com\");\n      expect(response.body).toHaveProperty(\"role\", \"investor\");\n      expect(response.body).not.toHaveProperty(\"password\");\n    });\n\n    it(\"should not get profile without token\", async () => {\n      const response = await request(app).get(\"/api/auth/me\").expect(401);\n\n      expect(response.body).toHaveProperty(\"message\", \"No token provided\");\n    });\n\n    it(\"should not get profile with invalid token\", async () => {\n      const response = await request(app)\n        .get(\"/api/auth/me\")\n        .set(\"Authorization\", \"Bearer invalidtoken\")\n        .expect(401);\n\n      expect(response.body).toHaveProperty(\"message\", \"Invalid token\");\n    });\n  });\n\n  describe(\"PUT /api/auth/profile\", () => {\n    beforeEach(async () => {\n      // Create and login a test user\n      const hashedPassword = await bcrypt.hash(\"Test123456!\", 10);\n      testUser = await User.create({\n        email: \"profile@example.com\",\n        password: hashedPassword,\n        firstName: \"Profile\",\n        lastName: \"Test\",\n        role: \"investor\",\n      });\n\n      const response = await request(app).post(\"/api/auth/login\").send({\n        email: \"profile@example.com\",\n        password: \"Test123456!\",\n      });\n\n      authToken = response.body.token;\n    });\n\n    it(\"should update user profile with valid token\", async () => {\n      const updateData = {\n        firstName: \"Updated\",\n        lastName: \"Name\",\n        phone: \"+1234567890\",\n      };\n\n      const response = await request(app)\n        .put(\"/api/auth/profile\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .send(updateData)\n        .expect(200);\n\n      expect(response.body).toHaveProperty(\"firstName\", \"Updated\");\n      expect(response.body).toHaveProperty(\"lastName\", \"Name\");\n      expect(response.body).toHaveProperty(\"phone\", \"+1234567890\");\n    });\n\n    it(\"should not update profile without token\", async () => {\n      const response = await request(app)\n        .put(\"/api/auth/profile\")\n        .send({ firstName: \"Updated\" })\n        .expect(401);\n\n      expect(response.body).toHaveProperty(\"message\", \"No token provided\");\n    });\n\n    it(\"should not update email through profile update\", async () => {\n      const response = await request(app)\n        .put(\"/api/auth/profile\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .send({ email: \"newemail@example.com\" })\n        .expect(200);\n\n      // Email should remain unchanged\n      expect(response.body).toHaveProperty(\"email\", \"profile@example.com\");\n    });\n  });\n\n  describe(\"POST /api/auth/logout\", () => {\n    beforeEach(async () => {\n      // Create and login a test user\n      const hashedPassword = await bcrypt.hash(\"Test123456!\", 10);\n      testUser = await User.create({\n        email: \"logout@example.com\",\n        password: hashedPassword,\n        firstName: \"Logout\",\n        lastName: \"Test\",\n        role: \"investor\",\n      });\n\n      const response = await request(app).post(\"/api/auth/login\").send({\n        email: \"logout@example.com\",\n        password: \"Test123456!\",\n      });\n\n      authToken = response.body.token;\n    });\n\n    it(\"should logout user with valid token\", async () => {\n      const response = await request(app)\n        .post(\"/api/auth/logout\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .expect(200);\n\n      expect(response.body).toHaveProperty(\n        \"message\",\n        \"Logged out successfully\",\n      );\n    });\n\n    it(\"should handle logout without token\", async () => {\n      const response = await request(app).post(\"/api/auth/logout\").expect(401);\n\n      expect(response.body).toHaveProperty(\"message\", \"No token provided\");\n    });\n  });\n\n  describe(\"Protected Routes\", () => {\n    beforeEach(async () => {\n      // Create users with different roles\n      const hashedPassword = await bcrypt.hash(\"Test123456!\", 10);\n\n      // Regular user\n      await User.create({\n        email: \"user@example.com\",\n        password: hashedPassword,\n        firstName: \"Regular\",\n        lastName: \"User\",\n        role: \"investor\",\n      });\n\n      // Admin user\n      await User.create({\n        email: \"admin@example.com\",\n        password: hashedPassword,\n        firstName: \"Admin\",\n        lastName: \"User\",\n        role: \"admin\",\n      });\n    });\n\n    it(\"should allow access to user routes with valid user token\", async () => {\n      const loginResponse = await request(app).post(\"/api/auth/login\").send({\n        email: \"user@example.com\",\n        password: \"Test123456!\",\n      });\n\n      const userToken = loginResponse.body.token;\n\n      // Test accessing a protected user route\n      const response = await request(app)\n        .get(\"/api/auth/me\")\n        .set(\"Authorization\", `Bearer ${userToken}`)\n        .expect(200);\n\n      expect(response.body).toHaveProperty(\"role\", \"investor\");\n    });\n\n    it(\"should allow access to admin routes with admin token\", async () => {\n      const loginResponse = await request(app).post(\"/api/auth/login\").send({\n        email: \"admin@example.com\",\n        password: \"Test123456!\",\n      });\n\n      const adminToken = loginResponse.body.token;\n\n      // Test accessing an admin route (assuming /api/admin/users exists)\n      const response = await request(app)\n        .get(\"/api/admin/users\")\n        .set(\"Authorization\", `Bearer ${adminToken}`)\n        .expect(200);\n\n      expect(Array.isArray(response.body)).toBe(true);\n    });\n\n    it(\"should deny access to admin routes with regular user token\", async () => {\n      const loginResponse = await request(app).post(\"/api/auth/login\").send({\n        email: \"user@example.com\",\n        password: \"Test123456!\",\n      });\n\n      const userToken = loginResponse.body.token;\n\n      // Try to access admin route with user token\n      const response = await request(app)\n        .get(\"/api/admin/users\")\n        .set(\"Authorization\", `Bearer ${userToken}`)\n        .expect(403);\n\n      expect(response.body).toHaveProperty(\"message\", \"Access denied\");\n    });\n\n    it(\"should deny access to protected routes with expired token\", async () => {\n      // Create an expired token\n      const expiredToken = jwt.sign(\n        { userId: \"testuser\" },\n        process.env.JWT_SECRET || \"test-secret\",\n        { expiresIn: \"-1h\" },\n      );\n\n      const response = await request(app)\n        .get(\"/api/auth/me\")\n        .set(\"Authorization\", `Bearer ${expiredToken}`)\n        .expect(401);\n\n      expect(response.body).toHaveProperty(\"message\", \"Invalid token\");\n    });\n\n    it(\"should deny access with malformed token\", async () => {\n      const response = await request(app)\n        .get(\"/api/auth/me\")\n        .set(\"Authorization\", \"Bearer malformed.token.here\")\n        .expect(401);\n\n      expect(response.body).toHaveProperty(\"message\", \"Invalid token\");\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\examples\\mongoose-complete-example.test.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 2,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 2,
        "endColumn": 59
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 6,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 6,
        "endColumn": 50
      },
      {
        "ruleId": "@typescript-eslint/no-base-to-string",
        "severity": 2,
        "message": "'testUser._id' will use Object's default stringification format ('[object Object]') when stringified.",
        "line": 40,
        "column": 12,
        "nodeType": "MemberExpression",
        "messageId": "baseToString",
        "endLine": 40,
        "endColumn": 24
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'getTestUserIdSafe' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 44,
        "column": 12,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 44,
        "endColumn": 29
      },
      {
        "ruleId": "@typescript-eslint/no-base-to-string",
        "severity": 2,
        "message": "'testUser._id' will use Object's default stringification format ('[object Object]') when stringified.",
        "line": 48,
        "column": 12,
        "nodeType": "MemberExpression",
        "messageId": "baseToString",
        "endLine": 48,
        "endColumn": 24
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'project' is assigned a value but never used. Allowed unused vars must match /^_/u.",
        "line": 292,
        "column": 13,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 292,
        "endColumn": 20
      }
    ],
    "suppressedMessages": [],
    "errorCount": 6,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import mongoose, { Types } from 'mongoose';\r\nimport { beforeEach, describe, expect, it } from 'vitest';\r\n\r\nimport Project from '../../models/Project';\r\nimport User from '../../models/User';\r\nimport type { IUser } from '../../models/User.d';\r\n\r\ndescribe('Mongoose Complete Example', () => {\r\n  let testUser: IUser;\r\n\r\n  beforeEach(async () => {\r\n    testUser = await User.create({\r\n      email: 'test@example.com',\r\n      password: 'hashedpassword123',\r\n      profile: {\r\n        firstName: 'Test',\r\n        lastName: 'User',\r\n        kycStatus: 'pending',\r\n        kycDocuments: []\r\n      },\r\n      role: 'investor',\r\n      investments: [],\r\n      preferences: {\r\n        riskTolerance: 'medium',\r\n        investmentHorizon: 'medium',\r\n        notifications: {\r\n          email: true,\r\n          sms: false,\r\n          push: true\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  // Helper function to safely get testUser._id as string\r\n  function getTestUserId(): string {\r\n    if (!testUser || !testUser._id) {\r\n      throw new Error('testUser or testUser._id is undefined');\r\n    }\r\n    return testUser._id.toString();\r\n  }\r\n\r\n  // Explicitly handle ObjectId stringification to prevent ESLint warnings\r\n  function getTestUserIdSafe(): string {\r\n    if (!testUser || !testUser._id) {\r\n      throw new Error('testUser or testUser._id is undefined');\r\n    }\r\n    return testUser._id.toString();\r\n  }\r\n\r\n  describe('User Model Tests', () => {\r\n    it('should create a user with required fields', async () => {\r\n      const user = await User.create({\r\n        email: 'newuser@test.com',\r\n        password: 'securepassword123',\r\n        profile: {\r\n          firstName: 'John',\r\n          lastName: 'Doe',\r\n          kycStatus: 'pending',\r\n          kycDocuments: []\r\n        },\r\n        role: 'investor',\r\n        investments: [],\r\n        preferences: {\r\n          riskTolerance: 'medium',\r\n          investmentHorizon: 'medium',\r\n          notifications: {\r\n            email: true,\r\n            sms: false,\r\n            push: true\r\n          }\r\n        }\r\n      });\r\n\r\n      expect(user._id).toBeDefined();\r\n      expect(user.email).toBe('newuser@test.com');\r\n      expect(user.profile.firstName).toBe('John');\r\n      expect(user.createdAt).toBeDefined();\r\n    });\r\n\r\n    it('should enforce email uniqueness', async () => {\r\n      await expect(\r\n        User.create({\r\n          email: 'test@example.com',\r\n          password: 'anotherpassword',\r\n          profile: {\r\n            firstName: 'Another',\r\n            lastName: 'User',\r\n            kycStatus: 'pending',\r\n            kycDocuments: []\r\n          },\r\n          role: 'investor',\r\n          investments: [],\r\n          preferences: {\r\n            riskTolerance: 'medium',\r\n            investmentHorizon: 'medium',\r\n            notifications: {\r\n              email: true,\r\n              sms: false,\r\n              push: true\r\n            }\r\n          }\r\n        })\r\n      ).rejects.toThrow();\r\n    });\r\n\r\n    it('should find user by email', async () => {\r\n      const foundUser = await User.findOne({ email: 'test@example.com' });\r\n      expect(foundUser).toBeDefined();\r\n      expect(foundUser?.profile.firstName).toBe('Test');\r\n    });\r\n  });\r\n\r\n  describe('Project Model Tests', () => {\r\n    it('should create a project with owner reference', async () => {\r\n      const project = await Project.create({\r\n        name: 'Test Project',\r\n        description: 'A test project description',\r\n        type: 'residential',\r\n        location: {\r\n          address: '123 Test St',\r\n          city: 'Test City',\r\n          postalCode: '12345'\r\n        },\r\n        financials: {\r\n          totalInvestment: 50000,\r\n          targetAmount: 100000,\r\n          currentAmount: 0,\r\n          expectedReturn: 8.5,\r\n          duration: 12,\r\n          entryTicket: 1000\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        tenant: new Types.ObjectId(),\r\n        createdBy: getTestUserId(),\r\n        investors: []\r\n      });\r\n\r\n      expect(project._id).toBeDefined();\r\n      expect(project.name).toBe('Test Project');\r\n      expect(project.createdBy.toString()).toBe(getTestUserId());\r\n    });\r\n\r\n    it('should populate owner when querying projects', async () => {\r\n      const project = await Project.create({\r\n        name: 'Populated Project',\r\n        description: 'Testing population',\r\n        type: 'commercial',\r\n        location: {\r\n          address: '456 Populated St',\r\n          city: 'Populated City',\r\n          postalCode: '67890'\r\n        },\r\n        financials: {\r\n          totalInvestment: 25000,\r\n          targetAmount: 50000,\r\n          currentAmount: 0,\r\n          expectedReturn: 7.5,\r\n          duration: 6,\r\n          entryTicket: 500\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        },\r\n        status: 'planning',\r\n        tenant: new Types.ObjectId(),\r\n        createdBy: getTestUserId(),\r\n        investors: []\r\n      });\r\n\r\n      const populatedProject = await Project.findById(project._id).populate('createdBy');\r\n      \r\n      expect(populatedProject).toBeDefined();\r\n      expect(populatedProject?.createdBy).toBeDefined();\r\n      \r\n      const populatedUser = populatedProject?.createdBy as IUser;\r\n      expect(populatedUser.email).toBe('test@example.com');\r\n    });\r\n\r\n    it('should update project status', async () => {\r\n      const project = await Project.create({\r\n        name: 'Update Test Project',\r\n        description: 'Testing updates',\r\n        type: 'residential',\r\n        location: {\r\n          address: '789 Update St',\r\n          city: 'Update City',\r\n          postalCode: '11111'\r\n        },\r\n        financials: {\r\n          totalInvestment: 10000,\r\n          targetAmount: 20000,\r\n          currentAmount: 0,\r\n          expectedReturn: 6.5,\r\n          duration: 3,\r\n          entryTicket: 100\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        tenant: new Types.ObjectId(),\r\n        createdBy: getTestUserId(),\r\n        investors: []\r\n      });\r\n\r\n      project.status = 'completed';\r\n      await project.save();\r\n\r\n      const updatedProject = await Project.findById(project._id);\r\n      expect(updatedProject?.status).toBe('completed');\r\n    });\r\n  });\r\n\r\n  describe('Complex Queries and Relationships', () => {\r\n    it('should find all projects for a user', async () => {\r\n      await Project.create([\r\n        {\r\n          name: 'Project 1',\r\n          description: 'First project',\r\n          type: 'residential',\r\n          location: {\r\n            address: '111 First St',\r\n            city: 'First City',\r\n            postalCode: '22222'\r\n          },\r\n          financials: {\r\n            totalInvestment: 10000,\r\n            targetAmount: 20000,\r\n            currentAmount: 0,\r\n            expectedReturn: 7.0,\r\n            duration: 6,\r\n            entryTicket: 100\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n            milestones: []\r\n          },\r\n          status: 'active',\r\n          tenant: new Types.ObjectId(),\r\n          createdBy: getTestUserId(),\r\n          investors: []\r\n        },\r\n        {\r\n          name: 'Project 2',\r\n          description: 'Second project',\r\n          type: 'commercial',\r\n          location: {\r\n            address: '222 Second St',\r\n            city: 'Second City',\r\n            postalCode: '33333'\r\n          },\r\n          financials: {\r\n            totalInvestment: 20000,\r\n            targetAmount: 40000,\r\n            currentAmount: 0,\r\n            expectedReturn: 8.0,\r\n            duration: 12,\r\n            entryTicket: 200\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n            milestones: []\r\n          },\r\n          status: 'planning',\r\n          tenant: new Types.ObjectId(),\r\n          createdBy: getTestUserId(),\r\n          investors: []\r\n        }\r\n      ]);\r\n\r\n      const userProjects = await Project.find({ createdBy: getTestUserId() });\r\n      expect(userProjects).toHaveLength(2);\r\n      expect(userProjects[0].createdBy.toString()).toBe(getTestUserId());\r\n    });\r\n\r\n    it('should handle date range queries', async () => {\r\n      const startDate = new Date('2024-01-01');\r\n      const endDate = new Date('2024-12-31');\r\n\r\n      const project = await Project.create({\r\n        name: 'Date Range Project',\r\n        description: 'Testing date queries',\r\n        type: 'mixed',\r\n        location: {\r\n          address: '333 Date St',\r\n          city: 'Date City',\r\n          postalCode: '44444'\r\n        },\r\n        financials: {\r\n          totalInvestment: 15000,\r\n          targetAmount: 30000,\r\n          currentAmount: 0,\r\n          expectedReturn: 7.5,\r\n          duration: 9,\r\n          entryTicket: 150\r\n        },\r\n        timeline: {\r\n          startDate,\r\n          endDate,\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        tenant: new Types.ObjectId(),\r\n        createdBy: getTestUserId(),\r\n        investors: []\r\n      });\r\n\r\n      const foundProjects = await Project.find({\r\n        'timeline.startDate': { $gte: new Date('2023-12-01') },\r\n        'timeline.endDate': { $lte: new Date('2025-01-01') }\r\n      });\r\n\r\n      expect(foundProjects).toHaveLength(1);\r\n      expect(foundProjects[0].name).toBe('Date Range Project');\r\n    });\r\n  });\r\n\r\n  describe('Validation and Error Handling', () => {\r\n    it('should validate required fields', async () => {\r\n      await expect(\r\n        User.create({\r\n          email: 'invalid@test.com'\r\n        })\r\n      ).rejects.toThrow();\r\n    });\r\n\r\n    it('should handle invalid ObjectId references', async () => {\r\n      const invalidId = new mongoose.Types.ObjectId();\r\n      \r\n      await expect(\r\n        Project.create({\r\n          name: 'Invalid Owner',\r\n          description: 'Testing invalid owner',\r\n          type: 'residential',\r\n          location: {\r\n            address: 'Invalid St',\r\n            city: 'Invalid City',\r\n            postalCode: '00000'\r\n          },\r\n          financials: {\r\n            totalInvestment: 1000,\r\n            targetAmount: 2000,\r\n            currentAmount: 0,\r\n            expectedReturn: 5.0,\r\n            duration: 1,\r\n            entryTicket: 10\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n            milestones: []\r\n          },\r\n          status: 'active',\r\n          tenant: new Types.ObjectId(),\r\n          createdBy: invalidId,\r\n          investors: []\r\n        })\r\n      ).rejects.toThrow();\r\n    });\r\n\r\n    it('should handle database errors gracefully', async () => {\r\n      try {\r\n        await User.create({\r\n          email: 'test@example.com', // Duplicate email\r\n          password: 'test123',\r\n          profile: {\r\n            firstName: 'Duplicate',\r\n            lastName: 'User',\r\n            kycStatus: 'pending',\r\n            kycDocuments: []\r\n          },\r\n          role: 'investor',\r\n          investments: [],\r\n          preferences: {\r\n            riskTolerance: 'medium',\r\n            investmentHorizon: 'medium',\r\n            notifications: {\r\n              email: true,\r\n              sms: false,\r\n              push: true\r\n            }\r\n          }\r\n        });\r\n      } catch (_error) {\r\n        expect(error).toBeDefined();\r\n        if (error instanceof Error) {\r\n          expect(error.message).toContain('duplicate');\r\n        }\r\n      }\r\n    });\r\n  });\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\examples\\multi-tenant-complete-example.test.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .name on an `any` value.",
        "line": 174,
        "column": 48,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 174,
        "endColumn": 52
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .name on an `any` value.",
        "line": 223,
        "column": 31,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 223,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .name on an `any` value.",
        "line": 226,
        "column": 31,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 226,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 236,
        "column": 13,
        "nodeType": "VariableDeclarator",
        "messageId": "anyAssignment",
        "endLine": 240,
        "endColumn": 9
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 242,
        "column": 13,
        "nodeType": "VariableDeclarator",
        "messageId": "anyAssignment",
        "endLine": 249,
        "endColumn": 9
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 245,
        "column": 9,
        "nodeType": "Property",
        "messageId": "anyAssignment",
        "endLine": 245,
        "endColumn": 24
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 245,
        "column": 21,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 245,
        "endColumn": 24
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 251,
        "column": 13,
        "nodeType": "VariableDeclarator",
        "messageId": "anyAssignment",
        "endLine": 253,
        "endColumn": 27
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 252,
        "column": 27,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 252,
        "endColumn": 30
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .owner on an `any` value.",
        "line": 256,
        "column": 32,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 256,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .owner on an `any` value.",
        "line": 257,
        "column": 32,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 257,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 289,
        "column": 13,
        "nodeType": "VariableDeclarator",
        "messageId": "anyAssignment",
        "endLine": 289,
        "endColumn": 82
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .name on an `any` value.",
        "line": 294,
        "column": 25,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 294,
        "endColumn": 29
      }
    ],
    "suppressedMessages": [],
    "errorCount": 13,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { afterAll, beforeAll, beforeEach, describe, expect, it } from 'vitest';\r\nimport mongoose, { Connection, Schema } from 'mongoose';\r\nimport { MongoMemoryServer } from 'mongodb-memory-server';\r\n\r\n// Export schemas instead of models for multi-tenant usage\r\nconst UserSchema = new Schema({\r\n  name: { type: String, required: true },\r\n  email: { type: String, required: true, unique: true },\r\n  tenantId: { type: String, required: true },\r\n  createdAt: { type: Date, default: Date.now }\r\n});\r\n\r\nconst ProjectSchema = new Schema({\r\n  name: { type: String, required: true },\r\n  description: String,\r\n  owner: { type: Schema.Types.ObjectId, ref: 'User', required: true },\r\n  tenantId: { type: String, required: true },\r\n  status: { type: String, enum: ['active', 'inactive', 'planning'], default: 'planning' },\r\n  budget: { type: Number, default: 0 },\r\n  createdAt: { type: Date, default: Date.now }\r\n});\r\n\r\n// Pattern 1: Single connection with useDb() for multi-tenant\r\nclass SingleConnectionMultiTenant {\r\n  private connection: mongoose.Connection | null = null;\r\n\r\n  async connect(uri: string): Promise<mongoose.Connection> {\r\n    if (!this.connection) {\r\n      await mongoose.connect(uri);\r\n      this.connection = mongoose.connection;\r\n    }\r\n    return this.connection;\r\n  }\r\n\r\n  getTenantDb(tenantId: string): mongoose.Connection {\r\n    if (!this.connection) {\r\n      throw new Error('Database not connected');\r\n    }\r\n    return this.connection.useDb(`tenant_${tenantId}`, { useCache: true });\r\n  }\r\n\r\n  async disconnect(): Promise<void> {\r\n    if (this.connection) {\r\n      await mongoose.disconnect();\r\n      this.connection = null;\r\n    }\r\n  }\r\n}\r\n\r\n// Pattern 2: Multiple connections (one per tenant)\r\nclass MultipleConnectionMultiTenant {\r\n  private connections: Map<string, Connection> = new Map();\r\n\r\n  async getConnection(tenantId: string, uriTemplate: string): Promise<Connection> {\r\n    if (this.connections.has(tenantId)) {\r\n      return this.connections.get(tenantId)!;\r\n    }\r\n\r\n    const uri = uriTemplate.replace('{tenantId}', tenantId);\r\n    const conn = mongoose.createConnection(uri);\r\n    \r\n    // Register models on this connection\r\n    conn.model('User', UserSchema);\r\n    conn.model('Project', ProjectSchema);\r\n    \r\n    await conn.asPromise();\r\n    this.connections.set(tenantId, conn);\r\n    \r\n    return conn;\r\n  }\r\n\r\n  async disconnectAll(): Promise<void> {\r\n    const promises = Array.from(this.connections.values()).map(conn => \r\n      conn.close()\r\n    );\r\n    await Promise.all(promises);\r\n    this.connections.clear();\r\n  }\r\n\r\n  getConnectionCount(): number {\r\n    return this.connections.size;\r\n  }\r\n}\r\n\r\n// Test setup\r\ndescribe('Multi-Tenant Mongoose Patterns', () => {\r\n  let mongoServer: MongoMemoryServer;\r\n  let singleTenant: SingleConnectionMultiTenant;\r\n  let multiTenant: MultipleConnectionMultiTenant;\r\n\r\n  beforeAll(async () => {\r\n    mongoServer = await MongoMemoryServer.create();\r\n    singleTenant = new SingleConnectionMultiTenant();\r\n    multiTenant = new MultipleConnectionMultiTenant();\r\n  });\r\n\r\n  afterAll(async () => {\r\n    await singleTenant.disconnect();\r\n    await multiTenant.disconnectAll();\r\n    await mongoServer.stop();\r\n  });\r\n\r\n  describe('Pattern 1: Single Connection with useDb()', () => {\r\n    beforeAll(async () => {\r\n      const uri = mongoServer.getUri();\r\n      await singleTenant.connect(uri);\r\n    });\r\n\r\n    beforeEach(async () => {\r\n      // Clean tenant databases\r\n      const tenant1Db = singleTenant.getTenantDb('tenant1');\r\n      const tenant2Db = singleTenant.getTenantDb('tenant2');\r\n      \r\n      await tenant1Db.dropDatabase();\r\n      await tenant2Db.dropDatabase();\r\n    });\r\n\r\n    it('should isolate data between tenants', async () => {\r\n      // Tenant 1 operations\r\n      const tenant1Db = singleTenant.getTenantDb('tenant1');\r\n      const tenant1UserModel = tenant1Db.model('User', UserSchema);\r\n      \r\n      await tenant1UserModel.create({\r\n        name: 'Alice',\r\n        email: 'alice@example.com',\r\n        tenantId: 'tenant1'\r\n      });\r\n\r\n      // Tenant 2 operations\r\n      const tenant2Db = singleTenant.getTenantDb('tenant2');\r\n      const tenant2UserModel = tenant2Db.model('User', UserSchema);\r\n      \r\n      await tenant2UserModel.create({\r\n        name: 'Bob',\r\n        email: 'bob@example.com',\r\n        tenantId: 'tenant2'\r\n      });\r\n\r\n      // Verify isolation\r\n      const tenant1Users = await tenant1UserModel.find();\r\n      const tenant2Users = await tenant2UserModel.find();\r\n\r\n      expect(tenant1Users).toHaveLength(1);\r\n      expect(tenant1Users[0]?.name).toBe('Alice');\r\n      \r\n      expect(tenant2Users).toHaveLength(1);\r\n      expect(tenant2Users[0]?.name).toBe('Bob');\r\n    });\r\n\r\n    it('should handle project relationships within tenant', async () => {\r\n      const tenant1Db = singleTenant.getTenantDb('tenant1');\r\n      const tenant1UserModel = tenant1Db.model('User', UserSchema);\r\n      const tenant1ProjectModel = tenant1Db.model('Project', ProjectSchema);\r\n\r\n      const user = await tenant1UserModel.create({\r\n        name: 'Charlie',\r\n        email: 'charlie@example.com',\r\n        tenantId: 'tenant1'\r\n      });\r\n\r\n      const project = await tenant1ProjectModel.create({\r\n        name: 'Project Alpha',\r\n        description: 'First project',\r\n        owner: user._id,\r\n        tenantId: 'tenant1'\r\n      });\r\n\r\n      const populatedProject = await tenant1ProjectModel\r\n        .findById(project._id)\r\n        .populate('owner');\r\n\r\n      expect(populatedProject).toBeDefined();\r\n      expect(populatedProject?.owner).toBeDefined();\r\n      expect((populatedProject?.owner as any)?.name).toBe('Charlie');\r\n    });\r\n  });\r\n\r\n  describe('Pattern 2: Multiple Connections', () => {\r\n    beforeEach(async () => {\r\n      await multiTenant.disconnectAll();\r\n    });\r\n\r\n    it('should create separate connections for each tenant', async () => {\r\n      const uriTemplate = mongoServer.getUri() + '/{tenantId}';\r\n      \r\n      const conn1 = await multiTenant.getConnection('tenant1', uriTemplate);\r\n      const conn2 = await multiTenant.getConnection('tenant2', uriTemplate);\r\n\r\n      expect(conn1).toBeDefined();\r\n      expect(conn2).toBeDefined();\r\n      expect(conn1).not.toBe(conn2);\r\n      expect(multiTenant.getConnectionCount()).toBe(2);\r\n    });\r\n\r\n    it('should maintain separate data per tenant connection', async () => {\r\n      const uriTemplate = mongoServer.getUri() + '/{tenantId}';\r\n      \r\n      // Tenant 1\r\n      const conn1 = await multiTenant.getConnection('tenant1', uriTemplate);\r\n      const UserModel1 = conn1.model('User');\r\n      \r\n      await UserModel1.create({\r\n        name: 'David',\r\n        email: 'david@example.com',\r\n        tenantId: 'tenant1'\r\n      });\r\n\r\n      // Tenant 2\r\n      const conn2 = await multiTenant.getConnection('tenant2', uriTemplate);\r\n      const UserModel2 = conn2.model('User');\r\n      \r\n      await UserModel2.create({\r\n        name: 'Eve',\r\n        email: 'eve@example.com',\r\n        tenantId: 'tenant2'\r\n      });\r\n\r\n      // Verify isolation\r\n      const tenant1Users = await UserModel1.find();\r\n      const tenant2Users = await UserModel2.find();\r\n\r\n      expect(tenant1Users).toHaveLength(1);\r\n      expect(tenant1Users[0]?.name).toBe('David');\r\n      \r\n      expect(tenant2Users).toHaveLength(1);\r\n      expect(tenant2Users[0]?.name).toBe('Eve');\r\n    });\r\n\r\n    it('should handle complex relationships across tenant connections', async () => {\r\n      const uriTemplate = mongoServer.getUri() + '/{tenant1}' + '/{tenantId}';\r\n      \r\n      const conn1 = await multiTenant.getConnection('tenant1', uriTemplate);\r\n      const UserModel1 = conn1.model('User');\r\n      const ProjectModel1 = conn1.model('Project');\r\n\r\n      const user = await UserModel1.create({\r\n        name: 'Frank',\r\n        email: 'frank@example.com',\r\n        tenantId: 'tenant1'\r\n      });\r\n\r\n      const project = await ProjectModel1.create({\r\n        name: 'Project Beta',\r\n        description: 'Second project',\r\n        owner: user._id,\r\n        tenantId: 'tenant1',\r\n        status: 'active',\r\n        budget: 50000\r\n      });\r\n\r\n      const populatedProject = await ProjectModel1\r\n        .findById(project._id)\r\n        .populate('owner');\r\n\r\n      expect(populatedProject).toBeDefined();\r\n      expect(populatedProject?.owner).toBeDefined();\r\n      expect(populatedProject?.owner.name).toBe('Frank');\r\n    });\r\n  });\r\n\r\n  describe('Performance Comparison', () => {\r\n    it('should demonstrate both patterns work correctly', async () => {\r\n      const uri = mongoServer.getUri();\r\n      const uriTemplate = uri + '/{tenantId}';\r\n\r\n      // Test single connection pattern\r\n      await singleTenant.connect(uri);\r\n      const singleConn = singleTenant.getTenantDb('perf-test');\r\n      const singleUserModel = singleConn.model('User', UserSchema);\r\n      \r\n      await singleUserModel.create({\r\n        name: 'Performance Test User',\r\n        email: 'perf@test.com',\r\n        tenantId: 'perf-test'\r\n      });\r\n\r\n      // Test multiple connection pattern\r\n      const multiConn = await multiTenant.getConnection('perf-test', uriTemplate);\r\n      const multiUserModel = multiConn.model('User');\r\n      \r\n      await multiUserModel.create({\r\n        name: 'Multi Connection User',\r\n        email: 'multi@test.com',\r\n        tenantId: 'perf-test'\r\n      });\r\n\r\n      // Verify both work\r\n      const singleUser = await singleUserModel.findOne({ email: 'perf@test.com' });\r\n      const multiUser = await multiUserModel.findOne({ email: 'multi@test.com' });\r\n\r\n      expect(singleUser).toBeDefined();\r\n      expect(multiUser).toBeDefined();\r\n      expect(singleUser?.name).toBe('Performance Test User');\r\n      expect(multiUser?.name).toBe('Multi Connection User');\r\n    });\r\n  });\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\helpers\\testHelpers.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 32
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 31
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 5,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 5,
        "endColumn": 38
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 57,
        "column": 26,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 57,
        "endColumn": 31
      }
    ],
    "suppressedMessages": [],
    "errorCount": 4,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import mongoose from 'mongoose';\nimport request from 'supertest';\nimport jwt from 'jsonwebtoken';\nimport bcrypt from 'bcryptjs';\nimport User from '../../models/User';\nimport app from '../../app';\n\nexport interface TestUser {\n  email: string;\n  password: string;\n  role: string;\n  token?: string;\n  userId?: string;\n}\n\nexport class TestHelpers {\n  static async createTestUser(userData: Partial<TestUser> = {}) {\n    const defaultUser = {\n      email: 'test@example.com',\n      password: 'Test123!',\n      role: 'investor',\n      ...userData\n    };\n\n    const hashedPassword = await bcrypt.hash(defaultUser.password, 10);\n    \n    const user = new User({\n      email: defaultUser.email,\n      password: hashedPassword,\n      role: defaultUser.role,\n      firstName: 'Test',\n      lastName: 'User',\n      isEmailVerified: true,\n      isActive: true\n    });\n\n    await user.save();\n    \n    const token = jwt.sign(\n      { userId: user._id, email: user.email, role: user.role },\n      process.env.JWT_SECRET || 'test-secret-key',\n      { expiresIn: '7d' }\n    );\n\n    return {\n      user,\n      token,\n      password: defaultUser.password\n    };\n  }\n\n  static async authenticateUser(email: string, password: string): Promise<string> {\n    const response = await request(app)\n      .post('/api/auth/login')\n      .send({ email, password });\n    \n    return response.body.token as string;\n  }\n\n  static generateAuthToken(userId: string, role: string = 'investor'): string {\n    return jwt.sign(\n      { userId, role },\n      process.env.JWT_SECRET || 'test-secret-key',\n      { expiresIn: '7d' }\n    );\n  }\n\n  static async createAuthenticatedUser(role: string = 'investor') {\n    const userData = await this.createTestUser({ role });\n    return {\n      ...userData,\n      authHeader: `Bearer ${userData.token}`\n    };\n  }\n\n  static async clearAllCollections(): Promise<void> {\n    const collections = mongoose.connection.collections;\n    for (const key in collections) {\n      const collection = collections[key];\n      if (collection) {\n        await collection.deleteMany({});\n      }\n    }\n  }\n}\n\nexport const testUsers = {\n  admin: {\n    email: 'admin@test.com',\n    password: 'Admin123!',\n    role: 'admin'\n  },\n  investor: {\n    email: 'investor@test.com',\n    password: 'Investor123!',\n    role: 'investor'\n  },\n  tenant: {\n    email: 'tenant@test.com',\n    password: 'Tenant123!',\n    role: 'tenant'\n  }\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\helpers\\userHelpers.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\helpers\\userHelpers.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 2,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 2,
        "endColumn": 44
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import bcrypt from \"bcryptjs\";\nimport { IUser } from \"../../types/models\";\nimport User from \"../../models/User\";\n\n/**\n * Creates a valid test user with all required fields\n * @param overrides - Override default user data\n * @returns Created user document\n */\nexport const createValidTestUser = async (\n  overrides: Partial<IUser> = {},\n): Promise<any> => {\n  const defaultUser = {\n    email: \"test@example.com\",\n    password: await bcrypt.hash(\"Test123!\", 10),\n    role: \"investor\",\n    isEmailVerified: true,\n    profile: {\n      firstName: \"Test\",\n      lastName: \"User\",\n      phone: \"+1234567890\",\n      ...overrides.profile,\n    },\n    ...overrides,\n  };\n\n  const user = new User(defaultUser);\n  return await user.save();\n};\n\n/**\n * Creates a valid test admin user\n * @param overrides - Override default admin data\n * @returns Created admin user document\n */\nexport const createValidTestAdmin = async (\n  overrides: Partial<IUser> = {},\n): Promise<any> => {\n  const defaultAdmin = {\n    email: \"admin@test.com\",\n    password: await bcrypt.hash(\"admin123\", 10),\n    role: \"admin\",\n    isEmailVerified: true,\n    profile: {\n      firstName: \"Admin\",\n      lastName: \"User\",\n      phone: \"+1234567890\",\n      ...overrides.profile,\n    },\n    ...overrides,\n  };\n\n  const admin = new User(defaultAdmin);\n  return await admin.save();\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\kyc_integration.test.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'afterAll' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 2,
        "column": 3,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 2,
        "endColumn": 11
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'beforeAll' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 3,
        "column": 3,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 3,
        "endColumn": 12
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 12,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 12,
        "endColumn": 31
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 14,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 14,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-call",
        "severity": 2,
        "message": "Unsafe call of a(n) `any` typed value.",
        "line": 42,
        "column": 11,
        "nodeType": "MemberExpression",
        "messageId": "unsafeCall",
        "endLine": 42,
        "endColumn": 20
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .save on an `any` value.",
        "line": 42,
        "column": 16,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 42,
        "endColumn": 20
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 44,
        "column": 9,
        "nodeType": "Property",
        "messageId": "anyAssignment",
        "endLine": 44,
        "endColumn": 25
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 44,
        "column": 22,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 44,
        "endColumn": 25
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 72,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 72,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 73,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 73,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 74,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 74,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 76,
        "column": 52,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 76,
        "endColumn": 55
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 88,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 88,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 89,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 89,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 98,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 98,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 113,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 113,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 114,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 114,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/unbound-method",
        "severity": 2,
        "message": "Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.",
        "line": 119,
        "column": 32,
        "nodeType": "MemberExpression",
        "messageId": "unboundWithoutThisAnnotation",
        "endLine": 119,
        "endColumn": 45
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 128,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 128,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 129,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 129,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .profile on an `any` value.",
        "line": 138,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 138,
        "endColumn": 19
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .profile on an `any` value.",
        "line": 139,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 139,
        "endColumn": 19
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-call",
        "severity": 2,
        "message": "Unsafe call of a(n) `any` typed value.",
        "line": 142,
        "column": 13,
        "nodeType": "MemberExpression",
        "messageId": "unsafeCall",
        "endLine": 142,
        "endColumn": 22
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .save on an `any` value.",
        "line": 142,
        "column": 18,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 142,
        "endColumn": 22
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 149,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 149,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 150,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 150,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 151,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 151,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 165,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 165,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 166,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 166,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/unbound-method",
        "severity": 2,
        "message": "Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.",
        "line": 170,
        "column": 32,
        "nodeType": "MemberExpression",
        "messageId": "unboundWithoutThisAnnotation",
        "endLine": 170,
        "endColumn": 45
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 178,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 178,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 179,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 179,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .profile on an `any` value.",
        "line": 189,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 189,
        "endColumn": 19
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-call",
        "severity": 2,
        "message": "Unsafe call of a(n) `any` typed value.",
        "line": 190,
        "column": 13,
        "nodeType": "MemberExpression",
        "messageId": "unsafeCall",
        "endLine": 190,
        "endColumn": 22
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .save on an `any` value.",
        "line": 190,
        "column": 18,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 190,
        "endColumn": 22
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 192,
        "column": 71,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 192,
        "endColumn": 74
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 195,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 195,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 196,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 196,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"ObjectId\" of template literal expression.",
        "line": 203,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "invalidType",
        "endLine": 203,
        "endColumn": 41
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 207,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 207,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 208,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 208,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/unbound-method",
        "severity": 2,
        "message": "Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.",
        "line": 212,
        "column": 32,
        "nodeType": "MemberExpression",
        "messageId": "unboundWithoutThisAnnotation",
        "endLine": 212,
        "endColumn": 45
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 215,
        "column": 71,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 215,
        "endColumn": 74
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 218,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 218,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 219,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 219,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 230,
        "column": 38,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 230,
        "endColumn": 41
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 234,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 234,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .data on an `any` value.",
        "line": 235,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 235,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 237,
        "column": 52,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 237,
        "endColumn": 55
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"ObjectId\" of template literal expression.",
        "line": 245,
        "column": 33,
        "nodeType": "Identifier",
        "messageId": "invalidType",
        "endLine": 245,
        "endColumn": 46
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 249,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 249,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 250,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 250,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/unbound-method",
        "severity": 2,
        "message": "Avoid referencing unbound methods which may cause unintentional scoping of `this`.\nIf your function does not access `this`, you can annotate it with `this: void`, or consider using an arrow function instead.",
        "line": 254,
        "column": 32,
        "nodeType": "MemberExpression",
        "messageId": "unboundWithoutThisAnnotation",
        "endLine": 254,
        "endColumn": 45
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 258,
        "column": 38,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 258,
        "endColumn": 41
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .success on an `any` value.",
        "line": 262,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 262,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .message on an `any` value.",
        "line": 263,
        "column": 28,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 263,
        "endColumn": 35
      }
    ],
    "suppressedMessages": [],
    "errorCount": 56,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import {\n  afterAll,\n  beforeAll,\n  beforeEach,\n  describe,\n  expect,\n  it,\n  vi,\n} from \"vitest\";\nimport mongoose from \"mongoose\";\nimport request from \"supertest\";\nimport express from \"express\";\nimport jwt from \"jsonwebtoken\";\nimport User from \"../models/User\";\nimport kycRoutes from \"../routes/kyc\";\n\nconst app = express();\napp.use(express.json());\napp.use(\"/api/kyc\", kycRoutes);\n\n// Use global setup for database connection\n// Connection is handled in tests/setup/global-setup.ts\n\nbeforeEach(async () => {\n  // Clear collections - handled by global setup\n  await User.deleteMany({});\n});\n\ndescribe(\"KYC Integration Tests\", () => {\n  let user: any;\n  let token: string;\n\n  beforeEach(async () => {\n    user = new User({\n      email: \"test@example.com\",\n      password: \"password123\",\n      profile: {\n        firstName: \"Test\",\n        lastName: \"User\",\n      },\n    });\n    await user.save();\n    token = jwt.sign(\n      { userId: user._id },\n      process.env.JWT_SECRET || \"your-secret-key\",\n    );\n  });\n\n  describe(\"POST /api/kyc/submit\", () => {\n    it(\"should submit KYC successfully\", async () => {\n      const kycData = {\n        documents: [\n          {\n            type: \"id_card\",\n            url: \"https://example.com/id.pdf\",\n            status: \"pending\",\n          },\n          {\n            type: \"proof_of_address\",\n            url: \"https://example.com/address.pdf\",\n            status: \"pending\",\n          },\n        ],\n      };\n\n      const response = await request(app)\n        .post(\"/api/kyc/submit\")\n        .set(\"Authorization\", `Bearer ${token}`)\n        .send({ kycData });\n\n      expect(response.status).toBe(201);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.status).toBe(\"pending\");\n      expect(response.body.data.kycId).toBeDefined();\n\n      const updatedUser = await User.findById(user._id);\n      expect(updatedUser?.profile.kycStatus).toBe(\"pending\");\n      expect(updatedUser?.profile.kycDocuments).toHaveLength(2);\n    });\n\n    it(\"should return 400 for missing KYC data\", async () => {\n      const response = await request(app)\n        .post(\"/api/kyc/submit\")\n        .set(\"Authorization\", `Bearer ${token}`)\n        .send({});\n\n      expect(response.status).toBe(400);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\"KYC data and documents are required\");\n    });\n\n    it(\"should return 401 for missing token\", async () => {\n      const response = await request(app)\n        .post(\"/api/kyc/submit\")\n        .send({ kycData: { documents: [] } });\n\n      expect(response.status).toBe(401);\n      expect(response.body.message).toBe(\"No token provided\");\n    });\n\n    it(\"should return 404 for non-existent user\", async () => {\n      const invalidToken = jwt.sign(\n        { userId: new mongoose.Types.ObjectId() },\n        process.env.JWT_SECRET || \"your-secret-key\",\n      );\n\n      const response = await request(app)\n        .post(\"/api/kyc/submit\")\n        .set(\"Authorization\", `Bearer ${invalidToken}`)\n        .send({ kycData: { documents: [] } });\n\n      expect(response.status).toBe(404);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\"User not found\");\n    });\n\n    it(\"should return 500 for server error\", async () => {\n      // Mock User.findById to throw an error\n      const originalFindById = User.findById;\n      User.findById = vi.fn().mockRejectedValue(new Error(\"Database error\"));\n\n      const response = await request(app)\n        .post(\"/api/kyc/submit\")\n        .set(\"Authorization\", `Bearer ${token}`)\n        .send({ kycData: { documents: [] } });\n\n      expect(response.status).toBe(500);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\"Server error during KYC submission\");\n\n      // Restore original method\n      User.findById = originalFindById;\n    });\n  });\n\n  describe(\"GET /api/kyc/status\", () => {\n    it(\"should get KYC status successfully\", async () => {\n      user.profile.kycStatus = \"verified\";\n      user.profile.kycDocuments = [\n        { type: \"id_card\", url: \"test.pdf\", status: \"approved\" },\n      ];\n      await user.save();\n\n      const response = await request(app)\n        .get(\"/api/kyc/status\")\n        .set(\"Authorization\", `Bearer ${token}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.status).toBe(\"verified\");\n      expect(response.body.data.documents).toHaveLength(1);\n    });\n\n    it(\"should return 404 for non-existent user\", async () => {\n      const invalidToken = jwt.sign(\n        { userId: new mongoose.Types.ObjectId() },\n        process.env.JWT_SECRET || \"your-secret-key\",\n      );\n\n      const response = await request(app)\n        .get(\"/api/kyc/status\")\n        .set(\"Authorization\", `Bearer ${invalidToken}`);\n\n      expect(response.status).toBe(404);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\"User not found\");\n    });\n\n    it(\"should return 500 for server error\", async () => {\n      const originalFindById = User.findById;\n      User.findById = vi.fn().mockRejectedValue(new Error(\"Database error\"));\n\n      const response = await request(app)\n        .get(\"/api/kyc/status\")\n        .set(\"Authorization\", `Bearer ${token}`);\n\n      expect(response.status).toBe(500);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\n        \"Server error while fetching KYC status\",\n      );\n\n      User.findById = originalFindById;\n    });\n  });\n\n  describe(\"GET /api/kyc/status/:userId\", () => {\n    it(\"should get KYC status by user ID successfully\", async () => {\n      user.profile.kycStatus = \"rejected\";\n      await user.save();\n\n      const response = await request(app).get(`/api/kyc/status/${user._id}`);\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.status).toBe(\"rejected\");\n    });\n\n    it(\"should return 404 for non-existent user\", async () => {\n      const nonExistentId = new mongoose.Types.ObjectId();\n\n      const response = await request(app).get(\n        `/api/kyc/status/${nonExistentId}`,\n      );\n\n      expect(response.status).toBe(404);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\"User not found\");\n    });\n\n    it(\"should return 500 for server error\", async () => {\n      const originalFindById = User.findById;\n      User.findById = vi.fn().mockRejectedValue(new Error(\"Database error\"));\n\n      const response = await request(app).get(`/api/kyc/status/${user._id}`);\n\n      expect(response.status).toBe(500);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\n        \"Server error while fetching KYC status\",\n      );\n\n      User.findById = originalFindById;\n    });\n  });\n\n  describe(\"PUT /api/kyc/status/:userId\", () => {\n    it(\"should update KYC status successfully\", async () => {\n      const response = await request(app)\n        .put(`/api/kyc/status/${user._id}`)\n        .send({ status: \"verified\", comments: \"All documents verified\" });\n\n      expect(response.status).toBe(200);\n      expect(response.body.success).toBe(true);\n      expect(response.body.data.status).toBe(\"verified\");\n\n      const updatedUser = await User.findById(user._id);\n      expect(updatedUser?.profile.kycStatus).toBe(\"verified\");\n    });\n\n    it(\"should return 404 for non-existent user\", async () => {\n      const nonExistentId = new mongoose.Types.ObjectId();\n\n      const response = await request(app)\n        .put(`/api/kyc/status/${nonExistentId}`)\n        .send({ status: \"verified\" });\n\n      expect(response.status).toBe(404);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\"User not found\");\n    });\n\n    it(\"should return 500 for server error\", async () => {\n      const originalFindById = User.findById;\n      User.findById = vi.fn().mockRejectedValue(new Error(\"Database error\"));\n\n      const response = await request(app)\n        .put(`/api/kyc/status/${user._id}`)\n        .send({ status: \"verified\" });\n\n      expect(response.status).toBe(500);\n      expect(response.body.success).toBe(false);\n      expect(response.body.message).toBe(\"Server error during KYC update\");\n\n      User.findById = originalFindById;\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\matchers\\project.matchers.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'T' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 195,
        "column": 23,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 195,
        "endColumn": 24
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import type { Types } from \"mongoose\";\nimport { expect } from \"vitest\";\n\ninterface ProjectData {\n  name?: string;\n  description?: string;\n  type?: string;\n  financials?: {\n    totalInvestment?: number;\n    targetAmount?: number;\n    expectedReturn?: number;\n    duration?: number;\n    entryTicket?: number;\n    currentAmount?: number;\n  };\n  timeline?: {\n    startDate?: Date;\n    endDate?: Date;\n  };\n  tenant?: Types.ObjectId;\n  createdBy?: Types.ObjectId;\n  status?: string;\n}\n\n// Custom matchers pour les tests de projets avec types scuriss\nexpect.extend({\n  toBeValidProject(received: unknown) {\n    const { isNot } = this;\n    const project = received as ProjectData;\n\n    const pass = Boolean(\n      project &&\n        typeof project === \"object\" &&\n        project.name &&\n        project.description &&\n        project.type &&\n        project.financials &&\n        project.timeline &&\n        project.tenant &&\n        project.createdBy,\n    );\n\n    return {\n      pass,\n      message: () => {\n        const hint = this.utils.matcherHint(\"toBeValidProject\", undefined, \"\", {\n          isNot,\n        });\n\n        if (pass && isNot) {\n          return `${hint}\\n\\nExpected value not to be a valid project, but it was`;\n        }\n\n        if (!pass && !isNot) {\n          return (\n            `${hint}\\n\\nExpected value to be a valid project\\n` +\n            `Received: ${this.utils.printReceived(received)}`\n          );\n        }\n\n        return `${hint}`;\n      },\n    };\n  },\n\n  toHaveFinancialStructure(received: unknown) {\n    const { isNot } = this;\n    const project = received as ProjectData;\n\n    const financials = project?.financials;\n    const pass = Boolean(\n      financials &&\n        typeof financials.totalInvestment === \"number\" &&\n        financials.totalInvestment > 0 &&\n        typeof financials.targetAmount === \"number\" &&\n        financials.targetAmount > 0 &&\n        typeof financials.expectedReturn === \"number\" &&\n        financials.expectedReturn > 0 &&\n        typeof financials.duration === \"number\" &&\n        financials.duration > 0 &&\n        typeof financials.entryTicket === \"number\" &&\n        financials.entryTicket > 0,\n    );\n\n    return {\n      pass,\n      message: () => {\n        const hint = this.utils.matcherHint(\n          \"toHaveFinancialStructure\",\n          undefined,\n          \"\",\n          {\n            isNot,\n          },\n        );\n\n        if (pass && isNot) {\n          return `${hint}\\n\\nExpected project not to have valid financial structure`;\n        }\n\n        if (!pass && !isNot) {\n          return (\n            `${hint}\\n\\nExpected project to have valid financial structure\\n` +\n            `Financials: ${this.utils.printReceived(project?.financials)}`\n          );\n        }\n\n        return `${hint}`;\n      },\n    };\n  },\n\n  toHaveValidTimeline(received: unknown) {\n    const { isNot } = this;\n    const project = received as ProjectData;\n\n    const timeline = project?.timeline;\n    const pass = Boolean(\n      timeline &&\n        timeline.startDate instanceof Date &&\n        timeline.endDate instanceof Date &&\n        timeline.endDate.getTime() > timeline.startDate.getTime(),\n    );\n\n    return {\n      pass,\n      message: () => {\n        const hint = this.utils.matcherHint(\n          \"toHaveValidTimeline\",\n          undefined,\n          \"\",\n          {\n            isNot,\n          },\n        );\n\n        if (pass && isNot) {\n          return `${hint}\\n\\nExpected project not to have valid timeline`;\n        }\n\n        if (!pass && !isNot) {\n          return (\n            `${hint}\\n\\nExpected project to have valid timeline\\n` +\n            `Timeline: ${this.utils.printReceived(project?.timeline)}`\n          );\n        }\n\n        return `${hint}`;\n      },\n    };\n  },\n\n  toBeFundedProject(received: unknown) {\n    const { isNot } = this;\n    const project = received as ProjectData;\n\n    const pass = Boolean(\n      project?.status === \"funded\" &&\n        project.financials?.currentAmount === project.financials?.targetAmount,\n    );\n\n    return {\n      pass,\n      message: () => {\n        const hint = this.utils.matcherHint(\n          \"toBeFundedProject\",\n          undefined,\n          \"\",\n          {\n            isNot,\n          },\n        );\n\n        if (pass && isNot) {\n          return `${hint}\\n\\nExpected project not to be funded`;\n        }\n\n        if (!pass && !isNot) {\n          return (\n            `${hint}\\n\\nExpected project to be funded\\n` +\n            `Status: ${this.utils.printReceived(project?.status)}\\n` +\n            `Current: ${this.utils.printReceived(project?.financials?.currentAmount)}\\n` +\n            `Target: ${this.utils.printReceived(project?.financials?.targetAmount)}`\n          );\n        }\n\n        return `${hint}`;\n      },\n    };\n  },\n});\n\n// Types TypeScript pour les matchers customs\ndeclare module \"vitest\" {\n  interface Assertion<T = any> {\n    toBeValidProject(): void;\n    toHaveFinancialStructure(): void;\n    toHaveValidTimeline(): void;\n    toBeFundedProject(): void;\n  }\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\middleware\\admin.integration.test.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\middleware\\auth.test.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\projects-comprehensive.test.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 35
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 41
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 25,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 25,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 25,
        "column": 32,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 25,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 26,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 26,
        "endColumn": 37
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .user on an `any` value.",
        "line": 26,
        "column": 29,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 26,
        "endColumn": 33
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 35,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 35,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 35,
        "column": 30,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 35,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 36,
        "column": 5,
        "nodeType": "AssignmentExpression",
        "messageId": "anyAssignment",
        "endLine": 36,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .user on an `any` value.",
        "line": 36,
        "column": 27,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 36,
        "endColumn": 31
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 109,
        "column": 33,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 109,
        "endColumn": 44
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 138,
        "column": 33,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 138,
        "endColumn": 44
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 173,
        "column": 25,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 173,
        "endColumn": 30
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .description on an `any` value.",
        "line": 258,
        "column": 25,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 258,
        "endColumn": 36
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 363,
        "column": 34,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 363,
        "endColumn": 45
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 370,
        "column": 42,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 370,
        "endColumn": 53
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-call",
        "severity": 2,
        "message": "Unsafe call of a(n) `error` type typed value.",
        "line": 380,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "unsafeCall",
        "endLine": 380,
        "endColumn": 57
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-call",
        "severity": 2,
        "message": "Unsafe call of a(n) `error` type typed value.",
        "line": 380,
        "column": 7,
        "nodeType": "MemberExpression",
        "messageId": "unsafeCall",
        "endLine": 380,
        "endColumn": 17
      },
      {
        "ruleId": "no-undef",
        "severity": 2,
        "message": "'jest' is not defined.",
        "line": 380,
        "column": 7,
        "nodeType": "Identifier",
        "messageId": "undef",
        "endLine": 380,
        "endColumn": 11
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .spyOn on an `error` typed value.",
        "line": 380,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 380,
        "endColumn": 17
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .mockImplementationOnce on an `error` typed value.",
        "line": 380,
        "column": 35,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 380,
        "endColumn": 57
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .details on an `any` value.",
        "line": 400,
        "column": 37,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 400,
        "endColumn": 44
      }
    ],
    "suppressedMessages": [],
    "errorCount": 22,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { beforeEach, describe, expect, it } from 'vitest';\r\nimport { request } from './setup';\r\nimport User from '../models/User';\r\nimport Project from '../models/Project';\r\nimport jwt from 'jsonwebtoken';\r\n\r\ndescribe('Projects Comprehensive Coverage', () => {\r\n  let adminToken: string;\r\n  let userToken: string;\r\n  let userId: string;\r\n  let adminId: string;\r\n\r\n  beforeEach(async () => {\r\n    await User.deleteMany({});\r\n    await Project.deleteMany({});\r\n\r\n    // Create admin user\r\n    const adminReg = await request.post('/api/auth/register').send({\r\n      email: 'admin@test.com',\r\n      password: 'admin1234',\r\n      firstName: 'Admin',\r\n      lastName: 'User',\r\n      role: 'admin'\r\n    });\r\n    adminToken = adminReg.body.token;\r\n    adminId = adminReg.body.user._id;\r\n\r\n    // Create regular user\r\n    const userReg = await request.post('/api/auth/register').send({\r\n      email: 'user@test.com',\r\n      password: 'user1234',\r\n      firstName: 'Regular',\r\n      lastName: 'User'\r\n    });\r\n    userToken = userReg.body.token;\r\n    userId = userReg.body.user._id;\r\n  });\r\n\r\n  describe('Authentication & Authorization', () => {\r\n    describe('Token Validation', () => {\r\n      it('should reject expired tokens', async () => {\r\n        const expiredToken = jwt.sign(\r\n          { userId: userId, role: 'user' },\r\n          process.env.JWT_SECRET || 'test-secret',\r\n          { expiresIn: '-1h' }\r\n        );\r\n\r\n        const res = await request\r\n          .get('/api/projects')\r\n          .set('Authorization', `Bearer ${expiredToken}`);\r\n\r\n        expect(res.status).toBe(401);\r\n      });\r\n\r\n      it('should reject malformed tokens', async () => {\r\n        const res = await request\r\n          .get('/api/projects')\r\n          .set('Authorization', 'Bearer invalid-token-format');\r\n\r\n        expect(res.status).toBe(401);\r\n      });\r\n\r\n      it('should reject tokens with invalid signature', async () => {\r\n        const invalidToken = jwt.sign(\r\n          { userId: userId, role: 'user' },\r\n          'wrong-secret-key',\r\n          { expiresIn: '1h' }\r\n        );\r\n\r\n        const res = await request\r\n          .get('/api/projects')\r\n          .set('Authorization', `Bearer ${invalidToken}`);\r\n\r\n        expect(res.status).toBe(401);\r\n      });\r\n    });\r\n\r\n    describe('Role-Based Access Control', () => {\r\n      it('should allow admin to access all projects', async () => {\r\n        const res = await request\r\n          .get('/api/projects')\r\n          .set('Authorization', `Bearer ${adminToken}`);\r\n\r\n        expect(res.status).toBe(200);\r\n      });\r\n\r\n      it('should allow project owner to modify their projects', async () => {\r\n        const project = await Project.create({\r\n          name: 'User Project',\r\n          description: 'User owned project',\r\n          type: 'residential',\r\n          createdBy: userId,\r\n          financials: {\r\n            totalInvestment: 10000,\r\n            targetAmount: 20000,\r\n            currentAmount: 0,\r\n            expectedReturn: 5,\r\n            duration: 12,\r\n            entryTicket: 1000\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n            milestones: []\r\n          }\r\n        });\r\n\r\n        const res = await request\r\n          .put(`/api/projects/${project._id}`)\r\n          .set('Authorization', `Bearer ${userToken}`)\r\n          .send({ name: 'Updated Name' });\r\n\r\n        expect(res.status).toBe(200);\r\n      });\r\n\r\n      it('should prevent non-owners from modifying projects', async () => {\r\n        const project = await Project.create({\r\n          name: 'Admin Project',\r\n          description: 'Admin owned project',\r\n          type: 'residential',\r\n          createdBy: adminId,\r\n          financials: {\r\n            totalInvestment: 10000,\r\n            targetAmount: 20000,\r\n            currentAmount: 0,\r\n            expectedReturn: 5,\r\n            duration: 12,\r\n            entryTicket: 1000\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n            milestones: []\r\n          }\r\n        });\r\n\r\n        const res = await request\r\n          .put(`/api/projects/${project._id}`)\r\n          .set('Authorization', `Bearer ${userToken}`)\r\n          .send({ name: 'Should Fail' });\r\n\r\n        expect(res.status).toBe(403);\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Business Logic Validation', () => {\r\n    describe('Financial Validation', () => {\r\n      it('should validate entryTicket < targetAmount', async () => {\r\n        const res = await request\r\n          .post('/api/projects')\r\n          .set('Authorization', `Bearer ${userToken}`)\r\n          .send({\r\n            name: 'Invalid Financial Project',\r\n            description: 'Test',\r\n            type: 'residential',\r\n            financials: {\r\n              totalInvestment: 10000,\r\n              targetAmount: 5000,\r\n              currentAmount: 0,\r\n              expectedReturn: 5,\r\n              duration: 12,\r\n              entryTicket: 10000\r\n            },\r\n            timeline: {\r\n              startDate: new Date(),\r\n              endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n              milestones: []\r\n            }\r\n          });\r\n\r\n        expect(res.status).toBe(400);\r\n        expect(res.body.error).toMatch(/entryTicket.*must.*less.*targetAmount/i);\r\n      });\r\n\r\n      it('should validate positive financial values', async () => {\r\n        const res = await request\r\n          .post('/api/projects')\r\n          .set('Authorization', `Bearer ${userToken}`)\r\n          .send({\r\n            name: 'Negative Financial Project',\r\n            description: 'Test',\r\n            type: 'residential',\r\n            financials: {\r\n              totalInvestment: -1000,\r\n              targetAmount: 5000,\r\n              currentAmount: 0,\r\n              expectedReturn: 5,\r\n              duration: 12,\r\n              entryTicket: 1000\r\n            },\r\n            timeline: {\r\n              startDate: new Date(),\r\n              endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n              milestones: []\r\n            }\r\n          });\r\n\r\n        expect(res.status).toBe(400);\r\n      });\r\n    });\r\n\r\n    describe('Timeline Validation', () => {\r\n      it('should validate endDate > startDate', async () => {\r\n        const res = await request\r\n          .post('/api/projects')\r\n          .set('Authorization', `Bearer ${userToken}`)\r\n          .send({\r\n            name: 'Invalid Timeline Project',\r\n            description: 'Test',\r\n            type: 'residential',\r\n            financials: {\r\n              totalInvestment: 10000,\r\n              targetAmount: 20000,\r\n              currentAmount: 0,\r\n              expectedReturn: 5,\r\n              duration: 12,\r\n              entryTicket: 1000\r\n            },\r\n            timeline: {\r\n              startDate: new Date('2025-01-01'),\r\n              endDate: new Date('2024-01-01'),\r\n              milestones: []\r\n            }\r\n          });\r\n\r\n        expect(res.status).toBe(400);\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Security Tests', () => {\r\n    describe('Input Sanitization', () => {\r\n      it('should sanitize XSS attempts in description', async () => {\r\n        const res = await request\r\n          .post('/api/projects')\r\n          .set('Authorization', `Bearer ${userToken}`)\r\n          .send({\r\n            name: 'XSS Test Project',\r\n            description: '<script>alert(\"XSS\")</script>',\r\n            type: 'residential',\r\n            financials: {\r\n              totalInvestment: 10000,\r\n              targetAmount: 20000,\r\n              currentAmount: 0,\r\n              expectedReturn: 5,\r\n              duration: 12,\r\n              entryTicket: 1000\r\n            },\r\n            timeline: {\r\n              startDate: new Date(),\r\n              endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n              milestones: []\r\n            }\r\n          });\r\n\r\n        expect(res.status).toBe(201);\r\n        expect(res.body.description).not.toContain('<script>');\r\n      });\r\n\r\n      it('should prevent SQL injection in search queries', async () => {\r\n        const res = await request\r\n          .get('/api/projects?name=\\' OR 1=1--')\r\n          .set('Authorization', `Bearer ${userToken}`);\r\n\r\n        expect(res.status).toBe(200);\r\n        expect(Array.isArray(res.body)).toBe(true);\r\n      });\r\n    });\r\n\r\n    describe('Rate Limiting', () => {\r\n      it('should handle concurrent requests', async () => {\r\n        const requests = Array(10).fill(null).map(() =>\r\n          request\r\n            .get('/api/projects')\r\n            .set('Authorization', `Bearer ${userToken}`)\r\n        );\r\n\r\n        const responses = await Promise.all(requests);\r\n        responses.forEach(res => {\r\n          expect(res.status).toBe(200);\r\n        });\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Performance Tests', () => {\r\n    it('should handle pagination efficiently', async () => {\r\n      // Create 50 test projects\r\n      const projects = Array(50).fill(null).map((_, i) => ({\r\n        name: `Test Project ${i}`,\r\n        description: `Description ${i}`,\r\n        type: 'residential',\r\n        createdBy: userId,\r\n        financials: {\r\n          totalInvestment: 10000 + i,\r\n          targetAmount: 20000 + i,\r\n          currentAmount: 0,\r\n          expectedReturn: 5 + (i % 10),\r\n          duration: 12,\r\n          entryTicket: 1000 + i\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        }\r\n      }));\r\n\r\n      await Project.insertMany(projects);\r\n\r\n      const res = await request\r\n        .get('/api/projects?page=1&limit=10')\r\n        .set('Authorization', `Bearer ${userToken}`);\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveLength(10);\r\n    });\r\n\r\n    it('should handle large file uploads', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${userToken}`)\r\n        .attach('documents', Buffer.alloc(1024 * 1024), 'test.pdf') // 1MB file\r\n        .field('name', 'File Upload Test')\r\n        .field('description', 'Testing file upload')\r\n        .field('type', 'residential');\r\n\r\n      expect(res.status).toBe(201);\r\n    });\r\n  });\r\n\r\n  describe('Integration Tests', () => {\r\n    it('should cascade delete related donations when project is deleted', async () => {\r\n      const project = await Project.create({\r\n        name: 'Cascade Test Project',\r\n        description: 'Testing cascade delete',\r\n        type: 'residential',\r\n        createdBy: userId,\r\n        financials: {\r\n          totalInvestment: 10000,\r\n          targetAmount: 20000,\r\n          currentAmount: 0,\r\n          expectedReturn: 5,\r\n          duration: 12,\r\n          entryTicket: 1000\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        }\r\n      });\r\n\r\n      // Create related donations\r\n      await request.post('/api/donations').set('Authorization', `Bearer ${userToken}`).send({\r\n        projectId: project._id,\r\n        amount: 1000,\r\n        donorId: userId\r\n      });\r\n\r\n      const deleteRes = await request\r\n        .delete(`/api/projects/${project._id}`)\r\n        .set('Authorization', `Bearer ${adminToken}`);\r\n\r\n      expect(deleteRes.status).toBe(200);\r\n\r\n      // Verify donations are also deleted\r\n      const donationsRes = await request\r\n        .get(`/api/donations?projectId=${project._id}`)\r\n        .set('Authorization', `Bearer ${adminToken}`);\r\n\r\n      expect(donationsRes.body).toHaveLength(0);\r\n    });\r\n  });\r\n\r\n  describe('Error Handling', () => {\r\n    it('should handle database connection errors gracefully', async () => {\r\n      // Mock database error\r\n      jest.spyOn(Project, 'find').mockImplementationOnce(() => {\r\n        throw new Error('Database connection failed');\r\n      });\r\n\r\n      const res = await request\r\n        .get('/api/projects')\r\n        .set('Authorization', `Bearer ${userToken}`);\r\n\r\n      expect(res.status).toBe(500);\r\n      expect(res.body).toHaveProperty('error');\r\n    });\r\n\r\n    it('should handle validation errors with detailed messages', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${userToken}`)\r\n        .send({});\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(Array.isArray(res.body.details)).toBe(true);\r\n    });\r\n  });\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\projects-edge-cases.test.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 41
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 21,
        "column": 22,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 21,
        "endColumn": 27
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .user on an `any` value.",
        "line": 22,
        "column": 24,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 22,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 55,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 55,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 87,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 87,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 112,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 112,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 132,
        "column": 25,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 132,
        "endColumn": 30
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 166,
        "column": 31,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 166,
        "endColumn": 42
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 174,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 174,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 189,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 189,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 203,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 203,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 213,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 213,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 248,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 248,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .error on an `any` value.",
        "line": 281,
        "column": 23,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 281,
        "endColumn": 28
      }
    ],
    "suppressedMessages": [],
    "errorCount": 14,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, expect, it } from 'vitest';\r\nimport { request } from './setup';\r\nimport Project from '../models/Project';\r\nimport User from '../models/User';\r\n\r\ndescribe('Project Management - Edge Cases', () => {\r\n  let token: string;\r\n  let userId: string;\r\n\r\n  beforeEach(async () => {\r\n    await User.deleteMany({});\r\n    await Project.deleteMany({});\r\n\r\n    const reg = await request.post('/api/auth/register').send({\r\n      email: 'edgecase@tenant.com',\r\n      password: 'pass1234',\r\n      firstName: 'Edge',\r\n      lastName: 'Case'\r\n    });\r\n\r\n    token = reg.body.token as string;\r\n    userId = (reg.body.user as { _id: string })._id;\r\n  });\r\n\r\n  describe('POST /api/projects - Missing required fields', () => {\r\n    it(' should fail when \"name\" field is missing', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          description: 'Projet test sans nom',\r\n          type: 'residential',\r\n          location: {\r\n            address: '123 Test St',\r\n            city: 'Test City',\r\n            postalCode: '12345'\r\n          },\r\n          financials: {\r\n            totalInvestment: 100000,\r\n            targetAmount: 50000,\r\n            currentAmount: 0,\r\n            expectedReturn: 5,\r\n            duration: 12,\r\n            entryTicket: 1000\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(),\r\n            milestones: []\r\n          }\r\n        });\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/name.*required/i);\r\n    });\r\n\r\n    it(' should fail when \"type\" field is missing', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          name: 'Test Project',\r\n          description: 'Projet test sans type',\r\n          location: {\r\n            address: '123 Test St',\r\n            city: 'Test City',\r\n            postalCode: '12345'\r\n          },\r\n          financials: {\r\n            totalInvestment: 100000,\r\n            targetAmount: 50000,\r\n            currentAmount: 0,\r\n            expectedReturn: 5,\r\n            duration: 12,\r\n            entryTicket: 1000\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(),\r\n            milestones: []\r\n          }\r\n        });\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/type.*required/i);\r\n    });\r\n\r\n    it(' should fail when \"financials\" object is missing', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          name: 'Test Project',\r\n          description: 'Projet test sans financials',\r\n          type: 'residential',\r\n          location: {\r\n            address: '123 Test St',\r\n            city: 'Test City',\r\n            postalCode: '12345'\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(),\r\n            milestones: []\r\n          }\r\n        });\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/financials.*required/i);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/projects/:id - Invalid ID format', () => {\r\n    it(' should return 400 for malformed MongoDB ObjectId', async () => {\r\n      const invalidIds = [\r\n        '123', // too short\r\n        '507f1f77bcf86cd799439011123', // too long\r\n        'not-a-valid-id', // invalid characters\r\n        '507f1f77bcf86cd79943901g', // invalid hex character\r\n      ];\r\n\r\n      for (const invalidId of invalidIds) {\r\n        const res = await request\r\n          .get(`/api/projects/${invalidId}`)\r\n          .set('Authorization', `Bearer ${token}`);\r\n\r\n        expect(res.status).toBe(400);\r\n        expect(res.body).toHaveProperty('error');\r\n        expect(res.body.error).toMatch(/invalid.*id/i);\r\n      }\r\n    });\r\n  });\r\n\r\n  describe('PUT /api/projects/:id - Invalid updates', () => {\r\n    it(' should fail when updating with invalid status value', async () => {\r\n      const project = await Project.create({\r\n        name: 'Update Test Project',\r\n        description: 'Testing invalid updates',\r\n        type: 'residential',\r\n        location: {\r\n          address: '123 Update St',\r\n          city: 'Update City',\r\n          postalCode: '12345'\r\n        },\r\n        financials: {\r\n          totalInvestment: 10000,\r\n          targetAmount: 20000,\r\n          currentAmount: 0,\r\n          expectedReturn: 6.5,\r\n          duration: 3,\r\n          entryTicket: 100\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(),\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        createdBy: userId\r\n      });\r\n\r\n      const res = await request\r\n        .put(`/api/projects/${project._id}`)\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          status: 'invalid_status_value'\r\n        });\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/status.*invalid/i);\r\n    });\r\n\r\n    it(' should fail when updating non-existent project', async () => {\r\n      const nonExistentId = '507f1f77bcf86cd799439011';\r\n      \r\n      const res = await request\r\n        .put(`/api/projects/${nonExistentId}`)\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          name: 'Updated Name'\r\n        });\r\n\r\n      expect(res.status).toBe(404);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/project.*not found/i);\r\n    });\r\n  });\r\n\r\n  describe('DELETE /api/projects/:id - Edge cases', () => {\r\n    it(' should fail when deleting non-existent project', async () => {\r\n      const nonExistentId = '507f1f77bcf86cd799439011';\r\n      \r\n      const res = await request\r\n        .delete(`/api/projects/${nonExistentId}`)\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(404);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/project.*not found/i);\r\n    });\r\n\r\n    it(' should fail with 400 for malformed ID on delete', async () => {\r\n      const res = await request\r\n        .delete('/api/projects/invalid-id')\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/invalid.*id/i);\r\n    });\r\n  });\r\n\r\n  describe('Data validation edge cases', () => {\r\n    it(' should fail when financials.totalInvestment is negative', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          name: 'Negative Investment Project',\r\n          description: 'Testing negative investment',\r\n          type: 'residential',\r\n          location: {\r\n            address: '123 Test St',\r\n            city: 'Test City',\r\n            postalCode: '12345'\r\n          },\r\n          financials: {\r\n            totalInvestment: -1000, // Negative value\r\n            targetAmount: 50000,\r\n            currentAmount: 0,\r\n            expectedReturn: 5,\r\n            duration: 12,\r\n            entryTicket: 1000\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(),\r\n            milestones: []\r\n          }\r\n        });\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/totalInvestment.*positive/i);\r\n    });\r\n\r\n    it(' should fail when timeline.startDate is after endDate', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          name: 'Invalid Timeline Project',\r\n          description: 'Testing invalid timeline',\r\n          type: 'residential',\r\n          location: {\r\n            address: '123 Test St',\r\n            city: 'Test City',\r\n            postalCode: '12345'\r\n          },\r\n          financials: {\r\n            totalInvestment: 10000,\r\n            targetAmount: 50000,\r\n            currentAmount: 0,\r\n            expectedReturn: 5,\r\n            duration: 12,\r\n            entryTicket: 1000\r\n          },\r\n          timeline: {\r\n            startDate: new Date('2025-01-01'), // After end date\r\n            endDate: new Date('2024-01-01'),\r\n            milestones: []\r\n          }\r\n        });\r\n\r\n      expect(res.status).toBe(400);\r\n      expect(res.body).toHaveProperty('error');\r\n      expect(res.body.error).toMatch(/startDate.*before.*endDate/i);\r\n    });\r\n  });\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\projects.test.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 35
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 41
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 21,
        "column": 22,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 21,
        "endColumn": 27
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .user on an `any` value.",
        "line": 22,
        "column": 24,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 22,
        "endColumn": 28
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 132,
        "column": 31,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 132,
        "endColumn": 42
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 179,
        "column": 31,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 179,
        "endColumn": 42
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 217,
        "column": 31,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 217,
        "endColumn": 42
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 255,
        "column": 34,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 255,
        "endColumn": 45
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 289,
        "column": 34,
        "nodeType": "MemberExpression",
        "messageId": "invalidType",
        "endLine": 289,
        "endColumn": 45
      }
    ],
    "suppressedMessages": [],
    "errorCount": 9,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { beforeEach, describe, expect, it } from 'vitest';\r\nimport { request } from './setup';\r\nimport User from '../models/User';\r\nimport Project from '../models/Project';\r\n\r\ndescribe('Project Management', () => {\r\n  let token: string;\r\n  let userId: string;\r\n\r\n  beforeEach(async () => {\r\n    await User.deleteMany({});\r\n    await Project.deleteMany({});\r\n\r\n    const reg = await request.post('/api/auth/register').send({\r\n      email: 'user@tenant.com',\r\n      password: 'pass1234',\r\n      firstName: 'Test',\r\n      lastName: 'User'\r\n    });\r\n\r\n    token = reg.body.token as string;\r\n    userId = (reg.body.user as { _id: string })._id;\r\n  });\r\n\r\n  describe('GET /api/projects', () => {\r\n    it('should get all projects', async () => {\r\n      const res = await request\r\n        .get('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(Array.isArray(res.body)).toBe(true);\r\n    });\r\n\r\n    it('should return empty array when no projects', async () => {\r\n      const res = await request\r\n        .get('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveLength(0);\r\n    });\r\n  });\r\n\r\n  describe('POST /api/projects', () => {\r\n    it('should create a new project with valid data', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          name: 'Test Project',\r\n          description: 'A test project',\r\n          type: 'residential',\r\n          location: {\r\n            address: '123 Test St',\r\n            city: 'Test City',\r\n            postalCode: '12345'\r\n          },\r\n          financials: {\r\n            totalInvestment: 50000,\r\n            targetAmount: 100000,\r\n            currentAmount: 0,\r\n            expectedReturn: 8.5,\r\n            duration: 12,\r\n            entryTicket: 1000\r\n          },\r\n          timeline: {\r\n            startDate: new Date(),\r\n            endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n            milestones: []\r\n          },\r\n          status: 'active',\r\n          createdBy: userId\r\n        });\r\n\r\n      expect(res.status).toBe(201);\r\n      expect(res.body).toHaveProperty('name', 'Test Project');\r\n      expect(res.body).toHaveProperty('_id');\r\n    });\r\n\r\n    it('should not create project without authentication', async () => {\r\n      const res = await request.post('/api/projects').send({\r\n        name: 'Test Project',\r\n        description: 'A test project'\r\n      });\r\n\r\n      expect(res.status).toBe(401);\r\n    });\r\n\r\n    it('should not create project with invalid data', async () => {\r\n      const res = await request\r\n        .post('/api/projects')\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          name: '',\r\n          description: 'A test project'\r\n        });\r\n\r\n      expect(res.status).toBe(400);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/projects/:id', () => {\r\n    it('should get project by id', async () => {\r\n      const project = await Project.create({\r\n        name: 'Test Project',\r\n        description: 'A test project',\r\n        type: 'residential',\r\n        location: {\r\n          address: '123 Test St',\r\n          city: 'Test City',\r\n          postalCode: '12345'\r\n        },\r\n        financials: {\r\n          totalInvestment: 50000,\r\n          targetAmount: 100000,\r\n          currentAmount: 0,\r\n          expectedReturn: 8.5,\r\n          duration: 12,\r\n          entryTicket: 1000\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        createdBy: userId\r\n      });\r\n\r\n      const res = await request\r\n        .get(`/api/projects/${project._id}`)\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveProperty('name', 'Test Project');\r\n    });\r\n\r\n    it('should return 404 for non-existent project', async () => {\r\n      const nonExistentId = '507f1f77bcf86cd799439011';\r\n      \r\n      const res = await request\r\n        .get(`/api/projects/${nonExistentId}`)\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(404);\r\n    });\r\n  });\r\n\r\n  describe('PUT /api/projects/:id', () => {\r\n    it('should update project status', async () => {\r\n      const project = await Project.create({\r\n        name: 'Update Test Project',\r\n        description: 'Testing updates',\r\n        type: 'residential',\r\n        location: {\r\n          address: '123 Update St',\r\n          city: 'Update City',\r\n          postalCode: '12345'\r\n        },\r\n        financials: {\r\n          totalInvestment: 10000,\r\n          targetAmount: 20000,\r\n          currentAmount: 0,\r\n          expectedReturn: 6.5,\r\n          duration: 3,\r\n          entryTicket: 100\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        createdBy: userId\r\n      });\r\n\r\n      const res = await request\r\n        .put(`/api/projects/${project._id}`)\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          status: 'completed'\r\n        });\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveProperty('status', 'completed');\r\n    });\r\n\r\n    it('should not update project without authentication', async () => {\r\n      const project = await Project.create({\r\n        name: 'Update Test Project',\r\n        description: 'Testing updates',\r\n        type: 'residential',\r\n        location: {\r\n          address: '123 Update St',\r\n          city: 'Update City',\r\n          postalCode: '12345'\r\n        },\r\n        financials: {\r\n          totalInvestment: 10000,\r\n          targetAmount: 20000,\r\n          currentAmount: 0,\r\n          expectedReturn: 6.5,\r\n          duration: 3,\r\n          entryTicket: 100\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        createdBy: userId\r\n      });\r\n\r\n      const res = await request\r\n        .put(`/api/projects/${project._id}`)\r\n        .send({\r\n          status: 'completed'\r\n        });\r\n\r\n      expect(res.status).toBe(401);\r\n    });\r\n  });\r\n\r\n  describe('DELETE /api/projects/:id', () => {\r\n    it('should delete project with valid id', async () => {\r\n      const project = await Project.create({\r\n        name: 'Delete Test Project',\r\n        description: 'Testing deletion',\r\n        type: 'residential',\r\n        location: {\r\n          address: '123 Delete St',\r\n          city: 'Delete City',\r\n          postalCode: '11111'\r\n        },\r\n        financials: {\r\n          totalInvestment: 10000,\r\n          targetAmount: 20000,\r\n          currentAmount: 0,\r\n          expectedReturn: 6.5,\r\n          duration: 3,\r\n          entryTicket: 100\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        createdBy: userId\r\n      });\r\n\r\n      const res = await request\r\n        .delete(`/api/projects/${project._id}`)\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(200);\r\n    });\r\n\r\n    it('should not delete project without authentication', async () => {\r\n      const project = await Project.create({\r\n        name: 'Delete Test Project',\r\n        description: 'Testing deletion',\r\n        type: 'residential',\r\n        location: {\r\n          address: '123 Delete St',\r\n          city: 'Delete City',\r\n          postalCode: '11111'\r\n        },\r\n        financials: {\r\n          totalInvestment: 10000,\r\n          targetAmount: 20000,\r\n          currentAmount: 0,\r\n          expectedReturn: 6.5,\r\n          duration: 3,\r\n          entryTicket: 100\r\n        },\r\n        timeline: {\r\n          startDate: new Date(),\r\n          endDate: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000),\r\n          milestones: []\r\n        },\r\n        status: 'active',\r\n        createdBy: userId\r\n      });\r\n\r\n      const res = await request\r\n        .delete(`/api/projects/${project._id}`);\r\n\r\n      expect(res.status).toBe(401);\r\n    });\r\n  });\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\projects_integration.test.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'User' is assigned a value but never used.",
        "line": 5,
        "column": 18,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 5,
        "endColumn": 22,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "User" },
            "fix": { "range": [207, 213], "text": "" },
            "desc": "Remove unused variable 'User'."
          }
        ]
      },
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'response' is assigned a value but never used.",
        "line": 103,
        "column": 13,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 103,
        "endColumn": 21,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "response" },
            "fix": { "range": [3108, 3254], "text": "" },
            "desc": "Remove unused variable 'response'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 2,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "const request = require(\"supertest\");\nconst app = require(\"../server\");\nconst { sequelize } = require(\"../database/connection\");\nconst { createProject, createUser } = require(\"../factories\");\nconst { Project, User } = require(\"../models\");\n\ndescribe(\"Projects API Integration Tests\", () => {\n  let authToken;\n  let testUser;\n\n  beforeAll(async () => {\n    await sequelize.sync({ force: true });\n    testUser = await createUser({ role: \"investor\" });\n    authToken = testUser.generateAuthToken();\n  });\n\n  afterAll(async () => {\n    await sequelize.close();\n  });\n\n  beforeEach(async () => {\n    await Project.destroy({ where: {} });\n  });\n\n  describe(\"POST /api/projects\", () => {\n    it(\"should create a new project\", async () => {\n      const projectData = {\n        name: \"Test Project\",\n        description: \"Test Description\",\n        targetAmount: 100000,\n        minimumInvestment: 1000,\n        duration: 12,\n        expectedReturn: 8.5,\n        riskLevel: \"medium\",\n        category: \"residential\",\n      };\n\n      const response = await request(app)\n        .post(\"/api/projects\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .send(projectData)\n        .expect(201);\n\n      expect(response.body).toHaveProperty(\"id\");\n      expect(response.body.name).toBe(projectData.name);\n      expect(response.body.status).toBe(\"active\");\n    });\n\n    it(\"should return 400 for invalid project data\", async () => {\n      const response = await request(app)\n        .post(\"/api/projects\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .send({ name: \"Incomplete\" })\n        .expect(400);\n\n      expect(response.body).toHaveProperty(\"error\");\n    });\n  });\n\n  describe(\"GET /api/projects\", () => {\n    it(\"should return all projects\", async () => {\n      await createProject({ status: \"active\" });\n      await createProject({ status: \"funded\" });\n\n      const response = await request(app)\n        .get(\"/api/projects\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .expect(200);\n\n      expect(response.body).toHaveLength(2);\n      expect(response.body[0]).toHaveProperty(\"id\");\n      expect(response.body[0]).toHaveProperty(\"name\");\n    });\n\n    it(\"should filter projects by status\", async () => {\n      await createProject({ status: \"active\" });\n      await createProject({ status: \"funded\" });\n\n      const response = await request(app)\n        .get(\"/api/projects?status=active\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .expect(200);\n\n      expect(response.body).toHaveLength(1);\n      expect(response.body[0].status).toBe(\"active\");\n    });\n  });\n\n  describe(\"GET /api/projects/:id\", () => {\n    it(\"should return a specific project\", async () => {\n      const project = await createProject();\n\n      const response = await request(app)\n        .get(`/api/projects/${project.id}`)\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .expect(200);\n\n      expect(response.body.id).toBe(project.id);\n      expect(response.body.name).toBe(project.name);\n    });\n\n    it(\"should return 404 for non-existent project\", async () => {\n      const response = await request(app)\n        .get(\"/api/projects/99999\")\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .expect(404);\n    });\n  });\n\n  describe(\"PUT /api/projects/:id\", () => {\n    it(\"should update a project\", async () => {\n      const project = await createProject();\n\n      const updateData = {\n        name: \"Updated Project Name\",\n        targetAmount: 200000,\n      };\n\n      const response = await request(app)\n        .put(`/api/projects/${project.id}`)\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .send(updateData)\n        .expect(200);\n\n      expect(response.body.name).toBe(updateData.name);\n      expect(response.body.targetAmount).toBe(updateData.targetAmount);\n    });\n  });\n\n  describe(\"DELETE /api/projects/:id\", () => {\n    it(\"should delete a project\", async () => {\n      const project = await createProject();\n\n      await request(app)\n        .delete(`/api/projects/${project.id}`)\n        .set(\"Authorization\", `Bearer ${authToken}`)\n        .expect(204);\n\n      const deletedProject = await Project.findByPk(project.id);\n      expect(deletedProject).toBeNull();\n    });\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\projects_test.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 5,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 5,
        "endColumn": 26
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { afterAll, beforeAll, beforeEach } from 'vitest';\nimport { MongoMemoryServer } from 'mongodb-memory-server';\nimport mongoose from 'mongoose';\nimport supertest from 'supertest';\nimport app from '../app';\n\nlet mongo: MongoMemoryServer;\nexport const request = supertest(app);\n\nbeforeAll(async () => {\n  mongo = await MongoMemoryServer.create();\n  const mongoUri = mongo.getUri();\n  await mongoose.connect(mongoUri);\n});\n\nbeforeEach(async () => {\n  const collections = mongoose.connection.collections;\n  for (const key in collections) {\n    const collection = collections[key];\n    if (collection) {\n      await collection.deleteMany({});\n    }\n  }\n});\n\nafterAll(async () => {\n  await mongoose.connection.dropDatabase();\n  await mongoose.connection.close();\n  await mongo.stop();\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup\\env-setup.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'bcrypt' is defined but never used.",
        "line": 3,
        "column": 8,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 3,
        "endColumn": 14,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "bcrypt" },
            "fix": { "range": [81, 93], "text": "" },
            "desc": "Remove unused variable 'bcrypt'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import mongoose from \"mongoose\";\nimport User from \"../../models/User.js\";\nimport bcrypt from \"bcryptjs\";\n\nexport async function setupTestDB() {\n  // Connect to the test database\n  if (mongoose.connection.readyState === 0) {\n    await mongoose.connect(\n      process.env.MONGO_URI_TEST || \"mongodb://localhost:27017/testdb\",\n    );\n  }\n}\n\nexport async function clearTestDB() {\n  // Clear collections before each test\n  const collections = Object.keys(mongoose.connection.collections);\n  for (const collectionName of collections) {\n    const collection = mongoose.connection.collections[collectionName];\n    await collection.deleteMany({});\n  }\n}\n\nexport async function seedAdminUser() {\n  // Create an admin user for tests\n  const existingAdmin = await User.findOne({ email: \"admin@test.com\" });\n  if (!existingAdmin) {\n    const adminUser = new User({\n      email: \"admin@test.com\",\n      password: \"AdminPass123!\",\n      role: \"admin\",\n      username: \"admin\",\n      profile: {\n        firstName: \"Admin\",\n        lastName: \"User\",\n      },\n    });\n    await adminUser.save();\n  }\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup\\global-setup.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup\\mongo-memory-server.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unsafe-enum-comparison",
        "severity": 2,
        "message": "The two values in this comparison do not have a shared enum type.",
        "line": 11,
        "column": 9,
        "nodeType": "BinaryExpression",
        "messageId": "mismatchedCondition",
        "endLine": 11,
        "endColumn": 45,
        "suggestions": [
          {
            "messageId": "replaceValueWithEnum",
            "fix": {
              "range": [333, 334],
              "text": "ConnectionStates.connected"
            },
            "desc": "Replace with an enum value comparison."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-enum-comparison",
        "severity": 2,
        "message": "The two values in this comparison do not have a shared enum type.",
        "line": 17,
        "column": 9,
        "nodeType": "BinaryExpression",
        "messageId": "mismatchedCondition",
        "endLine": 17,
        "endColumn": 45,
        "suggestions": [
          {
            "messageId": "replaceValueWithEnum",
            "fix": {
              "range": [512, 513],
              "text": "ConnectionStates.disconnected"
            },
            "desc": "Replace with an enum value comparison."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-enum-comparison",
        "severity": 2,
        "message": "The two values in this comparison do not have a shared enum type.",
        "line": 55,
        "column": 24,
        "nodeType": "BinaryExpression",
        "messageId": "mismatchedCondition",
        "endLine": 55,
        "endColumn": 60,
        "suggestions": [
          {
            "messageId": "replaceValueWithEnum",
            "fix": {
              "range": [1514, 1515],
              "text": "ConnectionStates.connected"
            },
            "desc": "Replace with an enum value comparison."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 3,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { afterAll, afterEach, beforeAll } from \"vitest\";\nimport { MongoMemoryServer } from \"mongodb-memory-server\";\nimport mongoose from \"mongoose\";\n\nlet mongoServer: MongoMemoryServer;\nlet isConnected = false;\n\nbeforeAll(async () => {\n  try {\n    // Check if mongoose is already connected\n    if (mongoose.connection.readyState === 1) {\n      console.log(\"Already connected to MongoDB\");\n      return;\n    }\n\n    // Ensure any existing connections are properly closed\n    if (mongoose.connection.readyState !== 0) {\n      await mongoose.disconnect();\n    }\n\n    // Add a small delay to ensure cleanup\n    await new Promise((resolve) => setTimeout(resolve, 100));\n\n    // Start MongoDB Memory Server\n    mongoServer = await MongoMemoryServer.create({\n      instance: { dbName: \"test_db\" },\n    });\n\n    const mongoUri = mongoServer.getUri();\n\n    // Configure mongoose with better connection settings\n    await mongoose.connect(mongoUri, {\n      maxPoolSize: 10,\n      serverSelectionTimeoutMS: 10000,\n      socketTimeoutMS: 45000,\n      bufferCommands: false,\n    });\n\n    isConnected = true;\n    console.log(\"Connected to MongoDB Memory Server\");\n  } catch (err) {\n    console.error(\"Failed to connect to test database:\", err);\n    // Try to cleanup on failure\n    try {\n      await mongoose.disconnect();\n    } catch (cleanupErr) {\n      console.error(\"Cleanup error:\", cleanupErr);\n    }\n    throw err;\n  }\n}, 30_000);\n\nafterEach(async () => {\n  try {\n    if (isConnected && mongoose.connection.readyState === 1) {\n      const collections = mongoose.connection.collections;\n      const deletePromises = Object.values(collections).map((collection) =>\n        collection\n          .deleteMany({})\n          .catch((err) => console.error(\"Collection cleanup error:\", err)),\n      );\n      await Promise.all(deletePromises);\n    }\n  } catch (err) {\n    console.error(\"Error in afterEach cleanup:\", err);\n  }\n});\n\nafterAll(async () => {\n  try {\n    if (isConnected) {\n      await mongoose.connection\n        .dropDatabase()\n        .catch((err) => console.error(\"Drop database error:\", err));\n      await mongoose.disconnect();\n      isConnected = false;\n    }\n\n    if (mongoServer) {\n      await mongoServer.stop();\n    }\n    console.log(\"MongoDB Memory Server stopped\");\n  } catch (err) {\n    console.error(\"Error during test cleanup:\", err);\n  }\n}, 30_000);\n\nexport { mongoServer };\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup\\mongoMemoryServer.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup\\test-setup.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 33
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { afterAll, afterEach, beforeAll } from \"vitest\";\r\nimport { MongoMemoryServer } from \"mongodb-memory-server\";\r\nimport mongoose from \"mongoose\";\r\nimport { config } from \"dotenv\";\r\nimport path from \"path\";\r\n\r\n// Load environment variables from .env.test\r\nconst envPath = path.resolve(process.cwd(), '.env.test');\r\nconfig({ path: envPath });\r\n\r\n// Ensure JWT secrets are set for testing\r\nif (!process.env.JWT_SECRET) {\r\n  process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\r\n}\r\nif (!process.env.JWT_REFRESH_SECRET) {\r\n  process.env.JWT_REFRESH_SECRET = 'test-jwt-refresh-secret-key-for-testing-only';\r\n}\r\n\r\nlet mongoServer: MongoMemoryServer;\r\n\r\n// Global connection state constants\r\nconst DISCONNECTED = 0;\r\nconst CONNECTED = 1;\r\n\r\n// Single connection for all tests\r\nbeforeAll(async () => {\r\n  try {\r\n    // Close any existing connections\r\n    const readyState = mongoose.connection.readyState as number;\r\n    if (readyState !== DISCONNECTED) {\r\n      await mongoose.connection.close();\r\n    }\r\n\r\n    // Start MongoDB Memory Server\r\n    mongoServer = await MongoMemoryServer.create({\r\n      instance: { dbName: \"test_db\" },\r\n    });\r\n\r\n    const mongoUri = mongoServer.getUri();\r\n\r\n    // Connect to MongoDB with optimized settings\r\n    await mongoose.connect(mongoUri, {\r\n      maxPoolSize: 10,\r\n      serverSelectionTimeoutMS: 10000,\r\n      socketTimeoutMS: 45000,\r\n      bufferCommands: false,\r\n    });\r\n\r\n    console.log(\" Connected to MongoDB Memory Server\");\r\n  } catch (_error) {\r\n    console.error(\" Failed to connect to test database:\", error);\r\n    throw error;\r\n  }\r\n}, 30000);\r\n\r\n// Clean up database between tests\r\nafterEach(async () => {\r\n  try {\r\n    const readyState = mongoose.connection.readyState as number;\r\n    if (readyState === CONNECTED) {\r\n      const collections = mongoose.connection.collections;\r\n      const deletePromises = Object.values(collections).map((collection) =>\r\n        collection.deleteMany({})\r\n      );\r\n      await Promise.all(deletePromises);\r\n    }\r\n  } catch (_error) {\r\n    console.error(\" Error cleaning up collections:\", error);\r\n  }\r\n});\r\n\r\n// Clean up after all tests\r\nafterAll(async () => {\r\n  try {\r\n    const readyState = mongoose.connection.readyState as number;\r\n    if (readyState !== DISCONNECTED) {\r\n      await mongoose.connection.dropDatabase();\r\n      await mongoose.connection.close();\r\n    }\r\n\r\n    if (mongoServer) {\r\n      await mongoServer.stop();\r\n    }\r\n    console.log(\" MongoDB Memory Server stopped\");\r\n  } catch (_error) {\r\n    console.error(\" Error during test cleanup:\", error);\r\n  }\r\n}, 30000);\r\n\r\n// Export for use in tests\r\nexport { mongoServer };\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup\\test_helpers.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 41
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-argument",
        "severity": 2,
        "message": "Unsafe argument of type `any` assigned to a parameter of type `string`.",
        "line": 16,
        "column": 46,
        "nodeType": "MemberExpression",
        "messageId": "unsafeArgument",
        "endLine": 16,
        "endColumn": 63
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .password on an `any` value.",
        "line": 16,
        "column": 55,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 16,
        "endColumn": 63
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 35,
        "column": 9,
        "nodeType": "Property",
        "messageId": "anyAssignment",
        "endLine": 35,
        "endColumn": 36
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-call",
        "severity": 2,
        "message": "Unsafe call of a(n) `any` typed value.",
        "line": 35,
        "column": 17,
        "nodeType": "MemberExpression",
        "messageId": "unsafeCall",
        "endLine": 35,
        "endColumn": 34
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access ._id on an `any` value.",
        "line": 35,
        "column": 22,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 35,
        "endColumn": 25
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 36,
        "column": 9,
        "nodeType": "Property",
        "messageId": "anyAssignment",
        "endLine": 36,
        "endColumn": 26
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .email on an `any` value.",
        "line": 36,
        "column": 21,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 36,
        "endColumn": 26
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 37,
        "column": 9,
        "nodeType": "Property",
        "messageId": "anyAssignment",
        "endLine": 37,
        "endColumn": 24
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .role on an `any` value.",
        "line": 37,
        "column": 20,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 37,
        "endColumn": 24
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 48,
        "column": 11,
        "nodeType": "VariableDeclarator",
        "messageId": "anyAssignment",
        "endLine": 48,
        "endColumn": 53
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-assignment",
        "severity": 2,
        "message": "Unsafe assignment of an `any` value.",
        "line": 51,
        "column": 14,
        "nodeType": "Property",
        "messageId": "anyAssignment",
        "endLine": 51,
        "endColumn": 18
      }
    ],
    "suppressedMessages": [],
    "errorCount": 12,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import bcrypt from \"bcryptjs\";\nimport jwt from \"jsonwebtoken\";\nimport mongoose from \"mongoose\";\nimport User from \"../../models/User.js\";\n\nexport interface TestUser {\n  user: any;\n  token: string;\n}\n\nexport class TestHelpers {\n  /**\n   * Create a test user with hashed password\n   */\n  static async createTestUser(userData: any): Promise<any> {\n    const hashedPassword = await bcrypt.hash(userData.password, 10);\n\n    const user = new User({\n      ...userData,\n      password: hashedPassword,\n    });\n\n    await user.save();\n    return user;\n  }\n\n  /**\n   * Generate JWT token for a user\n   */\n  static generateToken(user: any): string {\n    const jwtSecret = process.env.JWT_SECRET || \"your-secret-key\";\n\n    return jwt.sign(\n      {\n        userId: user._id.toString(),\n        email: user.email,\n        role: user.role,\n      },\n      jwtSecret,\n      { expiresIn: \"7d\" },\n    );\n  }\n\n  /**\n   * Create authenticated test user\n   */\n  static async createAuthenticatedUser(userData: any): Promise<TestUser> {\n    const user = await this.createTestUser(userData);\n    const token = this.generateToken(user);\n\n    return { user, token };\n  }\n\n  /**\n   * Create admin user for tests\n   */\n  static async createAdminUser(): Promise<TestUser> {\n    return this.createAuthenticatedUser({\n      email: \"admin@test.com\",\n      password: \"AdminPass123!\",\n      role: \"admin\",\n      username: \"admin\",\n      profile: {\n        firstName: \"Admin\",\n        lastName: \"User\",\n      },\n    });\n  }\n\n  /**\n   * Create regular user for tests\n   */\n  static async createRegularUser(): Promise<TestUser> {\n    return this.createAuthenticatedUser({\n      email: \"user@test.com\",\n      password: \"UserPass123!\",\n      role: \"investor\",\n      username: \"user\",\n      profile: {\n        firstName: \"Regular\",\n        lastName: \"User\",\n      },\n    });\n  }\n\n  /**\n   * Get authorization header with Bearer token\n   */\n  static getAuthHeader(token: string): Record<string, string> {\n    return {\n      Authorization: `Bearer ${token}`,\n    };\n  }\n\n  /**\n   * Clean up test users\n   */\n  static async cleanupTestUsers(): Promise<void> {\n    if (\n      mongoose.connection.readyState === mongoose.ConnectionStates.connected\n    ) {\n      await User.deleteMany({});\n    }\n  }\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup\\test_setup.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 33
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-enum-comparison",
        "severity": 2,
        "message": "The two values in this comparison do not have a shared enum type.",
        "line": 23,
        "column": 7,
        "nodeType": "BinaryExpression",
        "messageId": "mismatchedCondition",
        "endLine": 23,
        "endColumn": 43,
        "suggestions": [
          {
            "messageId": "replaceValueWithEnum",
            "fix": {
              "range": [744, 745],
              "text": "ConnectionStates.disconnected"
            },
            "desc": "Replace with an enum value comparison."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-enum-comparison",
        "severity": 2,
        "message": "The two values in this comparison do not have a shared enum type.",
        "line": 58,
        "column": 7,
        "nodeType": "BinaryExpression",
        "messageId": "mismatchedCondition",
        "endLine": 58,
        "endColumn": 43,
        "suggestions": [
          {
            "messageId": "replaceValueWithEnum",
            "fix": {
              "range": [1608, 1609],
              "text": "ConnectionStates.connected"
            },
            "desc": "Replace with an enum value comparison."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 3,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { afterAll, afterEach, beforeAll } from \"vitest\";\nimport { MongoMemoryServer } from \"mongodb-memory-server\";\nimport mongoose from \"mongoose\";\nimport { config } from \"dotenv\";\nimport path from \"path\";\n\n// Load environment variables from .env.test\nconst envPath = path.resolve(process.cwd(), '.env.test');\nconfig({ path: envPath });\n\n// Ensure JWT secrets are set for testing\nif (!process.env.JWT_SECRET) {\n  process.env.JWT_SECRET = 'test-jwt-secret-key-for-testing-only';\n}\nif (!process.env.JWT_REFRESH_SECRET) {\n  process.env.JWT_REFRESH_SECRET = 'test-jwt-refresh-secret-key-for-testing-only';\n}\n\nlet mongoServer: MongoMemoryServer;\n\nbeforeAll(async () => {\n  // Close any existing connections\n  if (mongoose.connection.readyState !== 0) {\n    await mongoose.disconnect();\n  }\n\n  // Start MongoDB Memory Server\n  mongoServer = await MongoMemoryServer.create({\n    instance: { dbName: \"test_db\" },\n  });\n\n  const mongoUri = mongoServer.getUri();\n\n  // Connect to MongoDB\n  await mongoose.connect(mongoUri, {\n    maxPoolSize: 10,\n    serverSelectionTimeoutMS: 10000,\n    socketTimeoutMS: 45000,\n    bufferCommands: false,\n  });\n\n  console.log(\"Connected to MongoDB Memory Server\");\n});\n\nafterEach(async () => {\n  // Clean up collections between tests\n  const collections = mongoose.connection.collections;\n  const deletePromises = Object.values(collections).map((collection) =>\n    collection\n      .deleteMany({})\n      .catch((err) => console.error(\"Cleanup error:\", err)),\n  );\n  await Promise.all(deletePromises);\n});\n\nafterAll(async () => {\n  // Clean up\n  if (mongoose.connection.readyState === 1) {\n    await mongoose.connection.dropDatabase();\n    await mongoose.disconnect();\n  }\n\n  if (mongoServer) {\n    await mongoServer.stop();\n  }\n\n  console.log(\"MongoDB Memory Server stopped\");\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\setup\\unified-test-config.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'mongoServer' is defined but never used.",
        "line": 4,
        "column": 5,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 4,
        "endColumn": 16,
        "suggestions": [
          {
            "messageId": "removeVar",
            "data": { "varName": "mongoServer" },
            "fix": { "range": [78, 94], "text": "" },
            "desc": "Remove unused variable 'mongoServer'."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// Unified test database configuration\nconst mongoose = require(\"mongoose\");\n\nlet mongoServer;\nlet isConnected = false;\n\nconst connectDB = async () => {\n  if (isConnected) return;\n\n  try {\n    const mongoUri =\n      process.env.MONGO_URI_TEST || \"mongodb://localhost:27017/test_db\";\n    await mongoose.connect(mongoUri, {\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n      maxPoolSize: 10,\n      serverSelectionTimeoutMS: 10000,\n      socketTimeoutMS: 45000,\n    });\n    isConnected = true;\n    console.log(\"Connected to MongoDB\");\n  } catch (_error) {\n    console.error(\"Error connecting to MongoDB:\", error);\n    throw error;\n  }\n};\n\nconst disconnectDB = async () => {\n  if (!isConnected) return;\n\n  try {\n    await mongoose.connection.dropDatabase();\n    await mongoose.connection.close();\n    isConnected = false;\n    console.log(\"Disconnected from MongoDB\");\n  } catch (_error) {\n    console.error(\"Error disconnecting from MongoDB:\", error);\n  }\n};\n\nmodule.exports = {\n  connectDB,\n  disconnectDB,\n};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\user_test.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'mongoose' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 2,
        "column": 8,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 2,
        "endColumn": 16
      },
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 3,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 3,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .errors on an `any` value.",
        "line": 62,
        "column": 16,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 62,
        "endColumn": 22
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .errors on an `any` value.",
        "line": 78,
        "column": 16,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 78,
        "endColumn": 22
      }
    ],
    "suppressedMessages": [],
    "errorCount": 4,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { describe, expect, it } from \"vitest\";\nimport mongoose from \"mongoose\";\nimport User from \"../models/User\";\nimport bcrypt from \"bcryptjs\";\n\ndescribe(\"User Model\", () => {\n  it(\"should create and save a user successfully\", async () => {\n    const userData = {\n      email: \"test@example.com\",\n      password: \"password123\",\n      profile: {\n        firstName: \"John\",\n        lastName: \"Doe\",\n      },\n    };\n    const user = new User(userData);\n    const savedUser = await user.save();\n\n    expect(savedUser._id).toBeDefined();\n    expect(savedUser.email).toBe(userData.email.toLowerCase());\n    expect(savedUser.profile.firstName).toBe(userData.profile.firstName);\n    expect(savedUser.password).not.toBe(userData.password); // password should be hashed\n  });\n\n  it(\"should hash password before saving\", async () => {\n    const user = new User({\n      email: \"hash@example.com\",\n      password: \"mypassword\",\n      profile: { firstName: \"Hash\", lastName: \"Test\" },\n    });\n    await user.save();\n    const isMatch = await bcrypt.compare(\"mypassword\", user.password);\n    expect(isMatch).toBe(true);\n  });\n\n  it(\"should compare password correctly\", async () => {\n    const user = new User({\n      email: \"compare@example.com\",\n      password: \"comparepass\",\n      profile: { firstName: \"Compare\", lastName: \"Test\" },\n    });\n    await user.save();\n    const isValid = await user.comparePassword(\"comparepass\");\n    expect(isValid).toBe(true);\n    const isInvalid = await user.comparePassword(\"wrongpass\");\n    expect(isInvalid).toBe(false);\n  });\n\n  it(\"should fail validation for invalid email\", async () => {\n    const user = new User({\n      email: \"invalid-email\",\n      password: \"password123\",\n      profile: { firstName: \"Invalid\", lastName: \"Email\" },\n    });\n    let err: any;\n    try {\n      await user.validate();\n    } catch (_error) {\n      err = error;\n    }\n    expect(err).toBeDefined();\n    expect(err.errors.email).toBeDefined();\n  });\n\n  it(\"should fail validation for short password\", async () => {\n    const user = new User({\n      email: \"shortpass@example.com\",\n      password: \"123\",\n      profile: { firstName: \"Short\", lastName: \"Pass\" },\n    });\n    let err: any;\n    try {\n      await user.validate();\n    } catch (_error) {\n      err = error;\n    }\n    expect(err).toBeDefined();\n    expect(err.errors.password).toBeDefined();\n  });\n});\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\users.test.ts",
    "messages": [
      {
        "ruleId": "sort-imports",
        "severity": 2,
        "message": "Imports should be sorted alphabetically.",
        "line": 4,
        "column": 1,
        "nodeType": "ImportDeclaration",
        "messageId": "sortImportsAlphabetically",
        "endLine": 4,
        "endColumn": 35
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'user' is assigned a value but never used. Allowed unused vars must match /^_/u.",
        "line": 13,
        "column": 11,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 13,
        "endColumn": 15
      },
      {
        "ruleId": "@typescript-eslint/no-unsafe-member-access",
        "severity": 2,
        "message": "Unsafe member access .token on an `any` value.",
        "line": 25,
        "column": 27,
        "nodeType": "Identifier",
        "messageId": "unsafeMemberExpression",
        "endLine": 25,
        "endColumn": 32
      },
      {
        "ruleId": "@typescript-eslint/restrict-template-expressions",
        "severity": 2,
        "message": "Invalid type \"unknown\" of template literal expression.",
        "line": 75,
        "column": 28,
        "nodeType": "ChainExpression",
        "messageId": "invalidType",
        "endLine": 75,
        "endColumn": 37
      }
    ],
    "suppressedMessages": [],
    "errorCount": 4,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { beforeEach, describe, expect, it } from 'vitest';\r\nimport bcrypt from 'bcryptjs';\r\nimport { request } from './setup';\r\nimport User from '../models/User';\r\n\r\ndescribe('User Management', () => {\r\n  let token: string;\r\n\r\n  beforeEach(async () => {\r\n    await User.deleteMany({});\r\n    \r\n    const hashedPassword = await bcrypt.hash('password123', 10);\r\n    const user = await User.create({\r\n      email: 'testuser@example.com',\r\n      password: hashedPassword,\r\n      firstName: 'Test',\r\n      lastName: 'User',\r\n      role: 'investor'\r\n    });\r\n\r\n    const loginRes = await request.post('/api/auth/login').send({\r\n      email: 'testuser@example.com',\r\n      password: 'password123'\r\n    });\r\n    token = loginRes.body.token as string;\r\n  });\r\n\r\n  describe('GET /api/users/me', () => {\r\n    it('should get current user profile', async () => {\r\n      const res = await request\r\n        .get('/api/users/me')\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveProperty('email', 'testuser@example.com');\r\n      expect(res.body).toHaveProperty('firstName', 'Test');\r\n      expect(res.body).not.toHaveProperty('password');\r\n    });\r\n\r\n    it('should not get profile without authentication', async () => {\r\n      const res = await request.get('/api/users/me');\r\n      expect(res.status).toBe(401);\r\n    });\r\n  });\r\n\r\n  describe('PUT /api/users/me', () => {\r\n    it('should update user profile', async () => {\r\n      const res = await request\r\n        .put('/api/users/me')\r\n        .set('Authorization', `Bearer ${token}`)\r\n        .send({\r\n          firstName: 'Updated',\r\n          lastName: 'Name',\r\n          phone: '+1234567890'\r\n        });\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveProperty('firstName', 'Updated');\r\n      expect(res.body).toHaveProperty('lastName', 'Name');\r\n    });\r\n\r\n    it('should not update user profile without authentication', async () => {\r\n      const res = await request.put('/api/users/me').send({\r\n        firstName: 'Updated'\r\n      });\r\n      expect(res.status).toBe(401);\r\n    });\r\n  });\r\n\r\n  describe('GET /api/users/:id', () => {\r\n    it('should get user by id', async () => {\r\n      const user = await User.findOne({ email: 'testuser@example.com' });\r\n      \r\n      const res = await request\r\n        .get(`/api/users/${user?._id}`)\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(200);\r\n      expect(res.body).toHaveProperty('email', 'testuser@example.com');\r\n    });\r\n\r\n    it('should return 404 for non-existent user', async () => {\r\n      const nonExistentId = '507f1f77bcf86cd799439011';\r\n      \r\n      const res = await request\r\n        .get(`/api/users/${nonExistentId}`)\r\n        .set('Authorization', `Bearer ${token}`);\r\n\r\n      expect(res.status).toBe(404);\r\n    });\r\n  });\r\n});\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\tests\\utils\\db-handler.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\types\\factories.d.ts",
    "messages": [
      {
        "ruleId": "no-redeclare",
        "severity": 2,
        "message": "'Types' is already defined.",
        "line": 11,
        "column": 10,
        "nodeType": "Identifier",
        "messageId": "redeclared",
        "endLine": 11,
        "endColumn": 15
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "/**\n * Solia SCI Invest - TypeScript Factory Definitions\n *\n * This file contains type definitions for all factory methods and overrides\n * used in test data generation.\n */\n\nimport { Types } from \"mongoose\";\n\nimport type { IProject, ISCIResource, ITenant, IUser } from \"./models\";\nimport { Types } from \"mongoose\";\n\n// User Factory Types\nexport interface IUserOverrides {\n  name?: string;\n  email?: string;\n  password?: string;\n  role?: \"admin\" | \"investor\" | \"collector\" | \"user\";\n  profile?: Partial<IUser[\"profile\"]>;\n  isEmailVerified?: boolean;\n  isActive?: boolean;\n}\n\n// Tenant Factory Types\nexport interface ITenantOverrides {\n  name?: string;\n  slug?: string;\n  description?: string;\n  logo?: string;\n  website?: string;\n  owner?: Types.ObjectId;\n  members?: Types.ObjectId[];\n  settings?: Partial<ITenant[\"settings\"]>;\n  isActive?: boolean;\n}\n\n// Project Factory Types\nexport interface IProjectOverrides {\n  name?: string;\n  description?: string;\n  type?: \"residential\" | \"commercial\" | \"mixed\" | \"industrial\";\n  location?: Partial<IProject[\"location\"]>;\n  financials?: Partial<IProject[\"financials\"]>;\n  timeline?: Partial<IProject[\"timeline\"]>;\n  documents?: IProject[\"documents\"];\n  status?: \"draft\" | \"active\" | \"funded\" | \"completed\" | \"cancelled\";\n  tenant?: Types.ObjectId;\n  createdBy?: Types.ObjectId;\n  investors?: Types.ObjectId[];\n  progress?: number;\n}\n\n// SCI Resource Factory Types\nexport interface ISCIResourceOverrides {\n  title?: string;\n  description?: string;\n  type?: string;\n  category?: string;\n  tags?: string[];\n  content?: Partial<ISCIResource[\"content\"]>;\n  media?: Partial<ISCIResource[\"media\"]>;\n  author?: Types.ObjectId;\n  tenant?: Types.ObjectId;\n  isFeatured?: boolean;\n  isPublished?: boolean;\n}\n\n// Donation Factory Types\nexport interface IDonationOverrides {\n  amount?: number;\n  currency?: string;\n  project?: Types.ObjectId;\n  donor?: Types.ObjectId;\n  status?: \"pending\" | \"completed\" | \"failed\" | \"refunded\";\n  paymentMethod?: string;\n  transactionId?: string;\n  message?: string;\n  isAnonymous?: boolean;\n}\n\n// Factory Method Types\nexport interface IFactoryMethods {\n  // User factories\n  createUser: (overrides?: IUserOverrides) => Promise<IUser>;\n  createUsers: (count?: number, overrides?: IUserOverrides) => Promise<IUser[]>;\n  createAdmin: (overrides?: IUserOverrides) => Promise<IUser>;\n  createInvestor: (overrides?: IUserOverrides) => Promise<IUser>;\n  createCollector: (overrides?: IUserOverrides) => Promise<IUser>;\n\n  // Tenant factories\n  createTenant: (overrides?: ITenantOverrides) => Promise<ITenant>;\n  createTenants: (\n    count?: number,\n    overrides?: ITenantOverrides,\n  ) => Promise<ITenant[]>;\n\n  // Project factories\n  createProject: (overrides?: IProjectOverrides) => Promise<IProject>;\n  createProjects: (\n    count?: number,\n    overrides?: IProjectOverrides,\n  ) => Promise<IProject[]>;\n  createFundedProject: (overrides?: IProjectOverrides) => Promise<IProject>;\n  createActiveProject: (overrides?: IProjectOverrides) => Promise<IProject>;\n\n  // SCI Resource factories\n  createSCIResource: (\n    overrides?: ISCIResourceOverrides,\n  ) => Promise<ISCIResource>;\n  createSCIResources: (\n    count?: number,\n    overrides?: ISCIResourceOverrides,\n  ) => Promise<ISCIResource[]>;\n  createFeaturedResource: (\n    overrides?: ISCIResourceOverrides,\n  ) => Promise<ISCIResource>;\n\n  // Utility functions\n  clearDatabase: () => Promise<void>;\n  seedDatabase: (options?: {\n    users?: number;\n    tenants?: number;\n    projects?: number;\n    sciResources?: number;\n  }) => Promise<{\n    users: IUser[];\n    tenants: ITenant[];\n    projects: IProject[];\n    sciResources: ISCIResource[];\n  }>;\n  getRandomObjectId: () => string;\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\types\\global.d.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 3,
        "column": 16,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 3,
        "endColumn": 19,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [90, 93], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [90, 93], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      },
      {
        "ruleId": "@typescript-eslint/no-unused-vars",
        "severity": 2,
        "message": "'Models' is defined but never used. Allowed unused vars must match /^_/u.",
        "line": 12,
        "column": 19,
        "nodeType": null,
        "messageId": "unusedVar",
        "endLine": 12,
        "endColumn": 25
      }
    ],
    "suppressedMessages": [],
    "errorCount": 1,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "// Global type declarations for JavaScript modules\ndeclare module \"*.js\" {\n  const value: any;\n  export = value;\n}\n\n// Express app type\ndeclare const app: import(\"express\").Express;\nexport = app;\n\n// Model type declarations\ndeclare namespace Models {\n  interface User {\n    _id?: string;\n    name: string;\n    email: string;\n    password: string;\n    role: \"admin\" | \"user\";\n    createdAt?: Date;\n    updatedAt?: Date;\n  }\n\n  interface Project {\n    _id?: string;\n    title: string;\n    description: string;\n    goalAmount: number;\n    currentAmount: number;\n    status: \"draft\" | \"active\" | \"completed\" | \"cancelled\";\n    createdAt?: Date;\n    updatedAt?: Date;\n  }\n}\n\n// Extend global scope\ndeclare global {\n  namespace NodeJS {\n    interface Global {\n      app: import(\"express\").Express;\n    }\n  }\n}\n\nexport {};\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\types\\index.d.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\types\\models.d.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 126,
        "column": 14,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 126,
        "endColumn": 17,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [2684, 2687], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [2684, 2687], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "import { Document, Model, Types } from \"mongoose\";\n\n// Base interfaces for plain data (without Document methods)\nexport interface ITenantData {\n  name: string;\n  slug: string;\n  owner: Types.ObjectId | string;\n  users?: Types.ObjectId[] | string[];\n  projects?: Types.ObjectId[] | string[];\n  settings?: {\n    branding?: {\n      logoUrl?: string;\n      primaryColor?: string;\n      secondaryColor?: string;\n    };\n    features?: string[];\n  };\n  address?: {\n    street: string;\n    city: string;\n    state: string;\n    zipCode: string;\n    country: string;\n  };\n}\n\nexport interface IUserData {\n  email: string;\n  password: string;\n  role: \"investor\" | \"collector\" | \"admin\";\n  profile: {\n    firstName: string;\n    lastName: string;\n    phone?: string;\n    avatar?: string;\n    kycStatus?: \"pending\" | \"verified\" | \"rejected\";\n  };\n  investments?: Types.ObjectId[] | string[];\n  preferences?: {\n    notifications?: {\n      email?: boolean;\n      sms?: boolean;\n      push?: boolean;\n    };\n    language?: string;\n    currency?: string;\n  };\n  tenant?: Types.ObjectId | string;\n  isEmailVerified?: boolean;\n}\n\n// Document interfaces (with Mongoose methods)\nexport interface ITenant extends ITenantData, Document {\n  _id: Types.ObjectId;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\nexport interface IUser extends IUserData, Document {\n  _id: Types.ObjectId;\n  createdAt?: Date;\n  updatedAt?: Date;\n}\n\nexport interface IProject extends Document {\n  name: string;\n  description: string;\n  type: \"residential\" | \"commercial\" | \"mixed\";\n  status: \"draft\" | \"active\" | \"funded\" | \"completed\" | \"cancelled\";\n  location: {\n    address: string;\n    city: string;\n    postalCode: string;\n    coordinates: {\n      lat: number;\n      lng: number;\n    };\n  };\n  financials: {\n    totalInvestment: number;\n    targetAmount: number;\n    currentAmount: number;\n    expectedReturn: number;\n    duration: number;\n    entryTicket: number;\n  };\n  timeline: {\n    startDate: Date;\n    endDate: Date;\n    milestones: Array<{\n      name: string;\n      date: Date;\n      completed: boolean;\n    }>;\n  };\n  documents: Array<{\n    name: string;\n    url: string;\n    type: string;\n  }>;\n  tenant: Types.ObjectId;\n  createdBy: Types.ObjectId;\n  investors: Array<{\n    user: Types.ObjectId;\n    amount: number;\n    shares: number;\n    investedAt: Date;\n  }>;\n  progress?: number;\n  remainingAmount?: number;\n}\n\nexport interface ISCIResource extends Document {\n  title: string;\n  category: string;\n  subcategory?: string;\n  level: string;\n  description: string;\n  content: string;\n  documentType: string;\n  tags?: string[];\n  url?: string;\n  fileUrl?: string;\n  lastUpdate?: Date;\n  isActive?: boolean;\n  metadata?: any;\n}\n\ndeclare module \"../models/Project.js\" {\n  const Project: Model<IProject>;\n  export default Project;\n}\n\ndeclare module \"../models/SCIResource.js\" {\n  const SCIResource: Model<ISCIResource>;\n  export default SCIResource;\n}\n\ndeclare module \"../models/Tenant.js\" {\n  const Tenant: Model<ITenant>;\n  export default Tenant;\n}\n\ndeclare module \"../models/User.js\" {\n  const User: Model<IUser>;\n  export default User;\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\types\\server.d.ts",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\types\\tenant.types.ts",
    "messages": [
      {
        "ruleId": "@typescript-eslint/no-explicit-any",
        "severity": 1,
        "message": "Unexpected any. Specify a different type.",
        "line": 42,
        "column": 18,
        "nodeType": "TSAnyKeyword",
        "messageId": "unexpectedAny",
        "endLine": 42,
        "endColumn": 21,
        "suggestions": [
          {
            "messageId": "suggestUnknown",
            "fix": { "range": [788, 791], "text": "unknown" },
            "desc": "Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."
          },
          {
            "messageId": "suggestNever",
            "fix": { "range": [788, 791], "text": "never" },
            "desc": "Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."
          }
        ]
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "export interface ITenantSettings {\n  branding: {\n    logoUrl?: string;\n    primaryColor?: string;\n    secondaryColor?: string;\n  };\n  features: string[];\n}\n\nexport interface ITenantAddress {\n  street?: string;\n  city?: string;\n  state?: string;\n  zipCode?: string;\n  country?: string;\n}\n\nexport interface ITenantOverrides {\n  owner?: {\n    _id?: string;\n    email?: string;\n    password?: string;\n    role?: string;\n    profile?: {\n      firstName?: string;\n      lastName?: string;\n      phone?: string;\n    };\n  };\n  name?: string;\n  slug?: string;\n  description?: string;\n  logo?: string;\n  website?: string;\n  email?: string;\n  phone?: string;\n  address?: ITenantAddress;\n  settings?: ITenantSettings;\n  isActive?: boolean;\n  users?: string[];\n  projects?: string[];\n  [key: string]: any;\n}\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\utils\\jwtHelper.js",
    "messages": [
      {
        "ruleId": "no-unused-vars",
        "severity": 1,
        "message": "'_error' is defined but never used.",
        "line": 20,
        "column": 12,
        "nodeType": "Identifier",
        "messageId": "unusedVar",
        "endLine": 20,
        "endColumn": 18
      }
    ],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 1,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "source": "const jwt = require('jsonwebtoken');\r\n\r\nconst generateAccessToken = (user) => {\r\n  const payload = {\r\n    userId: user._id.toString(),\r\n    email: user.email,\r\n    role: user.role,\r\n    firstName: user.profile?.firstName || '',\r\n    lastName: user.profile?.lastName || ''\r\n  };\r\n  \r\n  return jwt.sign(payload, process.env.JWT_SECRET, {\r\n    expiresIn: process.env.JWT_EXPIRES_IN || '7d'\r\n  });\r\n};\r\n\r\nconst verifyAccessToken = (token) => {\r\n  try {\r\n    return jwt.verify(token, process.env.JWT_SECRET);\r\n  } catch (_error) {\r\n    return null;\r\n  }\r\n};\r\n\r\nmodule.exports = {\r\n  generateAccessToken,\r\n  verifyAccessToken\r\n};\r\n",
    "usedDeprecatedRules": []
  },
  {
    "filePath": "C:\\Users\\moros\\Desktop\\scisoliainvest.com\\backend\\utils\\logger.js",
    "messages": [],
    "suppressedMessages": [],
    "errorCount": 0,
    "fatalErrorCount": 0,
    "warningCount": 0,
    "fixableErrorCount": 0,
    "fixableWarningCount": 0,
    "usedDeprecatedRules": []
  }
]
